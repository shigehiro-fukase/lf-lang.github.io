<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta data-react-helmet="true" property="twitter:site" content="thelflang"/><meta data-react-helmet="true" property="og:description" content="Detailed reference for each target langauge."/><meta data-react-helmet="true" property="og:title" content="Documentation - Target Language Details"/><meta data-react-helmet="true" name="description" content="Detailed reference for each target langauge."/><meta name="theme-color" content="#3B7EA1"/><meta name="generator" content="Gatsby 4.12.1"/><style data-href="/styles.bd6c85ce195bd4eafeae.css" data-identity="gatsby-global-css">#top-menu{background-color:#013163;clear:both;display:flex;height:4rem;justify-content:space-between;-webkit-user-select:none;-ms-user-select:none;user-select:none;z-index:101}#top-menu>.left{display:flex;flex-direction:row;padding-bottom:env(safe-area-inset-bottom)}#top-menu>.right{display:flex;flex-direction:row-reverse;justify-self:flex-end}#top-menu .nav{display:inline-block;text-decoration:none}#top-menu ul{margin:0;padding:0}#top-menu #home-page-logo{max-width:135px;padding-left:3.5rem;padding-right:4.5rem;padding-top:.5rem}@media screen and (-ms-high-contrast:active){#top-menu #home-page-logo svg path{fill:blue}}#top-menu #home-page-logo svg{margin-left:1rem;margin-right:.6rem}#top-menu #home-page-logo span{margin-right:.2rem;position:relative;text-decoration:none;top:-.3rem}@media screen and (max-width:700px){#top-menu #home-page-logo{padding-left:.5rem;padding-right:0}}@media screen and (max-width:400px){#top-menu #home-page-logo{padding-left:.25rem;padding-right:0}}#top-menu .nav-item{display:inline-block;font-size:1rem;font-weight:600;text-decoration:none}#top-menu .nav-item a{display:block;padding:1.25rem .5em .5em}#top-menu .nav-item a:hover{opacity:.8}#top-menu .nav-item a.active,#top-menu .nav-item a:focus{text-decoration:underline}#top-menu a{color:#fff;text-decoration:none}#beta-notification-menu,.gatsby-noscript{background-color:#c63131;color:#fff;padding:.4rem 0;text-align:center;-webkit-user-select:none;-ms-user-select:none;user-select:none}#beta-notification-menu a,.gatsby-noscript a{color:#fff}form.search{background-color:#3c7a9b;border-radius:3px 0 0 3px;display:inline-block;height:4rem;padding-left:1rem}form.search svg{margin-right:.3rem;position:relative;top:.3rem}@media screen and (-ms-high-contrast:black-on-white){form.search svg path{fill:#000}}form.search:focus-within{background-color:#3b7ea1}@media screen and (-ms-high-contrast:black-on-white){form.search:focus-within{border:2px solid #fff}}@media screen and (-ms-high-contrast:white-on-black){form.search:focus-within{border:2px solid #000}}form.search input{-webkit-appearance:none;background-color:#3c7a9b;border:none;border-radius:0;color:#fff;font-size:1rem;font-weight:600;height:4rem;vertical-align:initial!important;width:150px}form.search input:focus-within{background-color:#3b7ea1}form.search input::-webkit-input-placeholder{color:#fff}form.search input:-ms-input-placeholder{color:#fff}form.search input::placeholder{color:#fff}#like-dislike-subnav,.page-popup{transition:opacity .2s linear}.page-popup{background:#222;border-radius:5px;border-radius:4px;bottom:20px;box-shadow:0 1.6px 3.6px 0 rgba(0,0,0,.432),0 .3px .9px 0 rgba(0,0,0,.408);color:#fff;position:fixed;right:20px;z-index:2}.page-popup p{font-size:14px;padding:0 10px}.page-popup div{display:flex}.page-popup div button{background-color:#3c7a9b;border:none;border-radius:0;color:#fff;flex:1 1;flex-grow:1}.page-popup div button.focus,.page-popup div button:hover{background-color:#104261}.page-popup div button.first{border-right:1px solid #fff}.page-popup svg{fill:#fff}#top-menu nav ul .show-only-medium{display:none}#top-menu nav ul .hide-only-medium{display:inline}#top-menu nav ul .show-only-largest,#top-menu nav ul .show-only-small{display:none}@media(max-width:800px){#top-menu nav ul .show-only-small{display:block!important}#top-menu nav ul .show-small{display:inline!important}#top-menu nav ul .hide-only-medium{display:none}#top-menu nav ul .show-only-large{display:none!important}}@media(min-width:767px)and (max-width:900px){#top-menu nav ul .show-only-medium{display:inline!important}#top-menu nav ul .hide-only-medium{display:none!important}}@media(min-width:900px){#top-menu nav ul .show-only-large{display:inline-block!important}}@media(min-width:1050px){#top-menu nav ul .show-only-largest{display:inline-block!important}}@media(max-width:790px){#site-wrapper{margin-bottom:-1px}#my-lang-quick-jump,.hide-small{display:none!important}#top-menu{bottom:0;display:flex;flex-direction:column-reverse;height:auto;left:0;position:fixed;right:0}#top-menu .nav-item{display:block}#top-menu.up{-webkit-transform:translate(0);transform:translate(0);transition-timing-function:ease;transition:-webkit-transform .3s;transition:transform .3s;transition:transform .3s,-webkit-transform .3s}#top-menu.down{-webkit-transform:translateY(8.2rem);transform:translateY(8.2rem);transition-timing-function:ease;transition:-webkit-transform .6s;transition:transform .6s;transition:transform .6s,-webkit-transform .6s}}@media(max-width:790px)and (prefers-reduced-motion:reduce){#top-menu.down,#top-menu.up{transition:none}}@media(max-width:790px){#top-menu #home-page-logo{width:auto}#top-menu .below-small nav{-webkit-columns:2;column-count:2;flex-grow:1}}@media(max-width:790px)and (min-width:450px){#top-menu .below-small nav{-webkit-columns:1;column-count:1}#top-menu .below-small nav ul{display:flex;flex-wrap:wrap}#top-menu .below-small nav ul li{flex:1 1;text-align:center}}@media(max-width:790px){.above-small .search-section{width:100%}.above-small form.search{display:flex;width:calc(100% - 1rem)}.above-small form.search svg{position:relative;top:1rem}.above-small form.search input{width:200%}#top-menu .ds-dropdown-menu{bottom:140%;left:0!important;margin-left:-34px;min-width:0;right:-180px!important;top:auto!important}#top-menu .ds-dropdown-menu:before{bottom:-7px;left:40px;top:auto;-webkit-transform:rotate(135deg);transform:rotate(135deg)}}.skip-to-main{clip:rect(1px,1px,1px,1px);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px}.skip-to-main:focus{clip:auto;background-color:#fdfcfb;border:1px dashed #000;color:#000;height:auto;overflow:auto;padding:20px;position:absolute;text-align:center;width:100%;z-index:999999}#site-footer{background-color:#3c7a9b;color:#fff;padding-bottom:3rem;padding-top:1rem}@media(max-width:800px){#site-footer{padding-bottom:9rem}}#site-footer a{color:#fff}#site-footer section{margin:0 auto;max-width:1040px;padding-left:.5rem;padding-right:.5rem;padding-top:1rem}#site-footer h3{font-size:20px;font-style:normal;font-weight:600;margin-top:1px}#site-footer ul{display:flex;flex-wrap:wrap;padding:0}#site-footer ul li{font-weight:600;list-style:none;width:13rem}#site-footer ul li a{font-size:16px}#site-footer ul li p{font-size:14px;margin-top:2px;width:74%}#site-footer ul li span.link-prefix{left:-30px;position:absolute;text-align:right;width:26px}@media(max-width:800px){#site-footer ul li{margin-left:10px}#site-footer ul li p{width:100%}}#site-footer section#customize{border-bottom:1px solid hsla(0,0%,100%,.3);padding-top:2px}#site-footer section#customize article{display:flex;flex-direction:row}#site-footer section#customize article h3{width:240px}@media(max-width:800px){#site-footer section#customize article{flex-direction:column;margin-bottom:1rem}#site-footer section#customize article label{margin-left:8px}}#site-footer section#customize article label{display:flex;flex-direction:row}#site-footer section#customize article label p{margin:6px 8px 0 0;padding:0}#site-footer section#customize .switch-wrap{display:inline-block;height:20px;margin-right:1rem;padding:5px}#site-footer section#customize .switch-wrap select{background-color:#181818;color:#fff}#site-footer section#community{border-top:1px solid hsla(0,0%,100%,.3);display:flex;padding-top:2rem}@media(max-width:900px){#site-footer section#community{flex-direction:column-reverse;padding-left:2rem}#site-footer section#community article#logos{margin:3rem auto 0;text-align:center}}#site-footer section#community article>ul{display:flex;flex-wrap:wrap}#site-footer section#community article>ul>li{margin-bottom:.8rem;word-break:break-word}@media(min-width:800px){#site-footer section#community article>ul>li{width:50%}}#site-footer section#community #logos{margin-right:40px;width:200px}#site-footer section#community #logos svg{margin-bottom:-.8rem}@media screen and (-ms-high-contrast:black-on-white){#site-footer section#community #logos img{-webkit-filter:invert(100%);filter:invert(100%)}#site-footer section#community #logos svg path{fill:#000}}#site-footer section#community #community-links,#site-footer section#community #using-lf{flex:1 1}@media(max-width:800px){#community-links ul,#using-lf ul{margin-left:12px}}.popover-container{position:relative}.popover-container .examples{overflow-y:auto}.popover-container .examples>div.section-content .section-list{width:300px}.popover-container.allow-hover:hover .footer-icon:after{content:"▼"}.popover-container .footer-icon:after{content:"⊙"}@font-face{font-family:Cascadia Mono-SemiLight;font-style:normal;font-weight:400;src:url(/fonts/CascadiaMono-SemiLight.woff2) format("woff2")}@font-face{font-family:Cascadia Code-SemiLight;font-style:normal;font-weight:400;src:url(/fonts/CascadiaCode-SemiLight.woff2) format("woff2")}@font-face{font-family:JetBrains Mono-Regular;font-style:normal;font-weight:400;src:url(/fonts/JetBrainsMono-Regular.woff2) format("woff2")}@font-face{font-family:FiraCode-Regular;font-style:normal;font-weight:400;src:url(/fonts/FiraCode-Regular.woff2) format("woff2")}@font-face{font-family:Dank Mono Regular;font-style:normal;font-weight:400;src:url(/fonts/DankMono-Regular.woff2) format("woff2")}@font-face{font-family:SourceCode Pro Regular;font-style:normal;font-weight:400;src:url(/fonts/SourceCodePro-Regular.woff2) format("woff2")}@font-face{font-family:OpenDyslexicMono Regular;font-style:normal;font-weight:400;src:url(/fonts/OpenDyslexicMono-Regular.woff) format("woff")}@font-face{font-family:OpenDyslexic Regular;font-style:normal;font-weight:400;src:url(/fonts/OpenDyslexic-Regular.woff) format("woff")}body{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}body button,body input,body textarea{font-family:inherit}[lang^=ar] body,body [lang^=ar],body[lang^=ar]{font-family:"Segoe UI Web (Arabic)",Segoe UI,-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif}[lang^=bg] body,body [lang^=bg],body[lang^=bg]{font-family:"Segoe UI Web (Cyrillic)",Segoe UI,-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif}[lang^=cs] body,body [lang^=cs],body[lang^=cs]{font-family:"Segoe UI Web (East European)",Segoe UI,-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif}[lang^=el] body,body [lang^=el],body[lang^=el]{font-family:"Segoe UI Web (Greek)",Segoe UI,-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif}[lang^=et] body,body [lang^=et],body[lang^=et]{font-family:"Segoe UI Web (East European)",Segoe UI,-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif}[lang^=he] body,body [lang^=he],body[lang^=he]{font-family:"Segoe UI Web (Hebrew)",Segoe UI,-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif}[lang^=hi] body,body [lang^=hi],body[lang^=hi]{font-family:Nirmala UI,Segoe UI,-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif}[lang^=hr] body,[lang^=hu] body,body [lang^=hr],body [lang^=hu],body[lang^=hr],body[lang^=hu]{font-family:"Segoe UI Web (East European)",Segoe UI,-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif}[lang^=ja] body,body [lang^=ja],body[lang^=ja]{font-family:Segoe UI,-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,Meiryo,Hiragino Sans,Source Han Sans,Noto Sans CJK JP,sans-serif}[lang^=kk] body,body [lang^=kk],body[lang^=kk]{font-family:"Segoe UI Web (East European)",Segoe UI,-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif}[lang^=ko] body,body [lang^=ko],body[lang^=ko]{font-family:Malgun Gothic,Gulim,Segoe UI,-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif}[lang^=lo] body,body [lang^=lo],body[lang^=lo]{font-family:Leelawadee UI Web,Lao UI,DokChampa,Segoe UI,-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif}[lang^=lt] body,[lang^=lv] body,[lang^=pl] body,body [lang^=lt],body [lang^=lv],body [lang^=pl],body[lang^=lt],body[lang^=lv],body[lang^=pl]{font-family:"Segoe UI Web (East European)",Segoe UI,-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif}[lang^=ru] body,body [lang^=ru],body[lang^=ru]{font-family:"Segoe UI Web (Cyrillic)",Segoe UI,-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif}[lang^=sk] body,[lang^=sr-latn] body,body [lang^=sk],body [lang^=sr-latn],body[lang^=sk],body[lang^=sr-latn]{font-family:"Segoe UI Web (East European)",Segoe UI,-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif}[lang^=th] body,body [lang^=th],body[lang^=th]{font-family:Leelawadee UI Web,Kmer UI,Segoe UI,-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif}[lang^=tr] body,body [lang^=tr],body[lang^=tr]{font-family:"Segoe UI Web (East European)",Segoe UI,-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif}[lang^=uk] body,body [lang^=uk],body[lang^=uk]{font-family:"Segoe UI Web (Cyrillic)",Segoe UI,-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif}[lang^=vi] body,body [lang^=vi],body[lang^=vi]{font-family:"Segoe UI Web (Vietnamese)",Segoe UI,-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif}[lang^=zh-hans] body,body [lang^=zh-hans],body[lang^=zh-hans]{font-family:Microsoft Yahei UI,Verdana,Simsun,Segoe UI,-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif}[lang^=zh-hant] body,body [lang^=zh-hant],body[lang^=zh-hant]{font-family:Microsoft Jhenghei UI,Pmingliu,Segoe UI,-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif}.dark-theme{--lf-keyword:#cb8515;--lf-target-selector:#95620f;--lf-target-selector-button:#464a56;--lf-target-selector-border-color:#606060;--background-color:#181818;--text-color:#fff;--border-color:#444;--background-minor-highlight-color:#343434;--inline-code-background-color:#181818;--inline-code-color:#fff;--link-color:#a8baf3;--pure-background:#000;--raised-background-color:#202020;--alt-text-color:#fff;--raised-box-shadow:0 1.6px 3.6px 0 hsla(0,0%,100%,.132),0 0.3px 0.9px 0 hsla(0,0%,100%,.108);--sidebar-background-color:#202020;--sidebar-list-active-background-color:#2f3439;--sidebar-list-background-color:#353434;--sidebar-link-border-color:#fff;--sidebar-item-border-color:#3e3e3e;--sidebar-twisty-color:#248aed;--sidebar-header-active-background-color:#1a1c28;--sidebar-highlight-color:#248aed;--sidebar-target-selector-highlight-color:#f7941e;--sidebar-active-button-background-color:#4d4c4c;--table-border-color:#545454;--blue-tinged-bg:#2c3841;--blue-tinged-strong:#273f52;--footer-arrow-color:#f2f2f2;--fade-gradient:linear-gradient(0deg,#313131,rgba(49,49,49,.2))}html,html.light-theme{--lf-keyword:#cb8515;--lf-target-selector:#f7941e;--lf-target-selector-button:#ebe5da;--lf-target-selector-border-color:#e8ccbd;--background-color:#fdfcfb;--pure-background:#fff;--text-color:#333;--border-color:#eee;--background-minor-highlight-color:#fcfcfc;--inline-code-background-color:#f5f2f0;--inline-code-color:#000;--link-color:#3c7a9b;--raised-background-color:#fff;--alt-text-color:#000;--raised-box-shadow:0 1.6px 3.6px 0 rgba(0,0,0,.132),0 0.3px 0.9px 0 rgba(0,0,0,.108);--sidebar-background-color:#f1f1f1;--sidebar-header-active-background-color:#d5e4ed;--sidebar-list-active-background-color:#e4eff5;--sidebar-list-background-color:#fafafa;--sidebar-link-border-color:#000;--sidebar-twisty-color:#3c7a9b;--sidebar-highlight-color:#0d5ca8;--sidebar-target-selector-highlight-color:#cb8515;--sidebar-item-border-color:#dfdfdf;--sidebar-active-button-background-color:#dfdfdf;--footer-arrow-color:#202020;--table-border-color:#f1f1f1;--blue-tinged-bg:#e6f2fb;--blue-tinged-strong:#cce4f6;--fade-gradient:linear-gradient(0deg,#fff,hsla(0,0%,100%,.2));-webkit-font-smoothing:antialiased;background-color:var(--background-color);color:var(--text-color);font-family:var(--body-font);font-size:16px;line-height:1.4}html{--code-font:"Cascadia Mono-SemiLight",Menlo,Monaco,Consolas,monospace;--body-font:"Segoe UI Web (West European)","Segoe UI",-apple-system,BlinkMacSystemFont,Roboto,"Helvetica Neue",sans-serif}html.font-cascadia-ligatures{--code-font:"Cascadia Code-SemiLight",Menlo,Monaco,Consolas,monospace}html.font-consolas{--code-font:Consolas,monospace}html.font-dank-mono{--code-font:"Dank Mono Regular",Menlo,Monaco,Consolas,monospace}html.font-jetbrains-mono{--code-font:"JetBrains Mono-Regular",Menlo,Monaco,Consolas,monospace}html.font-fira-code{--code-font:"FiraCode-Regular",Menlo,Monaco,Consolas,monospace}html.font-sf-mono{--code-font:"SF Mono",Menlo,Monaco,Consolas,monospace}html.font-source-code-pro{--code-font:"SourceCode Pro Regular",Menlo,Monaco,Consolas,monospace}html.font-open-dyslexic{--code-font:"OpenDyslexicMono Regular",Menlo,Monaco,Consolas,monospace;--body-font:"OpenDyslexic Regular","Segoe UI Web (West European)","Segoe UI",-apple-system,BlinkMacSystemFont,Roboto,"Helvetica Neue",sans-serif}.raised{background-color:var(--raised-background-color);box-shadow:var(--raised-box-shadow);color:var(--alt-text-color)}.raised a{color:var(--link-color)}.raised h1,.raised h2,.raised h3{line-height:normal;margin-bottom:1.5rem;margin-top:2rem}.raised li,.raised p{line-height:1.4rem}.raised ul{padding-left:10px}.raised ul li{margin-bottom:10px;margin-left:10px}.raised h1>code,.raised h2>code,.raised h3>code{font-size:.95em;margin-left:.2em;margin-right:.2em;margin-top:.2em}.raised h1>code,.raised h2>code,.raised h3>code,.raised li>code,.raised p>code{background-color:var(--inline-code-background-color);color:var(--inline-code-color);padding:2px 4px}.raised li>code,.raised p>code{font-family:var(--code-font);font-size:.9rem}.raised td{padding:4px}.raised .lf_keywords{color:var(--lf-keyword)!important;font-weight:700}.raised .web-page-error{color:red!important;font-weight:700}.lf{color:var(--lf-keyword)!important;font-weight:700}.dark-theme .raised .markdown .anchor.before svg path{fill:#fff}h2,h3{font-weight:400}.main-content-block{margin:1rem auto;max-width:960px;padding:.4rem 2rem 2rem}.main-content-block.headline{max-width:calc(960px + 4rem)}body{margin:0}#___gatsby,body,html{height:100%}#site-wrapper{display:flex;flex-direction:column}#small-device-button-sidebar{display:none}nav#sidebar{background-color:var(--sidebar-background-color);color:var(--alt-text-color);min-width:19rem}nav#sidebar ul{margin:0;padding:0;position:-webkit-sticky;position:sticky;top:0}nav#sidebar ul li{border-bottom:1px solid var(--sidebar-item-border-color);font-size:1rem;font-weight:400;list-style:none;min-height:2.5rem;padding:0}nav#sidebar ul li button#targetChooser{background-color:var(--lf-target-selector)!important}nav#sidebar ul li button{-webkit-appearance:none;background-color:transparent;border:none;color:var(--alt-text-color);cursor:pointer;display:block;font-size:1rem;font-weight:500;height:2.5rem;padding-left:1rem;position:relative;text-align:left;width:100%}nav#sidebar ul li button .closed path,nav#sidebar ul li button .open path{stroke:var(--text-color)}nav#sidebar ul li button span{position:absolute;right:20px}nav#sidebar ul li ul ul{margin-left:.2rem}nav#sidebar ul li.highlighted{background-color:var(--sidebar-header-active-background-color)}nav#sidebar ul li.highlighted svg path{stroke:var(--sidebar-twisty-color)}nav#sidebar ul li.closed span.open,nav#sidebar ul li.closed ul,nav#sidebar ul li.open>button>span.closed{display:none}nav#sidebar ul li.open>ul{background-color:var(--sidebar-list-background-color)}nav#sidebar ul li.open.highlighted ul{background-color:var(--sidebar-list-active-background-color)}nav#sidebar ul li ul{margin:0;padding:0}nav#sidebar ul li ul a{color:var(--alt-text-color);display:block;flex-grow:1;padding-bottom:.5rem;padding-left:1rem;padding-top:.5rem;text-decoration:none}nav#sidebar ul li ul li{list-style:none}nav#sidebar ul li ul li a{font-weight:300;margin-right:-.5rem}nav#sidebar ul li ul li:hover{margin-right:-.3rem;padding-left:.3rem;transition:padding-left .1s ease-out}@media(prefers-reduced-motion:reduce){nav#sidebar ul li ul li:hover{transition:none}}nav#sidebar ul li ul li a:focus,nav#sidebar ul li ul li a:hover{border-left:3px solid var(--sidebar-link-border-color)}nav#sidebar ul li ul li.highlight a{border-left:3px solid var(--sidebar-highlight-color);color:var(--sidebar-highlight-color);font-weight:500;margin-left:.5rem;margin-right:-.5rem}@media(min-width:800px){nav#sidebar>ul{max-height:calc(100vh - 10px);overflow-x:hidden;overflow-y:auto}}nav#sidebar #targetChooser,nav#sidebar #targetChooser button{background-color:var(--lf-target-selector)}nav#sidebar #targetChooser.closed div.current-target{display:inline-block}nav#sidebar #targetChooser.open div.current-target{display:none}nav#sidebar #targetChooser li.highlight a{border-color:var(--sidebar-target-selector-highlight-color);color:var(--sidebar-target-selector-highlight-color)}nav#sidebar #targetChooser ul{background-color:var(--lf-target-selector-button)}nav#sidebar #targetChooser ul li{border-top:1px solid;border-color:var(--lf-target-selector-border-color);border-bottom:none}@media(max-width:800px){button#small-device-button-sidebar{-webkit-appearance:none;background-color:#c4c4c4;border:none;border-radius:6px;bottom:120px;display:flex;left:20px;margin-bottom:env(safe-area-inset-bottom);padding:10px;position:fixed;transition-timing-function:ease;transition:left .3s;z-index:100}}@media(max-width:800px)and (prefers-reduced-motion:reduce){button#small-device-button-sidebar{transition:none}}@media(max-width:800px){button#small-device-button-sidebar.hidden{left:-80px}button#small-device-button-sidebar:active{background-color:#575757}nav#sidebar{-webkit-overflow-scrolling:touch;height:100%;margin-left:-800px;overflow-x:hidden;overflow-y:scroll;position:fixed;transition-timing-function:ease;transition:margin-left .3s;width:90%;z-index:99}nav#sidebar ul{padding-bottom:200px}}@media(max-width:800px)and (prefers-reduced-motion:reduce){nav#sidebar{transition:none}}@media(max-width:800px){nav#sidebar.show{margin-left:0}nav#sidebar>ul>li,nav#sidebar>ul>li>button{font-size:1.3rem}}.community{padding:0}.community.centered{text-align:center}.community.centered h2{margin-top:120px}.community .sidebar{background-color:rgba(204,207,233,.1)}.community .next-steps-container{background-color:#fff}.community .banner-text{margin-top:20px}.community .callouts{display:flex;flex-wrap:wrap;margin:20px 0}.community .callouts .callout{display:flex;line-height:1.4rem;margin-bottom:10px;margin-top:20px;width:48%}@media(max-width:800px){.community .callouts .callout{width:90%}}.community .callouts h3{font-size:1rem;margin:0 0 10px;padding:0}.community .callouts .icon{background-position:50%;background-repeat:no-repeat;background-size:auto 3.2rem;display:block;height:5rem;margin:0 20px 20px;min-width:5rem;transition:background-color .2s ease-out;width:5rem}@media screen and (-ms-high-contrast:active){.community .callouts .icon{-ms-high-contrast-adjust:none}}.community .callouts .icon.high-contrast-only{font-size:1.8rem}.community .callouts .icon.img-circle{border-radius:50%}.community .callouts .icon.publication{background-color:#4d4d4d;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAwIiBoZWlnaHQ9IjEwMDAiIHZpZXdCb3g9IjAgMCAyNjQuNTgzIDI2NC41ODMiPjxnPjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZmZmZiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIuOTk5MDAwMDciIGQ9Ik0xNjY5Ljc2Ni0xOTAuMDcyYy0zLjQ4MyAwLTYuMzA2IDMuNDU4LTYuMzA2IDcuNzI0czIuNTU2IDcuMTkgNi4zMDYgNy43MjRsNDYuOTA3IDEwLjMwNCA0Mi4xNDUtMjMuNzE4IiB0cmFuc2Zvcm09Im1hdHJpeCgyLjQ4MTk4IDAgMCAyLjQ4MTk4IC00MTE0Ljc0MSA2MzkuODYzKSIvPjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZmZmZiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIuOTk5MDAwMDciIGQ9Ik0xNjY5Ljc2Ni0yMDUuNTJjLTMuNDgzIDAtNi4zMDYgMy40NTgtNi4zMDYgNy43MjRzMi41NTYgNy4xOSA2LjMwNiA3LjcyNGw0Ni45MDcgMTAuMzA0IDQyLjE0NS0yMy43MTgiIHRyYW5zZm9ybT0ibWF0cml4KDIuNDgxOTggMCAwIDIuNDgxOTggLTQxMTQuNzQxIDYzOS44NjMpIi8+PHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZmZmZmZmIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMi45OTkwMDAwNyIgZD0iTTE2NjkuNzY2LTIyMC45NjhjLTMuNDgzIDAtNi4zMDYgMy40NTgtNi4zMDYgNy43MjRzMi41NTYgNy4xOSA2LjMwNiA3LjcyNGwyMi44ODEgNS4wMjZtMTMuNjk0IDMuMDA4IDEwLjMzMiAyLjI3IDQyLjE0NS0yMy43MTgiIHRyYW5zZm9ybT0ibWF0cml4KDIuNDgxOTggMCAwIDIuNDgxOTggLTQxMTQuNzQxIDYzOS44NjMpIi8+PHBhdGggZmlsbD0iI2ZmZmZmZiIgc3Ryb2tlPSIjZmZmZmZmIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMTEuMzM0ODAzNTgiIGQ9Im02NDcwLjIxNS05MjQuNzk3LTE2My41OCA4OS42NDIgMTgxLjU4IDM4Ljk0NCAxNTkuMjg1LTg5LjY0M3oiIHRyYW5zZm9ybT0ibWF0cml4KDIuNDgxOTggMCAwIDIuNDgxOTggLTQxMTQuNzQxIDYzOS44NjMpIHNjYWxlKC4yNjQ1OCkiLz48cGF0aCBmaWxsPSIjZjI5ZDE2IiBzdHJva2U9IiMzMzMzMzMiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIxLjExNTM0NzE1IiBkPSJtMTcxNS4xNDQtMjM1LjYwNS0xMC44NjMgNi4xNDggMTcuNDQ1IDMuODMyIDEwLjg2My02LjE0OHoiIHRyYW5zZm9ybT0ibWF0cml4KDIuNDgxOTggMCAwIDIuNDgxOTggLTQxMTQuNzQxIDYzOS44NjMpIi8+PHBhdGggZmlsbD0iI2Y0OWYxNiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTY5Ni4yNjMtMjA4LjQ0OXYxNS42ODZsMy40OTYtMi4xNzMgMy44NzQgNC4yNTJ2LTE2LjUzNnoiIHRyYW5zZm9ybT0ibWF0cml4KDIuNDgxOTggMCAwIDIuNDgxOTggLTQxMTQuNzQxIDYzOS44NjMpIi8+PC9nPjwvc3ZnPg==)}.community .callouts .icon.twitter{background-color:#00a0d1;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NCA2NCI+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTU2IDE3LjRjLTEuOC44LTMuNyAxLjMtNS43IDEuNSAyLTEuMiAzLjYtMy4xIDQuMy01LjMtMS45IDEuMS00IDEuOS02LjMgMi4zLTEuOC0xLjktNC40LTMuMS03LjItMy4xLTUuNCAwLTkuOCA0LjMtOS44IDkuNyAwIC44LjEgMS41LjMgMi4yLTguMi0uNC0xNS40LTQuMy0yMC4zLTEwLjEtLjggMS40LTEuMyAzLjEtMS4zIDQuOSAwIDMuNCAxLjcgNi4zIDQuNCA4LTEuNi0uMS0zLjEtLjUtNC41LTEuMnYuMWMwIDQuNyAzLjQgOC42IDcuOSA5LjUtLjguMi0xLjcuMy0yLjYuMy0uNiAwLTEuMy0uMS0xLjktLjIgMS4zIDMuOCA0LjkgNi42IDkuMiA2LjctMy40IDIuNi03LjYgNC4xLTEyLjIgNC4xLS44IDAtMS42IDAtMi4zLS4xIDQuNCAyLjcgOS41IDQuMyAxNS4xIDQuMyAxOC4xIDAgMjgtMTQuNyAyOC0yNy41di0xLjNjMS45LTEuMiAzLjYtMi45IDQuOS00Ljh6Ii8+PC9zdmc+)}.community .callouts .icon.bug{background-color:#4d4d4d;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzlFQkFERkU4NkJCMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzlFQkFERkQ4NkJCMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MTc4QTJFOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU1MTc4QTJGOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Kk5lQwAABYxJREFUeNrkm29oVXUYx3+7bM3V1FnbqlltrtXWtYRa1nqxooY5E7EhKWGuaTDBagol9SIMDCKICASj+cISw/DPi16ZBakrUBnoC7nNoTMWy6I1c+LmVq6t78N9jpyu555znt855+536IHPi939/jzP95zznN+/kzc1NaUitirwJJgPasF94DZQDG7hMqNgBFwEZ5kU+AH0R+lcXgQCJMBT4EXwLKgM2N7P4FvwJegCk6YKUA5eB23grogu2C/gc7AN/GGKABTsZtAOZqjc2DjYAT5kUfSNBNCkAGwGo1PTZ6PsQ4FuHLp3QD3YDR5QZtgZsAac1ElYokcGbATHDApesS/kUwf7GEkOKAK7wAvKbNsPXgZjYQowG3wNnlDxsONgCbgchgAU/GHwiIqXUT5o8hLBKwfcDA7FMHgrUR/iGLQEoGTyBWhQ8bUGjiFPR4A3QIuKv7VwLKIcQMnue5Dv0fjT/IwtAM3g+RyMBmkU+BXf3qc5Rx3xqDPBE7LjfkaCheCcj1HYKYe6JeBt8GcEo75L3HaJQ7+nfNQ/x7H9p67TFX4L1Pi4EocdfhsGH4BPwVbwqu0xGwI/8vT2N/77Gv+vAJSCO3n6PJ//Vjz72w62cPtORnfAwx7+1nBsW93ugGow7vOKtPkYa9eDl0Clxji9kuvW+yjb5tPncY7xet3MhjoFt2RzgIlU2DQL/O6017W/Be4BawXJqMCgTH+ToOxajvWG1+AmYVBlBglQKrxwmzIFoB9XCzt91CABpL6sti62JcBiXtKS2GMGCSD1pZxjvi7AKmED9PraYJAAG2yvVL+2yi7AImHl90C3QQJ03/B+97ZF1lCYVlN6BBV/BffykNQkoyF4H5grqJOkO6BR2NF2A4O35gifCOs0JjTW9vYaPPPbJ11LJAFqBRVoDf68wQLQI3BBUL424XPiY1lvDOb/ZwRla0iAOYIKv8dAgEFB2VtJgJmCChMxEEAyHigmAQoFFWbFQIDZgrKF0p2hmTEQQOQjCTAmKD8vBgJUCcqOkQBXBBXosEORwcEXKdmBjCskwICgQr5h0+BMW6i8V7LtNkAC9As7WWqwAM8Jy/cnhBMhspVKvq2eC0uwbxLrSWhMa+dpdJQLW6mRpLtpOlyuMcL7CTwErhoSPG2ApjQEuD3BQ0fp0ZJqlT6pZYpt0wieYh60nuWDGp2+At4xIPgt7IvU0jHzBkFdgD27HWDGNGyGFHHfulaXuTN0IkBjZ8EykJeDwKmPFtAXwN8TTltjrVkKfwcawXJW3G3v8DTYCKoiCLwGvAl6QthpbnU6J5jP2f1uh1Wgxbbxwv0qvT/vtZRGA6wuzs50+Pkb8JdgQtPMq1VJld7bnxtSzhjgJD5hzwEW611OZK6xlSvzeYbAsl3Cx4PK7ozodOl6t93hfJByqbzOVnYh+MdHhxfBLI1bnuoMhRx8imPMKgDR5LG/nrSVfddHpx8HeO4/ClmApsw+snXsdk7gYMat+r5Hp0sDCLAkxOA7nfrI1nGxx2tmQUb5x8FuzgvD4Dw4wNm2MIAA1SEF38cx+RaAeBCMZGlwb44GOyUhBD/CsTj24TatpddXq3L+RIVmXnE4QzjJMaSylvBxFdqzKHsVrDD8Dmj36sOvIx0unewHDRENg4MI0BH2FyP0RcZOlzW3Ib7VLvPqDK0z1PEq7bDmLVwCLgnr0AhvnUp/0eJp0k9m6HO4fUp2nGZODgUY5PzUJVlHkxg1TEfnjxqY8I6yb12SSjqLm7T9/Ax4TaW/+JxuIx862KcL4toBk1QFT1omXZLRHQHaL3Npl/r8jH3QjiGsbJ3kGd/fDo6WBWi31KG9a9xXMgzfw35tVfCR9l52dk8Ibe7htnq57YowfY7i4+lYWUL9z+1fAQYACqstE4NCc18AAAAASUVORK5CYII=)}.community .callouts .icon.slack{background-color:#f4f4f4;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii01IC01IDY0IDY0Ij48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGZpbGw9IiMzNkM1RjAiIGQ9Ik0xOS43MTIuMTMzYTUuMzgxIDUuMzgxIDAgMCAwLTUuMzc2IDUuMzg3IDUuMzgxIDUuMzgxIDAgMCAwIDUuMzc2IDUuMzg2aDUuMzc2VjUuNTJBNS4zODEgNS4zODEgMCAwIDAgMTkuNzEyLjEzM20wIDE0LjM2NUg1LjM3NkE1LjM4MSA1LjM4MSAwIDAgMCAwIDE5Ljg4NGE1LjM4MSA1LjM4MSAwIDAgMCA1LjM3NiA1LjM4N2gxNC4zMzZhNS4zODEgNS4zODEgMCAwIDAgNS4zNzYtNS4zODcgNS4zODEgNS4zODEgMCAwIDAtNS4zNzYtNS4zODYiLz48cGF0aCBmaWxsPSIjMkVCNjdEIiBkPSJNNTMuNzYgMTkuODg0YTUuMzgxIDUuMzgxIDAgMCAwLTUuMzc2LTUuMzg2IDUuMzgxIDUuMzgxIDAgMCAwLTUuMzc2IDUuMzg2djUuMzg3aDUuMzc2YTUuMzgxIDUuMzgxIDAgMCAwIDUuMzc2LTUuMzg3bS0xNC4zMzYgMFY1LjUyQTUuMzgxIDUuMzgxIDAgMCAwIDM0LjA0OC4xMzNhNS4zODEgNS4zODEgMCAwIDAtNS4zNzYgNS4zODd2MTQuMzY0YTUuMzgxIDUuMzgxIDAgMCAwIDUuMzc2IDUuMzg3IDUuMzgxIDUuMzgxIDAgMCAwIDUuMzc2LTUuMzg3Ii8+PHBhdGggZmlsbD0iI0VDQjIyRSIgZD0iTTM0LjA0OCA1NGE1LjM4MSA1LjM4MSAwIDAgMCA1LjM3Ni01LjM4NyA1LjM4MSA1LjM4MSAwIDAgMC01LjM3Ni01LjM4NmgtNS4zNzZ2NS4zODZBNS4zODEgNS4zODEgMCAwIDAgMzQuMDQ4IDU0bTAtMTQuMzY1aDE0LjMzNmE1LjM4MSA1LjM4MSAwIDAgMCA1LjM3Ni01LjM4NiA1LjM4MSA1LjM4MSAwIDAgMC01LjM3Ni01LjM4N0gzNC4wNDhhNS4zODEgNS4zODEgMCAwIDAtNS4zNzYgNS4zODcgNS4zODEgNS4zODEgMCAwIDAgNS4zNzYgNS4zODYiLz48cGF0aCBmaWxsPSIjRTAxRTVBIiBkPSJNMCAzNC4yNDlhNS4zODEgNS4zODEgMCAwIDAgNS4zNzYgNS4zODYgNS4zODEgNS4zODEgMCAwIDAgNS4zNzYtNS4zODZ2LTUuMzg3SDUuMzc2QTUuMzgxIDUuMzgxIDAgMCAwIDAgMzQuMjVtMTQuMzM2LS4wMDF2MTQuMzY0QTUuMzgxIDUuMzgxIDAgMCAwIDE5LjcxMiA1NGE1LjM4MSA1LjM4MSAwIDAgMCA1LjM3Ni01LjM4N1YzNC4yNWE1LjM4MSA1LjM4MSAwIDAgMC01LjM3Ni01LjM4NyA1LjM4MSA1LjM4MSAwIDAgMC01LjM3NiA1LjM4NyIvPjwvZz48L3N2Zz4=)}.community .blurb,.community .community-callout-headline{margin-bottom:0;margin-top:0}.community h3.centered-highlight{background-color:rgba(204,207,233,.1);padding:20px;text-align:center}.community .upcoming-event{min-width:330px}.community .upcoming-event img{width:50px}.community .upcoming-event .event-info{position:relative}.community .upcoming-event .meetup-text{max-height:300px;overflow-y:auto;padding-bottom:20px}.community .upcoming-event .meetup-gradient{background:var(--raised-background-color);background:var(--fade-gradient);height:30px;position:absolute;top:290px;width:100%}.community .events>h4{padding-left:20px}.row,.split-row{display:flex;flex-direction:row;flex-wrap:wrap}.split-row{align-items:center;justify-content:center}.split-row .first{margin-left:0}.col1{flex:1 1;min-width:250px;padding:1rem}.col2{flex:2 1}.col1.first{margin-left:20px}.col1.last{margin-right:0}@media(max-width:800px){.container>.row{flex-direction:column}}.version-bar{background-color:#181818;color:#fff;margin:0;padding:.7rem 2rem;text-align:center}.version-bar p{margin:0}.version-bar p a{color:#a8baf3}.grey-box{background-color:#d8d8d8;box-sizing:border-box;margin-right:20px;padding:18px}.grey-box a{color:#000}.clicky-grey-button.first,.grey-box.first{margin-left:20px}.clicky-grey-button.last,.grey-box.last{margin-right:0}.split-row>.clicky-grey-button{flex:1 1}@media(max-width:800px){main #index-2 h2{font-size:1.8rem;padding-left:20px;padding-right:20px}main #index-2 div.headline-diagram{height:400px;max-width:100%;overflow-x:hidden}main #index-2 .split-row>a{margin-left:20px!important;min-width:80%}main #index-2 .grey-box{margin-right:0}main #index-2 .illustration{display:none}main #index-2 ul.dropdown{margin-top:12px}main #index-2 .headline-diagram div.editor.front{margin:20px auto;position:static}main #index-2 .headline-diagram .text{overflow-x:scroll}main #index-2 #m-stories div.copy{margin:20px auto 0;position:static;text-align:center}main #index-2 #m-stories div.copy a.migration-button{margin:0 auto}main #index-2 .small_full_width{width:100%}main #index-2 .github-bar{display:none}main #index-2 .get-started-section{flex-direction:column}main #index-2 .get-started-section a.get-started{background-image:none!important;height:auto!important;margin:0 auto}main #index-2 img{max-width:100%}main #index-2 h3{text-align:center}}@media(max-width:900px){.tag-container .twoslash-annotation.left{bottom:0;left:0;position:static;top:auto!important}.tag-container .twoslash-annotation.left svg{-webkit-transform:rotate(44deg) scaleX(-1) translateX(-20px)!important;transform:rotate(44deg) scaleX(-1) translateX(-20px)!important}.tag-container .twoslash-annotation.right{display:none}}.show-only-small{display:none}@media(max-width:480px){.show-only-small{display:block!important}#index div.headline-diagram div.editor.front{max-width:300px}}#index-2 h1{font-size:2.5rem;font-weight:200;line-height:2.8rem;margin-top:0;padding-right:40px}#index-2 h1 strong{font-weight:600}#index-2 h2{font-size:2.5rem;font-weight:500;line-height:2.5rem;margin-top:0;text-align:center}#index-2 h3{font-size:1.6rem;font-weight:400;line-height:1.6rem;margin-bottom:2.5rem;margin-top:0}#index-2 p{font-size:1.2rem}#index-2 .col1{min-width:230px}@media(max-width:360px){#index-2 .col1{max-width:calc(100% - 2rem)}}#index-2 .blue{background-color:#3c7a9b;color:#fff}#index-2 .purple{background-color:#4e086f;color:#fff}#index-2 .dark-green{background-color:#086e12;color:#fff}#index-2 .white{background-color:#fff;color:#000}#index-2 .white .col1 h3{text-align:center}#index-2 .white .col1>p,#index-2 .white .col2>p{font-size:1.2rem}#index-2 .light-grey{background-color:#fdfcfb;color:#000}#index-2 .grey{background-color:#d8d8d8;padding-bottom:0}#index-2 .grey div.container{padding:1rem}#index-2 .headline{min-height:420px}#index-2 .headline .col1{padding-bottom:3rem}#index-2 .headline p{padding-right:20px}#index-2 .headline .container{font-size:1rem;padding-bottom:0}#index-2 .container{max-width:1080px;padding-bottom:40px;padding-top:64px}#index-2 .container,#index-2 .container .half{display:flex;flex-direction:column;margin:0 auto;position:relative}#index-2 .container .half{max-width:780px}@media(max-width:360px){#index-2 .container .half{max-width:100%}}#index-2 .headline-diagram{display:relative}@media screen and (-ms-high-contrast:active){#index-2 .headline-diagram{border:2px solid #fff}}#index-2 .headline-diagram pre .code-container{overflow:hidden}#index-2 .headline-diagram pre .code-container a{display:none}#index-2 .headline-diagram .editor{border:2px solid #7fa2c9;border-radius:4px;width:540px}#index-2 .headline-diagram .editor ul.editor-tabs{display:flex;flex-direction:row;font-size:14px;margin:0;padding:0}#index-2 .headline-diagram .editor ul.editor-tabs li{list-style:none;padding:10px}#index-2 .headline-diagram .editor ul.editor-tabs li a{color:#fff;text-decoration:none}#index-2 .headline-diagram .editor ul.editor-tabs li.selected{text-decoration:underline}#index-2 .headline-diagram .editor .min-dark{display:none}#index-2 .headline-diagram .editor.front{border-radius:8px;width:96%}@media screen and (-ms-high-contrast:active){#index-2 .headline-diagram .editor.front{border:none}}#index-2 .headline-diagram .editor .error{border-left:0!important}#index-2 .headline-diagram .editor .editor-inner{position:relative}#index-2 .headline-diagram .editor .titlebar{border-bottom:2px solid #172e38;display:flex;flex-direction:row;height:2rem}#index-2 .headline-diagram .editor .titlebar .lang{display:none;margin-left:6px;margin-top:3px}#index-2 .headline-diagram .editor .titlebar .window-name{display:none;margin-left:10px;padding-top:5px}#index-2 .headline-diagram .editor .line-error{background-color:#c63131;height:20px;left:0;position:absolute;width:22px}#index-2 .headline-diagram .editor .underline-error{background:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='6' height='3' viewBox='0 0 6 3'%3E%3Cg fill='%23c94824'%3E%3Cpolygon points='5.5 0 2.5 3 1.1 3 4.1 0'/%3E%3Cpolygon points='4 0 6 2 6 .6 5.4 0'/%3E%3Cpolygon points='0 2 1 3 2.4 3 0 .6'/%3E%3C/g%3E%3C/svg%3E") repeat-x 0 100%;padding-bottom:3px}#index-2 .headline-diagram .editor .error-message{color:#444d80;font-family:var(--code-font);font-size:.8rem}#index-2 .headline-diagram .editor .error-behind{opacity:0}#index-2 .headline-diagram .editor .inline-completions{position:relative}#index-2 .headline-diagram .editor .inline-completions ul.dropdown{background-color:#fff;border-left:4px solid #4b9edd;color:gray;display:inline-block;font-family:var(--code-font);font-size:.8rem;margin:0;padding:0;position:absolute;width:240px}#index-2 .headline-diagram .editor .inline-completions ul.dropdown:before{background-color:#fff;content:" ";left:-3px;position:absolute;top:-16px;width:2px}#index-2 .headline-diagram .editor .inline-completions ul.dropdown li{border-bottom:1px solid #000;height:1rem;overflow-x:hidden;padding-left:4px}#index-2 .headline-diagram .editor .inline-completions ul.dropdown li span.result-found{color:#4b9edd}#index-2 .headline-diagram .editor .inline-completions ul.dropdown li span.result{color:#000;display:inline-block;width:100px}#index-2 .headline-diagram .editor .did-you-mean,#index-2 .headline-diagram .editor .did-you-mean-icon{position:absolute}#index-2 .headline-diagram .editor .content{display:flex;flex-direction:row}#index-2 .headline-diagram .editor .content svg{margin:12px auto}#index-2 .headline-diagram .editor .content svg path{fill:#fff}#index-2 .headline-diagram .editor .content .text{background-color:#235a97;border-top:1px solid #7fa2c9;flex-grow:1;flex-shrink:1;font-family:var(--code-font);font-size:.8rem;height:260px;line-height:.95rem;overflow-x:auto;position:relative}#index-2 .headline-diagram .editor .content .text pre{background-color:#235a97;border:none;margin:0}#index-2 .headline-diagram .editor .content .text pre code{font-size:14px;line-height:16px}#index-2 .headline-diagram .editor .content .text pre .error{background-color:rgba(255,0,0,.149);color:#ffc5c5}#index-2 .headline-diagram .editor .content .text .language-id{display:none}#index-2 .headline-diagram .editor .highlight{color:#9ed5ff}#index-2 .headline-diagram .back .content .text>div{padding-right:200px}#index-2 .next-headline-button{align-items:center;background-color:#fff;bottom:20px;color:#000;cursor:pointer;display:flex;flex-direction:row;height:30px;justify-content:center;margin-bottom:20px;padding:3px;position:absolute;right:15px;text-decoration:none;width:30px}@media screen and (-ms-high-contrast:active){#index-2 .next-headline-button{border:2px solid gray}}#index-2 .next-headline-button.focus,#index-2 .next-headline-button:hover{background-color:#eee}#index-2 .next-headline-button:active{background-color:#ddd}#index-2 .next-headline-button .fluid-button-title{font-weight:600}#index-2 .next-headline-button svg path{fill:#000}@media screen and (-ms-high-contrast:active){#index-2 .next-headline-button svg path{fill:#ff0}}#index-2 a.get-started{align-items:flex-end;background-color:#fff;box-shadow:0 4px 20px -6px rgba(0,0,0,.25);box-sizing:border-box;color:#000;cursor:pointer;display:flex;margin:0 auto;max-width:244px;padding:1rem;text-decoration:none;width:100%}@media screen and (-ms-high-contrast:active){#index-2 a.get-started{border:2px solid gray}}#index-2 a.get-started.focus,#index-2 a.get-started:hover{background-color:#eee}#index-2 a.get-started:active{background-color:#ddd}#index-2 a.get-started .fluid-button-title{font-weight:600}#index-2 a.get-started.short{background:#3c7a9b;background-position-y:bottom -180px;border:1px solid #fff;color:#fff;height:260px}#index-2 a.get-started.short.handbook{background-image:url(/images/index/get-started-handbook-blue.svg)}#index-2 a.get-started.short.download{background-image:url(/images/index/get-started-download-blue.svg);background-position:100% 100%;background-repeat:no-repeat}#index-2 a.get-started.short svg path{stroke:#fff}#index-2 a.get-started.short:active{background-color:#156fb4}#index-2 a.get-started.short:hover{border-width:2px;box-shadow:0 4px 20px -2px rgba(0,0,0,.25);max-width:246px}#index-2 a.get-started.tall{background:#fff;border:1px solid #000;color:#000;height:342px;margin-bottom:2px}#index-2 a.get-started.tall:hover{border-color:#3c7a9b;border-width:2px;box-shadow:0 4px 20px -2px rgba(0,0,0,.25);height:344px;margin-bottom:0;max-width:246px}#index-2 a.get-started.tall:active{background-color:#eee}#index-2 a.get-started .fluid-button-title{font-size:1.4rem}#index-2 a.get-started svg{margin-bottom:10px;margin-left:20px}#index-2 a.get-started:active{box-shadow:0 4px 10px 0 rgba(0,0,0,.25);margin-top:1px}#index-2 a.get-started.handbook{background-image:url(/images/index/get-started-handbook.svg);background-position:0 100%;background-repeat:no-repeat}#index-2 a.get-started.download{background-image:url(/images/index/get-started-download.svg);background-position:100% 100%;background-repeat:no-repeat}#index-2 .call-to-action{display:flex;justify-content:center}#index-2 .call-to-action a.flat-button{background-color:#fff;color:#000;cursor:pointer;display:block;font-size:1.2rem;height:1.4rem;line-height:1.4rem;padding:1rem;text-align:center;text-decoration:none}@media screen and (-ms-high-contrast:active){#index-2 .call-to-action a.flat-button{border:2px solid gray}}#index-2 .call-to-action a.flat-button.focus,#index-2 .call-to-action a.flat-button:hover{background-color:#eee}#index-2 .call-to-action a.flat-button:active{background-color:#ddd}#index-2 .call-to-action a.flat-button .fluid-button-title{font-weight:600}#index-2 .call-to-action a.flat-button:first-child{margin-right:2rem}#index-2 .call-to-action .handbook-preview{background-color:#1a1a1a;padding:4rem}#index-2 .call-to-action .inline-buttons{background-color:#1a1a1a;display:flex;justify-content:center}#index-2 .call-to-action .inline-buttons a{background-color:#1a1a1a;border-left:4px solid #00273f;color:#fff;flex:1 1;margin:0!important}#index-2 .call-to-action .inline-buttons a:first-child{border-left:none}#index-2 .call-to-action .inline-buttons a:active,#index-2 .call-to-action .inline-buttons a:hover{color:#000}#index-2 .cta-redirects{overflow-y:hidden}#index-2 .cta-redirects>div{margin-bottom:-18%;position:relative}#index-2 .cta-redirects>div a{bottom:55%;position:absolute}#index-2 .release-info{display:flex;flex-direction:row;position:relative;width:100%}#index-2 .release-info .needle,#index-2 .release-info .needle-head{background-color:#000;height:68px;margin-top:-8px;position:absolute;width:2px}#index-2 .release-info .needle-head{background-color:transparent;border-left:4px solid transparent;border-right:4px solid transparent;border-top:6px solid #000;height:0;margin-left:-4px;margin-top:-14px}#index-2 .release-info>div>div{display:flex;flex-direction:row}#index-2 .bar{height:50px;margin-left:-1px;width:100%}#index-2 .separator{background-color:#000;height:12px;margin-top:50px;width:1px}@media screen and (-ms-high-contrast:active){#index-2 .needle-head{opacity:0}#index-2 .release-info .needle{border:1px solid #000;height:80px}#index-2 .beta>div,#index-2 .rc>div,#index-2 .release>div,#index-2 form.search:focus{border:1px solid #000}}#index-2 .release{width:55%}#index-2 .release .bar{background-color:#c4c4c4}#index-2 .beta{width:28%}#index-2 .beta .bar{background-color:#3c7a9b}#index-2 .rc{width:17%}#index-2 .rc .bar{background-color:#3c7a9b}#index-2 .migrations{overflow:hidden}#index-2 .migrations.github #migration_title{color:#fff}#index-2 .migrations strong{color:#187abf}#index-2 .migrations .container{padding-bottom:0}#index-2 #m-stories{min-height:370px;position:relative}#index-2 #m-stories .controls a{align-items:center;background-color:#c4c4c4;color:#000;display:flex;height:2rem;justify-content:center;line-height:2.5rem;position:absolute;text-align:center;top:70%;width:2rem;z-index:2}#index-2 #m-stories .controls a:hover{background-color:#eee}#index-2 #m-stories .controls a:active{background-color:#ddd;top:calc(70% + 1px)}#index-2 #m-stories .controls a.left{left:0}#index-2 #m-stories .controls a.right{right:0}#index-2 #m-stories .copy{background:#fdfcfb;background:linear-gradient(90deg,#fdfcfb 48%,hsla(30,33%,99%,.125))}#index-2 #m-stories .copy p{font-size:1rem}#index-2 #m-stories .airbnb .fg,#index-2 #m-stories .goog .illustration .fg{padding-top:40px}#index-2 #m-stories .copy{padding-left:20px;padding-right:30px;position:absolute;transition:opacity .2s ease-out;width:260px}#index-2 #m-stories .copy p{padding:1rem 0}#index-2 #m-stories .copy a.migration-button{border:1px solid #000;color:#000;display:block;padding:8px 0;text-align:center;text-decoration:none;width:60%}#index-2 #m-stories .copy a.migration-button:focus,#index-2 #m-stories .copy a.migration-button:hover{background-color:#fff;color:#000}#index-2 #m-stories .illustration .bg{position:absolute;right:20px}#index-2 #m-stories .illustration .fg{font-size:1.4rem;line-height:1.6rem;position:absolute;right:70px;width:370px}#index-2 .oss{width:100%}#index-2 .oss .icons{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-around;margin:0 auto;max-width:800px}@media screen and (-ms-high-contrast:black-on-white){#index-2 .oss .icons svg path{fill:#000}}@media screen and (-ms-high-contrast:white-on-black){#index-2 .oss .icons svg path{fill:#fff}}#index-2 .oss .icons svg{margin:0 auto}#index-2 .oss .icons a{color:#fff;display:flex;flex:1 1;flex-direction:column;height:145px;justify-content:space-between;margin:20px;max-width:140px;text-align:center;width:140px}#index-2 .oss .icons a p{padding-bottom:0}#index-2 .github-bar{opacity:0;position:absolute;transition:opacity .3s ease-out}#index-2 .github-bar.left{left:-200px}#index-2 .github-bar.right{right:-200px}#index-2 ul#videos{margin:0;padding:0}#index-2 ul#videos li{border-left:2px solid transparent;list-style:none;margin:0;padding:0}#index-2 ul#videos li.active{border-color:#000}#index-2 ul#videos li a{color:#000;display:block;font-size:1rem;margin-left:6px;text-decoration:none}#index-2 ul#videos li span{font-size:.8rem;font-style:italic}#index-2 .installation-panel .flat-button{background-color:#fff;color:#000;cursor:pointer;display:block;margin-top:20px;padding:1rem;text-decoration:none}@media screen and (-ms-high-contrast:active){#index-2 .installation-panel .flat-button{border:2px solid gray}}#index-2 .installation-panel .flat-button.focus,#index-2 .installation-panel .flat-button:hover{background-color:#eee}#index-2 .installation-panel .flat-button:active{background-color:#ddd}#index-2 .installation-panel .flat-button .fluid-button-title{font-weight:600}#index-2 .installation-panel .flat-button button{background-color:transparent;border:none;float:right}#index-2 .installation-panel .flat-button svg{float:right;height:.9em;margin-top:3px;opacity:.5;transition:opacity .2s linear;width:.9em}#index-2 .installation-panel .flat-button:hover svg{opacity:1}#index-2 .installation-panel .tooltip{background-color:#3f3f3f;border-radius:2px;color:#fff;display:none;font-family:var(--code-font);font-size:14px;padding:5px 8px;pointer-events:none;text-align:center;white-space:pre-wrap;z-index:100}#index-2 #adopt-gradually-content.fancy-scroll{height:1400px}#index-2 #adopt-gradually-content.fancy-scroll #adopt-step-slider{height:580px;position:-webkit-sticky;position:sticky;top:80px}#index-2 #adopt-gradually-content.fancy-scroll #adopt-step-blurb,#index-2 #adopt-gradually-content.fancy-scroll #global-stepper{bottom:64px;left:0;margin:0 auto;max-width:480px;position:absolute;right:0}#index-2 #adopt-gradually-content.fancy-scroll #global-stepper{bottom:32px;display:flex}#index-2 #adopt-gradually-content.fancy-scroll #global-stepper>div{opacity:.2;transition:opacity .2s}#index-2 #adopt-gradually-content.fancy-scroll #global-stepper>div.active{opacity:1}#index-2 #adopt-gradually-content.fancy-scroll .adopt-step{left:0;margin-left:auto;margin-right:auto;padding-top:200px;position:absolute;right:0;top:0;transition:opacity .2s}#index-2 #adopt-gradually-content.fancy-scroll .adopt-step .adopt-step-stepper,#index-2 #adopt-gradually-content.fancy-scroll .adopt-step>div>p,#index-2 #global-stepper{display:none}#index-2 .adopt-step{margin:20px auto;max-width:480px;padding-top:120px}#index-2 .adopt-step pre{margin-bottom:10px}#index-2 .adopt-step>p{font-size:1rem;font-weight:700;margin:10px 0}#index-2 .adopt-step .tag-container p{font-size:1rem}#index-2 .adopt-step-stepper{display:flex;margin-bottom:80px}#index-2 .adopt-step-stepper div{border:1px solid #000;display:inline-block;flex:1 1;height:13px;margin-left:10px;position:relative}#index-2 .adopt-step-stepper div.yellow,#index-2 .adopt-step-stepper div.yellow-hint-blue,#index-2 .adopt-step-stepper div.yellow-lot-blue{background-color:#ffe200}#index-2 .adopt-step-stepper div.yellow-hint-blue:after,#index-2 .adopt-step-stepper div.yellow-lot-blue:after{background-color:#3c7a9b;content:"";height:13px;left:0;position:absolute;width:20%}#index-2 .adopt-step-stepper div.yellow-lot-blue:after{width:60%}#index-2 .adopt-step-stepper div.first{margin-left:0}#index-2 .via-delete .highlight{background-color:#fffdfd}#index-2 .via-delete .dim{opacity:1}.yellow{background-color:#f1dd3f;color:#000;margin-bottom:-110px}.yellow .col1{align-self:stretch;width:50%}.yellow .col1 pre{height:220px;overflow:hidden}.yellow .col1 pre code{font-size:14px;line-height:16px}.yellow a{color:#000}.darkblue.dt{position:relative}.darkblue.dt .dark-blue-trans-bg{background-color:rgba(0,39,62,.77)}.darkblue.dt .dark-blue-trans-bg a{color:#fff}.darkblue.dt .dt-background{bottom:20px;font-family:var(--code-font);font-size:1.2rem;left:20px;opacity:.2;overflow:hidden;position:absolute;top:20px;width:80%}.flex-column{flex-direction:column}.fluid-button{background-color:#fff;color:#000;display:flex;padding:.5rem 1rem;text-decoration:none}.fluid-button .fluid-button-title{font-weight:600}.fluid-button div.fluid-button-icon{align-items:center;border-left:2px solid #000;display:flex;justify-content:center;margin-left:1rem;margin-right:-1rem;min-width:4rem;text-align:center}.fluid-button.focus,.fluid-button:hover{background-color:#eee}.fluid-button:active{background-color:#ddd}.cta .cta-back a{left:20px;position:relative;top:20px;width:60px}.transparent-button{border:1px solid #fff;color:#fff;cursor:pointer;left:20px;padding:10px;position:absolute;text-decoration:none;top:40px;width:80px}.transparent-button svg{margin-right:8px}.transparent-button.focus,.transparent-button:hover{background-color:hsla(0,0%,100%,.063)}.transparent-button:active{background-color:hsla(0,0%,100%,.125);border:1px solid hsla(0,0%,100%,.376)}.flow-links{display:flex;flex-wrap:wrap}.clicky-grey-button{background-color:#d8d8d8;color:#000;display:flex;flex-direction:column-reverse;height:10rem;margin-bottom:20px;margin-right:20px;padding:18px;position:relative;text-decoration:none;width:16rem}.clicky-grey-button.white-theme{background-color:#fff;border:1px solid #000}.clicky-grey-button.white-theme:hover{background-color:#f1f1f1}.clicky-grey-button.white-theme:active{background-color:#f2f2f2;margin-bottom:19px}@media screen and (-ms-high-contrast:active){.clicky-grey-button{border:1px solid gray}}.clicky-grey-button.headline{height:200px;width:300px}.clicky-grey-button.links{height:26rem}.clicky-grey-button.focus,.clicky-grey-button:hover{background-color:#ccc}.clicky-grey-button:active{background-color:#ddd}.clicky-grey-button p{color:red}.clicky-grey-button div{color:#000;font-size:1.6rem;font-weight:400;line-height:1.6rem;margin-bottom:.2rem;text-decoration:none}.clicky-grey-button div:hover{text-decoration:none}.clicky-grey-button p{margin-bottom:0;margin-top:0}.clicky-grey-button a{text-decoration:none}.clicky-grey-button .badge{background-color:#666;position:absolute;right:10px;top:10px}.columns{display:flex;flex-direction:row;flex-wrap:wrap;margin:0 -2.6rem}.columns.wide{justify-content:space-between}.columns.wide .item{min-width:240px}.columns .item{flex:1 1;margin:.6rem;padding:1rem}.columns .item h4{margin-top:0}.columns .item ul{padding:0}.columns .item ul ul{margin-left:.5rem}.columns .item li{list-style:none;margin-left:0}@media(max-width:800px){.columns{flex-direction:column;margin:0}}div#like-dislike-subnav div{font-size:14px;padding-left:4px;padding-top:16px}div#like-dislike-subnav div button{align-items:center;background:none;border:none;color:var(--text-color);display:inline-flex;flex-direction:row}div#like-dislike-subnav div button svg{fill:var(--text-color);color:var(--text-color);margin-right:4px}.warning{color:red!important}pre.source-lf{background-color:var(--inline-code-background-color);font-size:.8rem;overflow-x:auto;padding:10px}pre.source-lf [class*=keyword]{color:#4b69c6;font-weight:700}pre.source-lf [class*=keyword-control],pre.source-lf [class*=storage-modifier]{color:#4b69c6}pre.source-lf [class*=constant-character-escape],pre.source-lf [class*=keyword-operator],pre.source-lf [class*=punctuation]{color:#777}pre.source-lf [class*=comment]{color:#aaa}pre.source-lf [class*=constant],pre.source-lf [class*=variable-language]{color:#307041}pre.source-lf [class*=entity-name-function],pre.source-lf [class*=function-builtin],pre.source-lf [class*=function-call-generic]{color:#57a5c9;font-weight:700}pre.source-lf [class*=entity-name-scope-resolution],pre.source-lf [class*=entity-name-type],pre.source-lf [class*=storage-type]{color:#308c48;font-weight:700}pre.source-lf [class*=keyword-operator-new]{color:#777}pre.source-lf [class*=string]{color:#69b64b}pre.source-lf [class*=variable]{color:#0034df}pre.source-lf [class*=keyword-control-import-lflang],pre.source-lf [class*=keyword-control-lflang],pre.source-lf [class*=keyword-operator-new-lflang],pre.source-lf [class*=storage-modifier-lflang]{color:var(--lf-keyword);font-weight:700}.dark-theme pre.source-lf [class*=keyword]{color:#6f87ff;font-weight:700}.dark-theme pre.source-lf [class*=constant-language],.dark-theme pre.source-lf [class*=storage-modifier]{color:#6f87ff}.dark-theme pre.source-lf [class*=constant-character-escape],.dark-theme pre.source-lf [class*=keyword-operator],.dark-theme pre.source-lf [class*=punctuation]{color:#d4d4d4}.dark-theme pre.source-lf [class*=comment]{color:#6a9955}.dark-theme pre.source-lf [class*=constant-numeric],.dark-theme pre.source-lf [class*=variable-language]{color:#b5cea8}.dark-theme pre.source-lf [class*=entity-name-function],.dark-theme pre.source-lf [class*=function-builtin],.dark-theme pre.source-lf [class*=function-call-generic]{color:#d1d169;font-weight:400}.dark-theme pre.source-lf [class*=entity-name-scope-resolution],.dark-theme pre.source-lf [class*=entity-name-type],.dark-theme pre.source-lf [class*=storage-type]{color:#4ec9b0;font-weight:400}.dark-theme pre.source-lf [class*=keyword-operator-new]{color:#569cd6}.dark-theme pre.source-lf [class*=string]{color:#69b64b}.dark-theme pre.source-lf [class*=variable]{color:#9cdcfe}.dark-theme pre.source-lf [class*=keyword-control-import-lflang],.dark-theme pre.source-lf [class*=keyword-control-lflang],.dark-theme pre.source-lf [class*=keyword-operator-new-lflang],.dark-theme pre.source-lf [class*=storage-modifier-lflang]{color:var(--lf-keyword);font-weight:700}#beta{background:repeating-linear-gradient(45deg,#9b9a4e,#9b9a4e 10px,#6e6a33 0,#6e6a33 20px);background-color:"#c63131";color:#fff;padding:4px 4px 6px;text-align:center;text-shadow:0 2px 4px #000}#doc-layout{display:flex;flex-direction:row}#handbook-content{margin:auto;max-width:1200px;min-width:0;padding:0 2rem}@media(max-width:480px){#handbook-content{padding:0}}#handbook-content>h2{color:#0d5ca8;font-size:3.5rem;font-weight:400;letter-spacing:0;line-height:3.5rem}@media(max-width:800px){#handbook-content>h2{font-size:2.5rem;margin-left:1rem;margin-right:1rem}}#handbook-content article{display:flex;width:100%}#handbook-content .whitespace,#handbook-content .whitespace-tight{margin:0 auto 1rem;overflow:hidden;padding:2rem}#handbook-content .whitespace-tight{padding:1.2rem 2rem}#handbook-content aside{display:none;flex-shrink:0;margin-left:20px;width:13rem}@media(min-width:1000px){#handbook-content aside{display:block}}#handbook-content aside nav{margin-bottom:1rem;position:-webkit-sticky;position:sticky;top:30px}#handbook-content aside nav.deprecated{top:7rem}#handbook-content aside h5{font-size:16px;font-weight:600;margin:0}#handbook-content aside ul{padding:0}#handbook-content aside ul li{list-style:none}#handbook-content aside ul a{border-left:2px solid transparent;color:var(--alt-text-color);display:block;font-size:14px;font-weight:400;overflow:hidden;padding-left:8px;text-decoration:none;text-overflow:ellipsis;white-space:nowrap}#handbook-content aside ul a:active,#handbook-content aside ul a:hover{border-left:2px solid rgba(0,120,212,.3)}#handbook-content aside ul a.current{border-left:2px solid #0078d4}#handbook-content aside .like-dislike-subnav #dislike-button,#handbook-content aside .like-dislike-subnav #like-button{cursor:pointer}#handbook-content .preamble a{color:var(--text-color)}#handbook-content .justify-between{justify-content:space-between}#handbook-content a.navigation-link{flex:1 1;text-decoration:none}#handbook-content .prev-next{flex:1 1}#handbook-content .prev-next .arrow{align-items:center;display:flex;flex-direction:row;justify-content:center;margin-right:20px}#handbook-content .prev-next h3,#handbook-content .prev-next header,#handbook-content .prev-next p{margin:0;padding:0}#handbook-content .prev-next header{font-size:.8rem;margin-bottom:.5rem}#handbook-content .prev-next p{margin-bottom:.4rem}#handbook-content .prev-next header,#handbook-content .prev-next p{color:var(--text-color)}#handbook-content .prev-next:hover h3,#handbook-content .prev-next:hover svg path{fill:var(--text-color);color:var(--text-color)}#handbook-content .prev-next .nav-content{flex:1 1;padding-right:1rem}#handbook-content .prev-next.next{flex-direction:row-reverse;padding-left:1rem;padding-right:0;text-align:right}#handbook-content .prev-next.next .arrow{margin-left:20px;margin-right:0}#handbook-content .prev-next.next svg{-webkit-transform:scaleX(-1);transform:scaleX(-1)}#handbook-content .vertical-line{background-color:#e3e3e3;flex-basis:2px;flex-grow:0;flex-shrink:0;height:80px;min-width:2px}#handbook-content .docs-footer{border-top:1px solid var(--border-color);display:flex;flex-direction:row-reverse;height:2rem;margin:0 -2rem;padding:0}#handbook-content .docs-footer h5{font-weight:400;margin:0;padding:.5rem 1rem 0 0}#handbook-content .docs-footer button{align-items:center;background:none;border:none;border-left:1px solid var(--border-color);color:var(--text-color);cursor:pointer;display:inline-flex;flex-direction:row;padding:0 1rem}#handbook-content .docs-footer button:hover{background-color:var(--border-color)}#handbook-content .docs-footer button svg{fill:var(--text-color);color:var(--text-color);margin-right:4px}#handbook-content #deprecated-header{align-items:center;background-color:#fff4cf;color:#000;display:flex;justify-content:space-between;margin:0 -2rem;padding:1rem 2rem 1rem 0;position:-webkit-sticky;position:sticky;top:0;z-index:1}#handbook-content #deprecated-header [id]:before{height:110px;margin-top:-110px}@media(max-width:800px){#handbook-content #deprecated-header{flex-direction:column;margin:0;padding:1rem}#handbook-content #deprecated-header h3{font-size:.8rem}#handbook-content #deprecated-header #deprecated-icon{margin-right:1rem}#handbook-content #deprecated-header #deprecated-action{margin-top:1rem}}#handbook-content #deprecated-header #deprecated-content{align-items:center;display:flex}#handbook-content #deprecated-header #deprecated-content #deprecated-icon{text-align:center;width:2rem}#handbook-content #deprecated-header h3{font-size:1.5rem;font-weight:400;margin-bottom:.5rem;margin-top:0}#handbook-content #deprecated-header p{margin-bottom:.2rem;margin-top:0}#handbook-content #deprecated-header #deprecated-action{flex-shrink:0}#handbook-content #deprecated-header #deprecated-action a{background-color:#fff;border:1px solid #000;color:#000;padding:.2rem .5rem;text-decoration:none}#handbook-content #deprecated-header #deprecated-action a:hover{background-color:#eee}#handbook-content .markdown table.cli-option{display:table}#handbook-content .markdown table.cli-option tr{width:100%}#handbook-content .markdown table.cli-option tr p{margin:0;padding:0}#handbook-content .markdown table.cli-option tr code{word-wrap:normal}#handbook-content .markdown table.cli-option tr.odd{background-color:var(--background-color)!important}#handbook-content .markdown table.cli-option tr.even{background-color:var(--background-minor-highlight-color)!important}#handbook-content .markdown table.cli-option ul{margin:0;padding:0}#handbook-content .markdown table.cli-option ul li{list-style:none;margin:0 0 8px}#handbook-content .markdown table.cli-option tr.option-description td{border-top:none;margin-top:0}.circle-bg{background-color:#a8baf3;color:#000;display:inline-block;line-height:31px;margin-right:3px;margin-top:12px;position:relative;text-align:center}.circle-bg,.circle-bg img{border-radius:16px;height:32px;width:32px}.circle-bg img{left:0;position:absolute;top:0}.bottom-section-content{flex:1 1;padding:1rem 2rem}@media(max-width:480px){.small-columns{flex-direction:column!important}}.inline-popup{background:var(--background-color);border-radius:2px;box-shadow:0 30px 90px -20px rgba(0,0,0,.3),0 0 1px 1px rgba(0,0,0,.05);font-size:14px;line-height:20px;max-width:400px;min-width:300px;padding:0;position:absolute;transition:opacity .5s;z-index:110}.inline-popup .inline-popup-container{display:flex}.inline-popup .inline-popup-container a.inline-popup-extract{color:var(--text-color);display:block;margin:16px;max-height:140px;overflow:hidden;position:relative;text-decoration:none}.inline-popup .inline-popup-container a.inline-popup-extract h5{margin-top:0}.inline-popup .inline-popup-container a.inline-popup-extract:after{background-color:transparent;bottom:0;content:" ";height:20px;pointer-events:none;position:absolute;width:25%}.inline-popup .inline-popup-container a.inline-popup-extract div{margin:0}.inline-popup .inline-popup-container a.inline-popup-extract div code{background-color:var(--inline-code-background-color);border-radius:2px;padding:2px 4px}.inline-popup.popup-fade-in{-webkit-animation:.1s ease forwards;animation:.1s ease forwards}.markdown{scroll-behavior:smooth}.markdown h1,.markdown h2,.markdown h3{display:flex;flex-wrap:wrap;font-weight:400;line-height:1.3}.markdown h1 a,.markdown h2 a,.markdown h3 a{padding-right:10px!important}.markdown h1[id]:before,.markdown h2[id]:before,.markdown h3[id]:before{content:"";display:block;height:30px;margin-top:-30px;visibility:hidden}.markdown h1{word-wrap:break-word;font-size:2rem;margin-bottom:12px;margin-top:0;word-break:break-word}.markdown h2{font-size:1.75rem;margin-bottom:12px;margin-top:32px}.markdown h3{font-size:1.1875rem;margin-bottom:18px;margin-top:30px}.markdown pre{clear:both;top:10px}.markdown blockquote{background-color:var(--inline-code-background-color);border-left:2px solid var(--border-color);font-size:.8rem;margin:auto;padding:.1rem 2rem}.markdown blockquote.bg-reading{border-left:none;float:right;margin-left:.5rem}.markdown .language-id{display:none}.markdown table{border-collapse:separate;border-spacing:0;display:block;font-size:.875rem;max-width:100%;overflow-x:auto;table-layout:auto;width:100%}.markdown table.data{display:table}.markdown table.data td,.markdown table.data th,.markdown table.data tr{text-align:center}.markdown table td,.markdown table th{word-wrap:break-word;border:0;border-top:1px solid var(--border-color);display:table-cell;line-height:1.5;padding:.75rem 1rem;text-align:left;vertical-align:top}.markdown table tr:nth-child(2n){background-color:var(--background-minor-highlight-color)}.markdown table th{border-top:none}.markdown img{max-width:100%}.markdown table.full-width-table{display:table;width:100%}.markdown .blue-tick{color:#3c7a9b;font-size:1.2rem;font-weight:700}.markdown .black-tick{color:#086f56;font-size:1.2rem}.markdown .red-cross{color:#c63131;font-size:1.2rem}</style><link rel="icon" href="/favicon-32x32.png?v=a2d50f90d730ea30d1bede3f5485f343" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=a2d50f90d730ea30d1bede3f5485f343"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=a2d50f90d730ea30d1bede3f5485f343"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=a2d50f90d730ea30d1bede3f5485f343"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=a2d50f90d730ea30d1bede3f5485f343"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=a2d50f90d730ea30d1bede3f5485f343"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=a2d50f90d730ea30d1bede3f5485f343"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=a2d50f90d730ea30d1bede3f5485f343"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=a2d50f90d730ea30d1bede3f5485f343"/><link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml"/><title data-react-helmet="true">Documentation - Target Language Details</title><link data-react-helmet="true" rel="preload" href="/css/docsearch.css" as="style"/><script data-react-helmet="true" src="https://polyfill.io/v3/polyfill.min.js?features=es2015%2CArray.prototype.forEach%2CNodeList.prototype.forEach"></script><style data-react-helmet="true">
pre data-err {
  background:url("data:image/svg+xml,%3Csvg%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20viewBox%3D'0%200%206%203'%20enable-background%3D'new%200%200%206%203'%20height%3D'3'%20width%3D'6'%3E%3Cg%20fill%3D'%23c94824'%3E%3Cpolygon%20points%3D'5.5%2C0%202.5%2C3%201.1%2C3%204.1%2C0'%2F%3E%3Cpolygon%20points%3D'4%2C0%206%2C2%206%2C0.6%205.4%2C0'%2F%3E%3Cpolygon%20points%3D'0%2C2%201%2C3%202.4%2C3%200%2C0.6'%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E") repeat-x 0 100%;
  padding-bottom: 3px;
}</style><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link as="script" rel="preload" href="/webpack-runtime-b5d055b92630e3142f5e.js"/><link as="script" rel="preload" href="/framework-6ec73ca9ca25442ccb50.js"/><link as="script" rel="preload" href="/app-f5d3f54d76c0c1bb396a.js"/><link as="script" rel="preload" href="/commons-94cb126f169d90c7d2a1.js"/><link as="script" rel="preload" href="/component---src-templates-documentation-tsx-cd3a671e1b036a15b1a5.js"/><link as="fetch" rel="preload" href="/page-data/docs/handbook/target-language-details/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><script>
(function() {

  let hasLocalStorage = false
  try {
    hasLocalStorage = typeof localStorage !== "undefined"
  } catch (error) {}

  const systemIsDark = typeof window !== 'undefined' && window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
  const hasSetColorTheme = hasLocalStorage && localStorage.getItem("force-color-theme")
  const customThemeOverride = hasLocalStorage && localStorage.getItem("force-color-theme")

  if (!hasSetColorTheme && systemIsDark) {
    document.documentElement.classList.add("dark-theme")
  } else if (customThemeOverride) {
    document.documentElement.classList.add(customThemeOverride.replace("force-", "") + "-theme")
  }

  const customFontOverride = hasLocalStorage && localStorage.getItem("force-font") || "cascadia"
  document.documentElement.classList.add('font-' + customFontOverride)
})()
  </script><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="ms-Fabric"><header dir="ltr"><a class="skip-to-main" href="#site-content" tabindex="0">Skip to main content</a><div id="top-menu" class="up"><div class="left below-small"><a id="home-page-logo" aria-label="Lingua Franca Home Page" href="/"><picture><source media="(min-width: 600px)" srcSet="/static/header_logo-646afdec325ed475dbcb8170f257c798.svg"/><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoKPHN2ZwogICB3aWR0aD0iNDAuMTMyODQ1NTk3MDY2OTc1IgogICBoZWlnaHQ9IjM5LjY4OTE5NzU2NTM2NjQ5IgogICB2aWV3Qm94PSIwIDAgNjcuNzI5MDU3IDY2Ljk4MDM0NyIKICAgdmVyc2lvbj0iMS4xIgogICBpZD0ic3ZnMTk3IgogICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9Im5hbWVkdmlldzE5OSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnNob3dwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZWNoZWNrZXJib2FyZD0idHJ1ZSIKICAgICBpbmtzY2FwZTpkZXNrY29sb3I9IiNkMWQxZDEiCiAgICAgaW5rc2NhcGU6ZG9jdW1lbnQtdW5pdHM9Im1tIgogICAgIHNob3dncmlkPSJmYWxzZSIKICAgICBpbmtzY2FwZTp6b29tPSIwLjkxNDkwNiIKICAgICBpbmtzY2FwZTpjeD0iMTM3LjE3MjU2IgogICAgIGlua3NjYXBlOmN5PSI1NjEuODA2MzUiCiAgICAgaW5rc2NhcGU6d2luZG93LXdpZHRoPSIxOTIwIgogICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9IjExMzEiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjAiCiAgICAgaW5rc2NhcGU6d2luZG93LXk9IjAiCiAgICAgaW5rc2NhcGU6d2luZG93LW1heGltaXplZD0iMSIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiIC8+CiAgPGRlZnMKICAgICBpZD0iZGVmczE5NCI+CiAgICA8Y2xpcFBhdGgKICAgICAgIGNsaXBQYXRoVW5pdHM9InVzZXJTcGFjZU9uVXNlIgogICAgICAgaWQ9ImNsaXBQYXRoMzYiPgogICAgICA8cGF0aAogICAgICAgICBkPSJNIDAsMjc1LjQ0MSBIIDI3Ni4yNzkgViAwIEggMCBaIgogICAgICAgICBpZD0icGF0aDM0IiAvPgogICAgPC9jbGlwUGF0aD4KICAgIDxsaW5lYXJHcmFkaWVudAogICAgICAgaWQ9ImxpbmVhckdyYWRpZW50MjgiCiAgICAgICBzcHJlYWRNZXRob2Q9InBhZCIKICAgICAgIGdyYWRpZW50VHJhbnNmb3JtPSJtYXRyaXgoMzYuODQ1NDM5LDAsMCwtMzYuODQ1OTMxLDcwLjMxMzk2Nyw4MC4yOTMxMjEpIgogICAgICAgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiCiAgICAgICB5Mj0iMCIKICAgICAgIHgyPSIxIgogICAgICAgeTE9IjAiCiAgICAgICB4MT0iMCIKICAgICAgIHhsaW5rOmhyZWY9IiNsaW5lYXJHcmFkaWVudDIyNjIiPgogICAgICA8c3RvcAogICAgICAgICBpZD0ic3RvcDI0LTMiCiAgICAgICAgIG9mZnNldD0iMCIKICAgICAgICAgc3R5bGU9InN0b3Atb3BhY2l0eTowO3N0b3AtY29sb3I6I2ZmZmZmZiIgLz4KICAgICAgPHN0b3AKICAgICAgICAgaWQ9InN0b3AyNiIKICAgICAgICAgb2Zmc2V0PSIxIgogICAgICAgICBzdHlsZT0ic3RvcC1vcGFjaXR5OjE7c3RvcC1jb2xvcjojZmZmZmZmIiAvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudAogICAgICAgeDE9IjAiCiAgICAgICB5MT0iMCIKICAgICAgIHgyPSIxIgogICAgICAgeTI9IjAiCiAgICAgICBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIKICAgICAgIGdyYWRpZW50VHJhbnNmb3JtPSJtYXRyaXgoMTI5LjIxMTMzLDAsMCwxMjkuMjExMzMsNjIuNjM3NTIsMjMyLjEyMTQ2KSIKICAgICAgIHNwcmVhZE1ldGhvZD0icGFkIgogICAgICAgaWQ9ImxpbmVhckdyYWRpZW50MjI2MiI+CiAgICAgIDxzdG9wCiAgICAgICAgIHN0eWxlPSJzdG9wLW9wYWNpdHk6MTtzdG9wLWNvbG9yOiNmZmZmZmYiCiAgICAgICAgIG9mZnNldD0iMCIKICAgICAgICAgaWQ9InN0b3AyMjU4IiAvPgogICAgICA8c3RvcAogICAgICAgICBzdHlsZT0ic3RvcC1vcGFjaXR5OjA7c3RvcC1jb2xvcjojMDAzMTY0IgogICAgICAgICBvZmZzZXQ9IjEiCiAgICAgICAgIGlkPSJzdG9wMjI2MCIgLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgPC9kZWZzPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIgogICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKC01OS41NDQ0MzEsLTcyLjkzMjQxNykiPgogICAgPGcKICAgICAgIGlkPSJnNjU5NiIKICAgICAgIHRyYW5zZm9ybT0ibWF0cml4KDAuMjcyMTcyMiwwLDAsLTAuMjcyMTcyMiw1MC4zODIwOTEsMTQ3LjgzNTUyKSI+CiAgICAgIDxnCiAgICAgICAgIGlkPSJnMTAiCiAgICAgICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKDkuMDk3NDA0Nyw2LjA2NDkzNjYpIiAvPgogICAgICA8ZwogICAgICAgICBpZD0iZzMyNTAxIgogICAgICAgICB0cmFuc2Zvcm09Im1hdHJpeCgxLjA0NzcwMzUsMCwwLDEuMDQ3NzAzNSwtMS45MjM1OTA4LC0xLjM4ODYxNjQpIj4KICAgICAgICA8ZwogICAgICAgICAgIGlkPSJnMzAiCiAgICAgICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOS4wOTc0MDQ3LDYuMDY0OTM2NikiPgogICAgICAgICAgPGcKICAgICAgICAgICAgIGlkPSJnMzIiCiAgICAgICAgICAgICBjbGlwLXBhdGg9InVybCgjY2xpcFBhdGgzNikiPgogICAgICAgICAgICA8ZwogICAgICAgICAgICAgICBpZD0iZzM4IgogICAgICAgICAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjYuNTc4NiwxOTkuMDA0MikiPgogICAgICAgICAgICAgIDxwYXRoCiAgICAgICAgICAgICAgICAgZD0ibSAwLDAgYyA0LjAzOCwwIDcuMzIyLC0zLjI4NSA3LjMyMiwtNy4zMjIgMCwtNC4wMzggLTMuMjg0LC03LjMyMyAtNy4zMjIsLTcuMzIzIC00LjAzOCwwIC03LjMyMywzLjI4NSAtNy4zMjMsNy4zMjMgQyAtNy4zMjMsLTMuMjg1IC00LjAzOCwwIDAsMCBtIC02LjQ1NSwtMjIuNDc5IHYgLTU4LjI1NSBoIDEyLjkxIHYgNTguMjU1IGMgMy45MDEsMS42NjkgNy4wMzMsNC44IDguNzAxLDguNzAyIEggMTE5LjUyMSBWIC0wLjg2OCBIIDE1LjE1NiBDIDEyLjY0LDUuMDE4IDYuNzk0LDkuMTUzIDAsOS4xNTMgYyAtOS4wODQsMCAtMTYuNDc2LC03LjM5MSAtMTYuNDc2LC0xNi40NzUgMCwtNi43OTUgNC4xMzYsLTEyLjY0IDEwLjAyMSwtMTUuMTU3IgogICAgICAgICAgICAgICAgIHN0eWxlPSJmaWxsOiNmNzk0MWU7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOm5vbnplcm87c3Ryb2tlOm5vbmUiCiAgICAgICAgICAgICAgICAgaWQ9InBhdGg0MCIgLz4KICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8ZwogICAgICAgICAgICAgICBpZD0iZzQyIgogICAgICAgICAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjYuNTc4Niw2OC42NTg0KSIKICAgICAgICAgICAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZiI+CiAgICAgICAgICAgICAgPHBhdGgKICAgICAgICAgICAgICAgICBkPSJtIDAsMCBjIDQuMDM4LDAgNy4zMjIsLTMuMjg0IDcuMzIyLC03LjMyMiAwLC00LjAzNyAtMy4yODQsLTcuMzIzIC03LjMyMiwtNy4zMjMgLTQuMDM4LDAgLTcuMzIzLDMuMjg2IC03LjMyMyw3LjMyMyBDIC03LjMyMywtMy4yODQgLTQuMDM4LDAgMCwwIG0gMTE5LjMzMiw5OC40OTggYyA0LjAzNywwIDcuMzIyLC0zLjI4NSA3LjMyMiwtNy4zMjMgMCwtNC4wMzcgLTMuMjg1LC03LjMyMiAtNy4zMjIsLTcuMzIyIC00LjAzOCwwIC03LjMyMywzLjI4NSAtNy4zMjMsNy4zMjIgMCw0LjAzOCAzLjI4NSw3LjMyMyA3LjMyMyw3LjMyMyBNIDEwNC40NjQsODQuMTIyIGMgMi42NDksLTUuNTYgOC4zMDgsLTkuNDIyIDE0Ljg2OCwtOS40MjIgOS4wODQsMCAxNi40NzUsNy4zOTEgMTYuNDc1LDE2LjQ3NSAwLDkuMDg1IC03LjM5MSwxNi40NzYgLTE2LjQ3NSwxNi40NzYgLTcuMDE3LDAgLTEzLjAwNiwtNC40MTcgLTE1LjM3NywtMTAuNjA5IEggMjkuMjI2IFYgNDkuNjExIGggNzcuMzg1IFYgMzAuMDgyIEggMjkuMjI2IFYgLTMyLjcwNSBIIC04OC44IHYgMTQ5LjI3NCBoIDIyLjc3MiBWIC0xMy4xNzggaCA1MC42NDcgYyAyLjM2OCwtNi4xOTggOC4zNiwtMTAuNjIgMTUuMzgxLC0xMC42MiA5LjA4NCwwIDE2LjQ3Niw3LjM5MiAxNi40NzYsMTYuNDc2IDAsOS4wODUgLTcuMzkyLDE2LjQ3NiAtMTYuNDc2LDE2LjQ3NiAtNi41NTksMCAtMTIuMjE4LC0zLjg2MiAtMTQuODY3LC05LjQyMyBoIC0zOC4yNTIgdiAxMjkuNzQ3IGggLTQ4LjU5IFYgLTQ1LjYxNCBIIDQyLjEzNSB2IDYyLjc4NyBoIDc3LjM4NiBWIDYyLjUyMSBIIDQyLjEzNSB2IDIxLjYxMiB6IgogICAgICAgICAgICAgICAgIHN0eWxlPSJmaWxsOiNmZmZmZmY7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOm5vbnplcm87c3Ryb2tlOm5vbmUiCiAgICAgICAgICAgICAgICAgaWQ9InBhdGg0NCIgLz4KICAgICAgICAgICAgPC9nPgogICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgICAgPC9nPgogICAgPC9nPgogICAgPHBhdGgKICAgICAgIGQ9Im0gNzAuMzEzOTQ0LDg3LjY1NDA5NyBoIDMuNzI5ODQ2IGMgMS44MTk4NjgsLTYuNDAxODQ3IDcuNzE1NDc3LC0xMS4xMDU4NSAxNC42OTI5NjksLTExLjEwNTg1IHYgMCBjIDYuOTc3NDkyLDAgMTIuODcyODExLDQuNzA0MDAzIDE0LjY5MjY4MSwxMS4xMDU4NSB2IDAgaCAzLjcyOTg1IEMgMTA1LjI1NDczLDc5LjIzNzU5MiA5Ny43MjA4OTcsNzIuOTMyNDE2IDg4LjczNjc1OSw3Mi45MzI0MTYgdiAwIGMgLTguOTg0MTM4LDAgLTE2LjUxODI1NSw2LjMwNTE3NiAtMTguNDIyODE1LDE0LjcyMTY4MSIKICAgICAgIHN0eWxlPSJmaWxsOnVybCgjbGluZWFyR3JhZGllbnQyOCk7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjAuMjg0OTU2O3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lIgogICAgICAgaWQ9InBhdGgzMCIgLz4KICA8L2c+Cjwvc3ZnPgo="/></picture></a><nav role="navigation"><ul><li class="nav-item"><a href="/download">Download</a></li><li class="nav-item"><a href="/docs/">Docs</a></li><li class="nav-item"><a href="/docs/handbook/overview">Handbook</a></li><li class="nav-item"><a href="/community">Community</a></li></ul></nav></div></div><div id="site-content"></div></header><main role="main"><section id="doc-layout"><button id="small-device-button-sidebar"><svg fill="none" height="26" viewBox="0 0 26 26" width="26" xmlns="http://www.w3.org/2000/svg"><g fill="#fff"><path d="m0 1c0-.552285.447715-1 1-1h24c.5523 0 1 .447715 1 1v3h-26z"></path><path d="m0 11h13 13v4h-26z"></path><path d="m0 22h26v3c0 .5523-.4477 1-1 1h-24c-.552284 0-1-.4477-1-1z"></path></g></svg></button><div class="page-popup" id="page-helpful-popup" style="opacity:0"><p>Was this page helpful?</p><div><button class="first" id="like-button-popup" title="Like this page"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.052 2.29429C10.3913 1.31699 11.6841 0.866721 12.4829 1.70385C12.6455 1.87427 12.8081 2.05843 12.9176 2.22265C13.2379 2.70316 13.3725 3.33595 13.4218 3.95232C13.4721 4.58045 13.438 5.25457 13.3738 5.86484C13.3093 6.47746 13.2129 7.03959 13.1328 7.44777C13.1294 7.46547 13.1259 7.48288 13.1225 7.5H14.006C15.8777 7.5 17.2924 9.19514 16.9576 11.0367L16.2737 14.7984C15.8017 17.3943 13.2078 19.0291 10.6622 18.3348L5.06251 16.8076C4.14894 16.5585 3.45455 15.8145 3.26885 14.886L2.91581 13.1208C2.63809 11.7322 3.69991 10.5624 4.82905 10.1161C5.15163 9.98861 5.44337 9.82679 5.66974 9.62597C7.37583 8.11245 7.99442 6.90287 9.05406 4.77695C9.4084 4.06605 9.77205 3.10054 10.052 2.29429ZM12.0165 7.87862L12.0169 7.87707L12.0187 7.86973L12.0262 7.83863C12.0328 7.81079 12.0426 7.76903 12.0549 7.71494C12.0793 7.60669 12.1135 7.4493 12.1515 7.25536C12.2277 6.86666 12.3188 6.33504 12.3793 5.76016C12.4401 5.18293 12.4685 4.5758 12.425 4.03206C12.3806 3.47655 12.2652 3.04684 12.0855 2.77735C12.0264 2.6887 11.9138 2.55604 11.7594 2.39421C11.5605 2.18576 11.1314 2.23428 10.9967 2.62228C10.7141 3.43609 10.3334 4.45194 9.94904 5.22305C8.88216 7.36349 8.19326 8.72408 6.33336 10.374C5.99304 10.6759 5.58878 10.8911 5.19665 11.0461C4.31631 11.3941 3.75035 12.1945 3.89639 12.9247L4.24943 14.6899C4.36085 15.247 4.77748 15.6934 5.32562 15.8428L10.9254 17.3701C12.9052 17.91 14.9227 16.6385 15.2898 14.6195L15.9738 10.8578C16.197 9.63009 15.2538 8.5 14.006 8.5H12.5015C12.3476 8.5 12.2022 8.42906 12.1074 8.30771C12.0127 8.18638 11.9792 8.02796 12.0165 7.87862C12.0165 7.87858 12.0165 7.87866 12.0165 7.87862Z"></path></svg></button><button id="dislike-button-popup" title="Dislike this page"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.052 17.7057C10.3913 18.683 11.6841 19.1333 12.4829 18.2962C12.6455 18.1257 12.8081 17.9416 12.9176 17.7773C13.2379 17.2968 13.3725 16.664 13.4218 16.0477C13.4721 15.4195 13.438 14.7454 13.3738 14.1352C13.3093 13.5225 13.2129 12.9604 13.1328 12.5522C13.1294 12.5345 13.1259 12.5171 13.1225 12.5H14.006C15.8777 12.5 17.2924 10.8049 16.9576 8.96334L16.2737 5.20164C15.8017 2.60569 13.2078 0.970948 10.6622 1.66518L5.06251 3.19238C4.14894 3.44154 3.45455 4.18546 3.26885 5.11401L2.91581 6.87918C2.63809 8.26779 3.69991 9.43756 4.82905 9.88388C5.15163 10.0114 5.44337 10.1732 5.66974 10.374C7.37583 11.8875 7.99442 13.0971 9.05406 15.223C9.4084 15.9339 9.77205 16.8995 10.052 17.7057ZM12.0165 12.1214L12.0169 12.1229L12.0187 12.1303L12.0262 12.1614C12.0328 12.1892 12.0426 12.231 12.0549 12.2851C12.0793 12.3933 12.1135 12.5507 12.1515 12.7446C12.2277 13.1333 12.3188 13.665 12.3793 14.2398C12.4401 14.8171 12.4685 15.4242 12.425 15.9679C12.3806 16.5234 12.2652 16.9532 12.0855 17.2226C12.0264 17.3113 11.9138 17.444 11.7594 17.6058C11.5605 17.8142 11.1314 17.7657 10.9967 17.3777C10.7141 16.5639 10.3334 15.5481 9.94904 14.777C8.88216 12.6365 8.19326 11.2759 6.33336 9.62597C5.99304 9.32406 5.58878 9.1089 5.19665 8.9539C4.31631 8.60592 3.75035 7.80549 3.89639 7.0753L4.24943 5.31012C4.36085 4.753 4.77748 4.30664 5.32562 4.15715L10.9254 2.62995C12.9052 2.08999 14.9227 3.36145 15.2898 5.38052L15.9738 9.14222C16.197 10.3699 15.2538 11.5 14.006 11.5H12.5015C12.3476 11.5 12.2022 11.5709 12.1074 11.6923C12.0127 11.8136 11.9792 11.972 12.0165 12.1214C12.0165 12.1214 12.0165 12.1213 12.0165 12.1214Z"></path></svg></button></div></div><noscript><style>
          nav#sidebar > ul > li.closed ul {
            display: block !important;
           }
        </style></noscript><nav id="sidebar"><ul><li id="targetChooser" class="closed"><button id="targetSelector">Target<div id="lf-current-target-c" class="language-lf-c current-target" style="display:none">: C</div><div id="lf-current-target-cpp" class="language-lf-cpp current-target" style="display:none">: C++</div><div id="lf-current-target-py" class="language-lf-py current-target" style="display:none">: Python</div><div id="lf-current-target-rs" class="language-lf-rs current-target" style="display:none">: Rust</div><div id="lf-current-target-ts" class="language-lf-ts current-target" style="display:none">: TypeScript</div><span class="open"><svg fill="none" height="9" viewBox="0 0 14 9" width="14" xmlns="http://www.w3.org/2000/svg"><path d="m1 1 6 6 6-6" stroke="#000" stroke-width="2"></path></svg></span><span class="closed"><svg fill="none" height="14" viewBox="0 0 9 14" width="9" xmlns="http://www.w3.org/2000/svg"><path d="m1 13 6-6-6-6" stroke="#000" stroke-width="2"></path></svg></span></button><ul><li class="" id="lf-target-button-c"><a>C</a></li><li class="" id="lf-target-button-cpp"><a>C++</a></li><li class="" id="lf-target-button-py"><a>Python</a></li><li class="" id="lf-target-button-ts"><a>TypeScript</a></li><li class="" id="lf-target-button-rs"><a>Rust</a></li></ul></li><li class="closed"><button aria-label="Resources expand">Resources<span class="open"><svg fill="none" height="9" viewBox="0 0 14 9" width="14" xmlns="http://www.w3.org/2000/svg"><path d="m1 1 6 6 6-6" stroke="#000" stroke-width="2"></path></svg></span><span class="closed"><svg fill="none" height="14" viewBox="0 0 9 14" width="9" xmlns="http://www.w3.org/2000/svg"><path d="m1 13 6-6-6-6" stroke="#000" stroke-width="2"></path></svg></span></button><ul><li><a href="/docs/handbook/overview">Overview</a></li><li><a href="/docs/handbook/tutorial-video">Tutorial Video</a></li></ul></li><li class="closed"><button aria-label="Writing Reactors expand">Writing Reactors<span class="open"><svg fill="none" height="9" viewBox="0 0 14 9" width="14" xmlns="http://www.w3.org/2000/svg"><path d="m1 1 6 6 6-6" stroke="#000" stroke-width="2"></path></svg></span><span class="closed"><svg fill="none" height="14" viewBox="0 0 9 14" width="9" xmlns="http://www.w3.org/2000/svg"><path d="m1 13 6-6-6-6" stroke="#000" stroke-width="2"></path></svg></span></button><ul><li><a href="/docs/handbook/a-first-reactor">A First Reactor</a></li><li><a href="/docs/handbook/inputs-and-outputs">Inputs and Outputs</a></li><li><a href="/docs/handbook/parameters-and-state-variables">Parameters and State Variables</a></li><li><a href="/docs/handbook/time-and-timers">Time and Timers</a></li><li><a href="/docs/handbook/composing-reactors">Composing Reactors</a></li><li><a href="/docs/handbook/reactions-and-methods">Reactions and Methods</a></li><li><a href="/docs/handbook/causality-loops">Causality Loops</a></li><li><a href="/docs/handbook/extending-reactors">Extending Reactors</a></li><li><a href="/docs/handbook/actions">Actions</a></li><li><a href="/docs/handbook/superdense-time">Superdense Time</a></li><li><a href="/docs/handbook/modal-models">Modal Reactors</a></li><li><a href="/docs/handbook/deadlines">Deadlines</a></li><li><a href="/docs/handbook/multiports-and-banks">Multiports and Banks</a></li><li><a href="/docs/handbook/preambles">Preambles</a></li><li><a href="/docs/handbook/distributed-execution">Distributed Execution</a></li><li><a href="/docs/handbook/termination">Termination</a></li></ul></li><li class="closed"><button aria-label="Tools expand">Tools<span class="open"><svg fill="none" height="9" viewBox="0 0 14 9" width="14" xmlns="http://www.w3.org/2000/svg"><path d="m1 1 6 6 6-6" stroke="#000" stroke-width="2"></path></svg></span><span class="closed"><svg fill="none" height="14" viewBox="0 0 9 14" width="9" xmlns="http://www.w3.org/2000/svg"><path d="m1 13 6-6-6-6" stroke="#000" stroke-width="2"></path></svg></span></button><ul><li><a href="/docs/handbook/code-extension">Code Extension</a></li><li><a href="/docs/handbook/epoch-ide">Epoch IDE</a></li><li><a href="/docs/handbook/command-line-tools">Command Line Tools</a></li><li><a href="/docs/handbook/troubleshooting">Troubleshooting</a></li></ul></li><li class="open highlighted"><button aria-expanded="true" aria-label="Reference close">Reference<span class="open"><svg fill="none" height="9" viewBox="0 0 14 9" width="14" xmlns="http://www.w3.org/2000/svg"><path d="m1 1 6 6 6-6" stroke="#000" stroke-width="2"></path></svg></span><span class="closed"><svg fill="none" height="14" viewBox="0 0 9 14" width="9" xmlns="http://www.w3.org/2000/svg"><path d="m1 13 6-6-6-6" stroke="#000" stroke-width="2"></path></svg></span></button><ul><li><a href="/docs/handbook/expressions">Expressions</a></li><li aria-current="page" class="highlight"><a aria-current="page" class="" href="/docs/handbook/target-language-details">Target Language Details</a></li><li><a href="/docs/handbook/target-declaration">Target Declaration</a></li><li><a href="/docs/handbook/tracing">Tracing</a></li><li><a href="/docs/handbook/containerized-execution">Containerized Execution</a></li></ul></li><li class="closed"><button aria-label="Developer expand">Developer<span class="open"><svg fill="none" height="9" viewBox="0 0 14 9" width="14" xmlns="http://www.w3.org/2000/svg"><path d="m1 1 6 6 6-6" stroke="#000" stroke-width="2"></path></svg></span><span class="closed"><svg fill="none" height="14" viewBox="0 0 9 14" width="9" xmlns="http://www.w3.org/2000/svg"><path d="m1 13 6-6-6-6" stroke="#000" stroke-width="2"></path></svg></span></button><ul><li><a href="/docs/handbook/regression-tests">Regression Tests</a></li><li><a href="/docs/handbook/contributing">Contributing</a></li><li><a href="/docs/handbook/download">Downloading</a></li><li><a href="/docs/handbook/eclipse-oomph">Developer Eclipse Setup</a></li><li><a href="/docs/handbook/intellij-kotlin">Developer IntelliJ Setup (for Kotlin)</a></li><li><a href="/docs/handbook/running-benchmarks">Running Benchmarks</a></li></ul></li></ul></nav><div id="handbook-content" role="article"><h2>Target Language Details</h2><article><div class="whitespace raised"><div class="markdown"><p>
<span class="not-in-pdf">This page is showing examples in the target language <span class="lf-c">C</span><span class="lf-cpp">C++</span><span class="lf-py">Python</span><span class="lf-ts">TypeScript</span><span class="lf-rs">Rust</span>.
You can change the target language in the left sidebar.</span></p>
<h2 id="overview" style="position:relative;"><a href="#overview" aria-label="overview permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Overview</h2>
<div class="lf-c">
<p>In the C reactor target for Lingua Franca, reactions are written in C and the code generator generates one or more standalone C programs that can be compiled and run on several platforms. It has been tested on macOS, Linux, Windows, and at least one bare-iron embedded platform. The single-threaded version (which you get by setting the <a href="/docs/handbook/target-declaration#threading"><code>threading</code> target parameter</a> to <code>false</code>) is the most portable, requiring only a handful of common C libraries (see <a href="#included-libraries">Included Libraries</a> below). The multithreaded version requires a small subset of the POSIX thread library (<code>pthreads</code>) and transparently executes in parallel on a multicore machine while preserving the deterministic semantics of Lingua Franca.</p>
<p>Note that C is not a safe language. There are many ways that a programmer can circumvent the semantics of Lingua Franca and introduce nondeterminism and illegal memory accesses. For example, it is easy for a programmer to mistakenly send a message that is a pointer to data on the stack. The destination reactors will very likely read invalid data. It is also easy to create memory leaks, where memory is allocated and never freed. Here, we provide some guidelines for a style for writing reactors that will be safe.</p>
<p><strong>NOTE:</strong> If you intend to use C++ code or import C++ libraries in the C target, we provide a special <a href="#the-ccpp-target">CCpp target</a> that automatically uses a C++ compiler by default. Alternatively, you might want to use the Cpp target.</p>
</div>
<div class="lf-cpp">
<p>In the C++ reactor target for Lingua Franca, reactions are written in C++ and the code generator generates a standalone C++ program that can be compiled and run on all major platforms. Our continuous integration ensures compatibility with Windows, macOS, and Linux.
The C++ target solely depends on a working C++ build system including a recent C++ compiler (supporting C++17) and <a href="https://cmake.org/">CMake</a> (>= 3.5). It relies on the <a href="https://github.com/lf-lang/reactor-cpp">reactor-cpp</a> runtime, which is automatically fetched and compiled in the background by the Lingua Franca compiler.</p>
<p>Note that C++ is not a safe language. There are many ways that a programmer can circumvent the semantics of Lingua Franca and introduce nondeterminism and illegal memory accesses. For example, it is easy for a programmer to mistakenly send a message that is a pointer to data on the stack. The destination reactors will very likely read invalid data. It is also easy to create memory leaks, where memory is allocated and never freed. Note, however, that the C++ reactor library is designed to prevent common errors and to encourage a safe modern C++ style. Here, we introduce the specifics of writing Reactor programs in C++ and present some guidelines for a style that will be safe.</p>
</div>
<div class="lf-py">
<p>In the Python reactor target for Lingua Franca, reactions are written in Python. The user-written reactors are then generated into a Python 3 script that can be executed on several platforms. The Python target has been tested on Linux, macOS, and Windows. To facilitate efficient and fast execution of Python code, the generated program relies on a C extension to facilitate Lingua Franca API such as <code>set</code> and <code>schedule</code>. To learn more about the structure of the generated Python program see <a href="#python-target-implementation-details">Implementation Details</a>.</p>
<p>Python reactors can bring the vast library of scientific modules that exist for Python into a Lingua Franca program. Moreover, since the Python reactor target is based on a fast and efficient C runtime library, Lingua Franca programs can execute much faster than native equivalent Python programs in many cases. Finally, interoperability with C reactors is planned for the future.</p>
<p>In comparison to the C target, the Python target can be up to an order of magnitude slower. However, depending on the type of application and the implementation optimizations in Python, you can achieve an on-par performance to the C target in many applications.</p>
<p><strong>NOTE:</strong> A <a href="https://docs.python.org/3/extending/extending.html">Python C
extension</a> is
generated for each Lingua Franca program (see <a href="#python-target-implementation-details">Implementation
Details</a>). This extension module will
have the name LinguaFranca[your_LF_program_name].</p>
</div>
<div class="lf-ts">
<p>In the TypeScript reactor target for Lingua Franca, reactions are written in <a href="https://www.typescriptlang.org/">TypeScript</a> and the code generator generates a standalone TypeScript program that can be compiled to JavaScript and run on <a href="https://nodejs.org">Node.js</a>.</p>
<p>TypeScript reactors bring the strengths of TypeScript and Node.js to Lingua Franca programming. The TypeScript language and its associated tools enable static type checking for both reaction code and Lingua Franca elements like ports and actions. The Node.js JavaScript runtime provides an execution environment for asynchronous network applications. With Node.js comes Node Package Manager (<a href="https://www.npmjs.com/">npm</a>) and its large library of supporting modules.</p>
<p>In terms of raw performance on CPU intensive operations, TypeScript reactors are about two orders of magnitude slower than C reactors. But excelling at CPU intensive operations isn’t really the point of Node.js (or by extension TypeScript reactors). Node.js is about achieving high throughput on network applications by efficiently handling asynchronous I/O operations. Keep this in mind when choosing the right Lingua Franca target for your application.</p>
</div>
<div class="lf-rs">
<p><strong>Important:</strong> The Rust target is still quite preliminary. This is early WIP documentation to let you try it out if you’re curious</p>
<p>In the Rust reactor target for Lingua Franca, reactions are written in Rust and the code generator generates a standalone Rust program that can be compiled and run on platforms supported by rustc. The program depends on a runtime library distributed as the crate <a href="https://github.com/lf-lang/reactor-rust">reactor_rt</a>, and depends on the Rust standard library.</p>
<p>Documentation for the runtime API is available here: <a href="https://lf-lang.github.io/reactor-rust/">https://lf-lang.github.io/reactor-rust/</a></p>
<p>LF-Rust generates a Cargo project per compiled main reactor. This specification assumes in some places that the user is somewhat familiar with how Cargo works.
If you’re not, here’s a primer:</p>
<ul>
<li>a Rust project (and its library artifact) are called a <em>crate</em>.</li>
<li>Cargo is the Rust package manager and build tool. LF/Rust uses Cargo to build the generated project.</li>
<li>Rust has extensive support for conditional compilation. Cargo <em>features</em> are commonly used to enable or disable the compilation of parts of a crate. A feature may also pull in additional dependencies. Cargo features only influence the compilation process; if you don’t mention the correct feature flags at compilation time, those features cannot be made available at runtime. The Rust reactor runtime crate uses Cargo features to conditionally enable some features, e.g., command-line argument parsing.</li>
</ul>
</div>
<h2 id="requirements" style="position:relative;"><a href="#requirements" aria-label="requirements permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Requirements</h2>
<div class="lf-c">
<p>The following tools are required in order to compile the generated C++ source code:</p>
<ul>
<li>A C compiler such as <code>gcc</code></li>
<li>A recent version of <code>cmake</code> (at least 3.5)</li>
</ul>
</div>
<div class="lf-cpp">
<p>The following tools are required in order to compile the generated C++ source code:</p>
<ul>
<li>A recent C++ compiler supporting C++17</li>
<li>A recent version of <code>cmake</code> (at least 3.5)</li>
</ul>
</div>
<div class="lf-py">
<p>To use this target, install Python 3 on your machine. See <a href="https://wiki.python.org/moin/BeginnersGuide/Download">downloading Python</a>.</p>
<p><strong>NOTE:</strong> The Python target requires a C implementation of Python (nicknamed CPython). This is what you will get if you use the above link, or with most of the alternative Python installations such as Anaconda. See <a href="https://www.python.org/download/alternatives/">this</a> for more details.</p>
<p>The Python reactor target relies on <code>setuptools</code> to be able to compile a <a href="https://docs.python.org/3/extending/extending.html">Python
C extension</a> for each LF
program.</p>
<!-- To install `pip3`, you can follow instructions [here](https://pip.pypa.io/en/stable/installation/). -->
<p>To install <code>setuptools</code> using <code>pip3</code>, do this:</p>
<pre class="source-lf language-sh"><span class="source-shell">pip3 install setuptools</span>
</pre>
</div>
<div class="lf-ts">
<p>First, make sure Node.js is installed on your machine. You can <a href="https://nodejs.org/en/download/">download Node.js here</a>. The npm package manager comes along with Node.</p>
<p>After installing Node, you may optionally install the TypeScript compiler.</p>
<pre class="source-lf language-sh"><span class="source-shell">npm install -g typescript</span>
</pre>
<p>TypeScript reactor projects are created with a local copy of the TypeScript compiler, but having the TypeScript compiler globally installed can be useful for <a href="#debugging-type-errors">debugging type errors</a> and type checking on the command line.</p>
</div>
<div class="lf-rs">
<p>In order to compile the generated Rust source code, you need a recent version of <a href="https://doc.rust-lang.org/cargo/">Cargo</a>, the Rust package manager. See <a href="https://doc.rust-lang.org/cargo/getting-started/installation.html">How to Install Rust and Cargo</a> if you don’t have them on your system.</p>
<p>You can use a development version of the runtime library by setting the LFC option <code>--external-runtime-path</code> to the root directory of the runtime library crate sources. If this variable is mentioned, LFC will ask Cargo to fetch the runtime library from there.</p>
</div>
<h2 id="limitations" style="position:relative;"><a href="#limitations" aria-label="limitations permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Limitations</h2>
<div class="lf-c">
<ul>
<li>The C target does not yet implement methods.</li>
</ul>
</div>
<div class="lf-cpp">
<p>The C++ target does not yet implement:</p>
<ul>
<li><span class="lf_keywords">extends</span></li>
<li><span class="lf_keywords">federated</span></li>
</ul>
</div>
<div class="lf-py">
<ul>
<li>
<p>The Python target does not yet implement methods.</p>
</li>
<li>
<p>The Lingua Franca lexer does not support single-quoted strings in Python. This limitation also applies to target property values. You must use double quotes.</p>
</li>
</ul>
</div>
<div class="lf-ts">
<ul>
<li>
<p>The <span class="lf_keywords">federated</span> implementation in the TypeScript target is still quite preliminary.</p>
</li>
<li>
<p>The TypeScript target does not yet implement methods.</p>
</li>
</ul>
</div>
<div class="lf-rs">
<p>The Rust target does not yet implement:</p>
<ul>
<li><span class="lf_keywords">federated</span></li>
</ul>
</div>
<h2 id="the-target-specification" style="position:relative;"><a href="#the-target-specification" aria-label="the target specification permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The Target Specification</h2>
<div class="lf-c">
<p>To have Lingua Franca generate C code, start your <code>.lf</code> file with one of the following target specifications:</p>
<pre class="source-lf language-lf"><span class="source-lf">    </span><span class="source-lf meta-targetspec-lflang keyword-control-lflang">target</span><span class="source-lf meta-targetspec-lflang"> </span><span class="source-lf meta-targetspec-lflang constant-language-lflang">C</span><span class="source-lf meta-targetspec-lflang"> &lt;options&gt;</span><span class="source-lf meta-targetspec-lflang">;</span>
<span class="source-lf">    </span><span class="source-lf meta-targetspec-lflang keyword-control-lflang">target</span><span class="source-lf meta-targetspec-lflang"> </span><span class="source-lf meta-targetspec-lflang constant-language-lflang">CCpp</span><span class="source-lf meta-targetspec-lflang"> &lt;options&gt;</span><span class="source-lf meta-targetspec-lflang">;</span>
</pre>
<p>Note that for all LF statements, the final semicolon is optional, but if you are writing your code in C, you may want to include the final semicolon for uniformity.</p>
<p>For options to the target specification, see <a href="/docs/handbook/target-declaration">detailed documentation of the target options</a>.</p>
<p>The second form, <code>CCpp</code>, is used when you wish to use a C++ compiler to compile
the generated code, thereby allowing your C reactors to call C++ code.</p>
<!-- The C target uses a C compiler by default, and will fail to compile mixed C/C++ language programs. As a remedy, the `CCpp` target uses the C runtime but employs a C++ compiler to compile your program. To use it, simply replace `target C` with `target CCpp`. -->
<p>Here is a minimal example of a program written in the <code>CCpp</code> target, taken from <a href="https://github.com/lf-lang/lingua-franca/blob/master/test/C/src/target/HelloWorldCCPP.lf">HelloWorldCCPP.lf</a>:</p>
<pre class="source-lf language-lf-c"><span class="source-lf meta-targetspec-lflang keyword-control-lflang">target</span><span class="source-lf meta-targetspec-lflang"> </span><span class="source-lf meta-targetspec-lflang constant-language-lflang">CCpp</span><span class="source-lf meta-targetspec-lflang">;</span>
<span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">HelloWorld</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">preamble</span><span class="source-lf"> </span><span class="source-lf meta-embedded-block-cpp">{=</span>
<span class="source-lf meta-embedded-block-cpp meta-preprocessor-include-cpp">        </span><span class="source-lf meta-embedded-block-cpp meta-preprocessor-include-cpp keyword-control-directive-include-cpp punctuation-definition-directive-cpp">#</span><span class="source-lf meta-embedded-block-cpp meta-preprocessor-include-cpp keyword-control-directive-include-cpp">include</span><span class="source-lf meta-embedded-block-cpp meta-preprocessor-include-cpp"> </span><span class="source-lf meta-embedded-block-cpp meta-preprocessor-include-cpp string-quoted-other-lt-gt-include-cpp punctuation-definition-string-begin-cpp">&lt;</span><span class="source-lf meta-embedded-block-cpp meta-preprocessor-include-cpp string-quoted-other-lt-gt-include-cpp">iostream</span><span class="source-lf meta-embedded-block-cpp meta-preprocessor-include-cpp string-quoted-other-lt-gt-include-cpp punctuation-definition-string-end-cpp">&gt;</span><span class="source-lf meta-embedded-block-cpp meta-preprocessor-include-cpp"> </span><span class="source-lf meta-embedded-block-cpp comment-line-double-slash-cpp punctuation-definition-comment-cpp">//</span><span class="source-lf meta-embedded-block-cpp comment-line-double-slash-cpp"> Note that no C++ header will be included by default.</span>
<span class="source-lf meta-embedded-block-cpp">    </span><span class="source-lf meta-embedded-block-cpp">=}</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(</span><span class="source-lf support-variable-lflang">startup</span><span class="source-lf">) </span><span class="source-lf meta-embedded-block-cpp">{=</span>
<span class="source-lf meta-embedded-block-cpp">        </span><span class="source-lf meta-embedded-block-cpp entity-name-scope-resolution-cpp">std</span><span class="source-lf meta-embedded-block-cpp punctuation-separator-namespace-access-cpp punctuation-separator-scope-resolution-cpp">::</span><span class="source-lf meta-embedded-block-cpp">cout </span><span class="source-lf meta-embedded-block-cpp keyword-operator-bitwise-shift-cpp">&lt;&lt;</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp string-quoted-double-cpp punctuation-definition-string-begin-cpp">&quot;</span><span class="source-lf meta-embedded-block-cpp string-quoted-double-cpp">Hello World.</span><span class="source-lf meta-embedded-block-cpp string-quoted-double-cpp punctuation-definition-string-end-cpp">&quot;</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp keyword-operator-bitwise-shift-cpp">&lt;&lt;</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp entity-name-scope-resolution-cpp">std</span><span class="source-lf meta-embedded-block-cpp punctuation-separator-namespace-access-cpp punctuation-separator-scope-resolution-cpp">::</span><span class="source-lf meta-embedded-block-cpp">endl</span><span class="source-lf meta-embedded-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-cpp">    </span><span class="source-lf meta-embedded-block-cpp">=}</span>
<span class="source-lf">}</span>
<span class="source-lf storage-modifier-lflang">main</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf variable-other-constant-reactorinstance-lflang">a</span><span class="source-lf"> </span><span class="source-lf keyword-operator-lflang">=</span><span class="source-lf"> </span><span class="source-lf keyword-operator-new-lflang">new</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">HelloWorld</span><span class="source-lf">();</span>
<span class="source-lf">}</span>
</pre>
<p><strong>Note:</strong> Unless some feature in the C target is needed, we recommend using the Cpp target that uses a runtime that is written natively in C++.</p>
<p><strong>Note:</strong> A <code>.lf</code> file that uses the <code>CCpp</code> target cannot and should not be imported to a <code>.lf</code> file that uses the <code>C</code> target. Although these two targets use essentially the same runtime, such a scenario can cause unintended compile errors.</p>
</div>
<div class="lf-cpp">
<p>To have Lingua Franca generate C++ code, start your <code>.lf</code> file with the following target specification:</p>
<pre class="source-lf language-lf"><span class="source-lf">    </span><span class="source-lf meta-targetspec-lflang keyword-control-lflang">target</span><span class="source-lf meta-targetspec-lflang"> </span><span class="source-lf meta-targetspec-lflang constant-language-lflang">Cpp</span><span class="source-lf meta-targetspec-lflang">;</span>
</pre>
<p>Note that for all LF statements, the final semicolon is optional, but if you are writing your code in C++, you may want to include the final semicolon for uniformity.</p>
<p>For options to the target specification, see <a href="/docs/handbook/target-declaration">detailed documentation of the target options</a>.</p>
</div>
<div class="lf-py">
<p>To have Lingua Franca generate Python code, start your <code>.lf</code> file with the following target specification:</p>
<pre class="source-lf language-lf"><span class="source-lf">    </span><span class="source-lf meta-targetspec-lflang keyword-control-lflang">target</span><span class="source-lf meta-targetspec-lflang"> </span><span class="source-lf meta-targetspec-lflang constant-language-lflang">Python</span>
</pre>
<p>Note that for all LF statements, a final semicolon is optional, but if you are writing your code in Python, you may want to omit the final semicolon for uniformity.</p>
<p>For options to the target specification, see <a href="/docs/handbook/target-declaration">detailed documentation of the target options</a>.</p>
</div>
<div class="lf-ts">
<p>To have Lingua Franca generate TypeScript code, start your <code>.lf</code> file with the following target specification:</p>
<pre class="source-lf language-lf"><span class="source-lf">    </span><span class="source-lf meta-targetspec-lflang keyword-control-lflang">target</span><span class="source-lf meta-targetspec-lflang"> </span><span class="source-lf meta-targetspec-lflang constant-language-lflang">TypeScript</span><span class="source-lf meta-targetspec-lflang">;</span>
</pre>
<p>Note that for all LF statements, the final semicolon is optional, but if you are writing your code in TypeScript, you may want to include the final semicolon for uniformity. The supported target parameters and command-line options are documented in the <a href="/docs/handbook/target-declaration">Target Declaration</a> documentation.</p>
</div>
<div class="lf-rs">
<p>To have Lingua Franca generate Rust code, start your <code>.lf</code> file with the following target specification:</p>
<pre class="source-lf language-lf"><span class="source-lf">    </span><span class="source-lf meta-targetspec-lflang keyword-control-lflang">target</span><span class="source-lf meta-targetspec-lflang"> </span><span class="source-lf meta-targetspec-lflang constant-language-lflang">Rust</span><span class="source-lf meta-targetspec-lflang">;</span>
</pre>
<p>Note that for all LF statements, the final semicolon is optional, but if you are writing your code in Rust, you may want to include the final semicolon for uniformity.</p>
</div>
<h2 id="parameters-and-state-variables" style="position:relative;"><a href="#parameters-and-state-variables" aria-label="parameters and state variables permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Parameters and State Variables</h2>
<div class="lf-c">
<p>Reactor parameters and state variables are referenced in the C code using the
<code>self</code> struct. The following
<a href="https://github.com/lf-lang/lingua-franca/blob/master/test/C/src/Stride.lf">Stride</a>
example modifies the <code>Count</code> reactor in <a href="/docs/handbook/parameters-and-state-variables#state-declaration">State
Declaration</a> to
include both a parameter and a state variable:</p>
<pre class="source-lf language-lf-c"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Count</span><span class="source-lf">(stride:int(</span><span class="source-lf constant-numeric-int-lflang">1</span><span class="source-lf">)) {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">state</span><span class="source-lf"> count:</span><span class="source-lf storage-type-primitive-cpp storage-type-built-in-primitive-cpp">int</span><span class="source-lf">(</span><span class="source-lf constant-numeric-int-lflang">1</span><span class="source-lf">);</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">output</span><span class="source-lf"> y:</span><span class="source-lf storage-type-primitive-cpp storage-type-built-in-primitive-cpp">int</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">timer</span><span class="source-lf"> t(</span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">, </span><span class="source-lf constant-numeric-int-lflang">100</span><span class="source-lf"> </span><span class="source-lf constant-numeric-lflang">msec</span><span class="source-lf">);</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(t) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> y </span><span class="source-lf meta-embedded-block-c">{=</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c entity-name-function-call-cpp">lf_set</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c">y</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c variable-other-object-access-cpp">self</span><span class="source-lf meta-embedded-block-c punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c variable-other-property-cpp">count</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c variable-other-object-access-cpp">self</span><span class="source-lf meta-embedded-block-c punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c variable-other-property-cpp">count</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c keyword-operator-assignment-compound-cpp">+=</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c variable-other-object-access-cpp">self</span><span class="source-lf meta-embedded-block-c punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c variable-other-property-cpp">stride</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">    </span><span class="source-lf meta-embedded-block-c">=}</span>
<span class="source-lf">}</span>
</pre>
<p>This defines a <code>stride</code> parameter with type <code>int</code> and initial value <code>1</code> and
a <code>count</code> state variable with the same type and initial value.
These are referenced in the reaction with the syntax <code>self->stride</code> and <code>self->count</code> respectively.</p>
<p><strong>The self Struct:</strong>
The code generator synthesizes a struct type in C for each reactor class and a constructor that creates an instance of this struct. By convention, these instances are called <code>self</code> and are visible within each reactor body. The <code>self</code> struct contains the parameters, state variables, and values associated with actions and ports of the reactor. Parameters and state variables are accessed directly on the <code>self</code> struct, whereas ports and actions are directly in scope by name, as we will see below. Let’s begin with parameters.</p>
<p>It may be tempting to declare state variables in the <span class="lf_keywords">preamble</span>, as follows:</p>
<pre class="source-lf language-lf-c"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">FlawedCount</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">preamble</span><span class="source-lf"> </span><span class="source-lf meta-embedded-block-c">{=</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c storage-type-primitive-cpp storage-type-built-in-primitive-cpp">int</span><span class="source-lf meta-embedded-block-c"> count </span><span class="source-lf meta-embedded-block-c keyword-operator-assignment-cpp">=</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c constant-numeric-decimal-cpp">0</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">    </span><span class="source-lf meta-embedded-block-c">=}</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">output</span><span class="source-lf"> y:</span><span class="source-lf storage-type-primitive-cpp storage-type-built-in-primitive-cpp">int</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">timer</span><span class="source-lf"> t(</span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">, </span><span class="source-lf constant-numeric-int-lflang">100</span><span class="source-lf"> </span><span class="source-lf constant-numeric-lflang">msec</span><span class="source-lf">);</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(t) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> y </span><span class="source-lf meta-embedded-block-c">{=</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c entity-name-function-call-cpp">lf_set</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c">y</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> count</span><span class="source-lf meta-embedded-block-c keyword-operator-increment-cpp">++</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">    </span><span class="source-lf meta-embedded-block-c">=}</span>
<span class="source-lf">}</span>
</pre>
<p>This will produce a sequence of integers, but if there is more than one instance of the reactor, those instances will share the same variable count. Hence, <strong>don’t do this</strong>! Sharing variables across instances of reactors violates a basic principle, which is that reactors communicate only by sending messages to one another. Sharing variables will make your program nondeterministic. If you have multiple instances of the above FlawedCount reactor, the outputs produced by each instance will not be predictable, and in a multithreaded implementation, will also not be repeatable.</p>
<h3 id="array-values-for-parameters" style="position:relative;"><a href="#array-values-for-parameters" aria-label="array values for parameters permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Array Values for Parameters</h3>
<p>Parameters and state variables can have array values, though some care is needed. The <a href="https://github.com/lf-lang/lingua-franca/blob/master/test/C/src/ArrayAsParameter.lf">ArrayAsParameter</a> example outputs the elements of an array as a sequence of individual messages:</p>
<pre class="source-lf language-lf-c"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Source</span><span class="source-lf">(sequence:int[](</span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">, </span><span class="source-lf constant-numeric-int-lflang">1</span><span class="source-lf">, </span><span class="source-lf constant-numeric-int-lflang">2</span><span class="source-lf">), n_sequence:int(</span><span class="source-lf constant-numeric-int-lflang">3</span><span class="source-lf">)) {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">output</span><span class="source-lf"> out:</span><span class="source-lf storage-type-primitive-cpp storage-type-built-in-primitive-cpp">int</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">state</span><span class="source-lf"> count:</span><span class="source-lf storage-type-primitive-cpp storage-type-built-in-primitive-cpp">int</span><span class="source-lf">(</span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">);</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">logical</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">action</span><span class="source-lf"> next;</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(</span><span class="source-lf support-variable-lflang">startup</span><span class="source-lf">, next) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> out, next </span><span class="source-lf meta-embedded-block-c">{=</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c entity-name-function-call-cpp">lf_set</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c">out</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c variable-other-object-access-cpp">self</span><span class="source-lf meta-embedded-block-c punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c variable-other-property-cpp">sequence</span><span class="source-lf meta-embedded-block-c meta-bracket-square-access punctuation-definition-begin-bracket-square">[</span><span class="source-lf meta-embedded-block-c meta-bracket-square-access variable-other-object-access-cpp">self</span><span class="source-lf meta-embedded-block-c meta-bracket-square-access punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c meta-bracket-square-access variable-other-property-cpp">count</span><span class="source-lf meta-embedded-block-c meta-bracket-square-access punctuation-definition-end-bracket-square">]</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c variable-other-object-access-cpp">self</span><span class="source-lf meta-embedded-block-c punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c variable-other-property-cpp">count</span><span class="source-lf meta-embedded-block-c keyword-operator-increment-cpp">++</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c keyword-control-if-cpp">if</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-section-parens-begin-bracket-round-cpp">(</span><span class="source-lf meta-embedded-block-c meta-parens-cpp variable-other-object-access-cpp">self</span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c meta-parens-cpp variable-other-property-cpp">count</span><span class="source-lf meta-embedded-block-c meta-parens-cpp"> </span><span class="source-lf meta-embedded-block-c meta-parens-cpp keyword-operator-comparison-cpp">&lt;</span><span class="source-lf meta-embedded-block-c meta-parens-cpp"> </span><span class="source-lf meta-embedded-block-c meta-parens-cpp variable-other-object-access-cpp">self</span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c meta-parens-cpp variable-other-property-cpp">n_sequence</span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-section-parens-end-bracket-round-cpp">)</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-section-block-begin-bracket-curly-cpp">{</span>
<span class="source-lf meta-embedded-block-c meta-block-cpp">            </span><span class="source-lf meta-embedded-block-c meta-block-cpp entity-name-function-call-cpp">lf_schedule</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c meta-block-cpp">next</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c meta-block-cpp"> </span><span class="source-lf meta-embedded-block-c meta-block-cpp constant-numeric-decimal-cpp">0</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c meta-block-cpp">        </span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-section-block-end-bracket-curly-cpp">}</span>
<span class="source-lf meta-embedded-block-c">    </span><span class="source-lf meta-embedded-block-c">=}</span>
<span class="source-lf">}</span>
</pre>
<p>This uses a <a href="/docs/handbook/actions#logical-actions"><span class="lf_keywords">logical</span> <span class="lf_keywords">action</span></a> to repeat the reaction, sending one element of the array in each invocation.</p>
<p>In C, arrays do not encode their own length, so a separate parameter <code>n_sequence</code> is used for the array length. Obviously, there is potential here for errors, where the array length doesn’t match the length parameter.</p>
<p>Above, the parameter default value is an array with three elements, <code>[0, 1, 2]</code>. The syntax for giving this default value is that of a Lingua Franca list, <code>(0, 1, 2)</code>, which gets converted by the code generator into a C static initializer. The default value can be overridden when instantiating the reactor using a similar syntax:</p>
<pre class="source-lf language-lf"><span class="source-lf">    </span><span class="source-lf variable-other-constant-reactorinstance-lflang">s</span><span class="source-lf"> </span><span class="source-lf keyword-operator-lflang">=</span><span class="source-lf"> </span><span class="source-lf keyword-operator-new-lflang">new</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Source</span><span class="source-lf">(sequence </span><span class="source-lf keyword-operator-lflang">=</span><span class="source-lf"> (</span><span class="source-lf constant-numeric-int-lflang">1</span><span class="source-lf">, </span><span class="source-lf constant-numeric-int-lflang">2</span><span class="source-lf">, </span><span class="source-lf constant-numeric-int-lflang">3</span><span class="source-lf">, </span><span class="source-lf constant-numeric-int-lflang">4</span><span class="source-lf">), n_sequence</span><span class="source-lf keyword-operator-lflang">=</span><span class="source-lf constant-numeric-int-lflang">4</span><span class="source-lf">);</span>
</pre>
<h3 id="array-values-for-states" style="position:relative;"><a href="#array-values-for-states" aria-label="array values for states permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Array Values for States</h3>
<p>A state variable can also have an array value. For example, the [MovingAverage] (<a href="https://github.com/lf-lang/lingua-franca/blob/master/test/C/src/MovingAverage.lf">https://github.com/lf-lang/lingua-franca/blob/master/test/C/src/MovingAverage.lf</a>) reactor computes the <strong>moving average</strong> of the last four inputs each time it receives an input:</p>
<pre class="source-lf language-lf-c"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">MovingAverage</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">state</span><span class="source-lf"> delay_line:</span><span class="source-lf storage-type-primitive-cpp storage-type-built-in-primitive-cpp">double</span><span class="source-lf">[]</span><span class="source-lf">(</span><span class="source-lf constant-numeric-float-lflang">0.0</span><span class="source-lf">, </span><span class="source-lf constant-numeric-float-lflang">0.0</span><span class="source-lf">, </span><span class="source-lf constant-numeric-float-lflang">0.0</span><span class="source-lf">);</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">state</span><span class="source-lf"> index:</span><span class="source-lf storage-type-primitive-cpp storage-type-built-in-primitive-cpp">int</span><span class="source-lf">(</span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">);</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">input</span><span class="source-lf"> in:</span><span class="source-lf storage-type-primitive-cpp storage-type-built-in-primitive-cpp">double</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">output</span><span class="source-lf"> out:</span><span class="source-lf storage-type-primitive-cpp storage-type-built-in-primitive-cpp">double</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(in) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> out </span><span class="source-lf meta-embedded-block-c">{=</span>
<span class="source-lf meta-embedded-block-c comment-line-double-slash-cpp">        </span><span class="source-lf meta-embedded-block-c comment-line-double-slash-cpp punctuation-definition-comment-cpp">//</span><span class="source-lf meta-embedded-block-c comment-line-double-slash-cpp"> Calculate the output.</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c storage-type-primitive-cpp storage-type-built-in-primitive-cpp">double</span><span class="source-lf meta-embedded-block-c"> sum </span><span class="source-lf meta-embedded-block-c keyword-operator-assignment-cpp">=</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c variable-other-object-access-cpp">in</span><span class="source-lf meta-embedded-block-c punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c variable-other-property-cpp">value</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c keyword-control-for-cpp">for</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-section-parens-begin-bracket-round-cpp">(</span><span class="source-lf meta-embedded-block-c meta-parens-cpp storage-type-primitive-cpp storage-type-built-in-primitive-cpp">int</span><span class="source-lf meta-embedded-block-c meta-parens-cpp"> i </span><span class="source-lf meta-embedded-block-c meta-parens-cpp keyword-operator-assignment-cpp">=</span><span class="source-lf meta-embedded-block-c meta-parens-cpp"> </span><span class="source-lf meta-embedded-block-c meta-parens-cpp constant-numeric-decimal-cpp">0</span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-terminator-statement-cpp">;</span><span class="source-lf meta-embedded-block-c meta-parens-cpp"> i </span><span class="source-lf meta-embedded-block-c meta-parens-cpp keyword-operator-comparison-cpp">&lt;</span><span class="source-lf meta-embedded-block-c meta-parens-cpp"> </span><span class="source-lf meta-embedded-block-c meta-parens-cpp constant-numeric-decimal-cpp">3</span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-terminator-statement-cpp">;</span><span class="source-lf meta-embedded-block-c meta-parens-cpp"> i</span><span class="source-lf meta-embedded-block-c meta-parens-cpp keyword-operator-increment-cpp">++</span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-section-parens-end-bracket-round-cpp">)</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-section-block-begin-bracket-curly-cpp">{</span>
<span class="source-lf meta-embedded-block-c meta-block-cpp">            sum </span><span class="source-lf meta-embedded-block-c meta-block-cpp keyword-operator-assignment-compound-cpp">+=</span><span class="source-lf meta-embedded-block-c meta-block-cpp"> </span><span class="source-lf meta-embedded-block-c meta-block-cpp variable-other-object-access-cpp">self</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c meta-block-cpp variable-other-property-cpp">delay_line</span><span class="source-lf meta-embedded-block-c meta-block-cpp meta-bracket-square-access punctuation-definition-begin-bracket-square">[</span><span class="source-lf meta-embedded-block-c meta-block-cpp meta-bracket-square-access">i</span><span class="source-lf meta-embedded-block-c meta-block-cpp meta-bracket-square-access punctuation-definition-end-bracket-square">]</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c meta-block-cpp">        </span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-section-block-end-bracket-curly-cpp">}</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c entity-name-function-call-cpp">lf_set</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c">out</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> sum</span><span class="source-lf meta-embedded-block-c keyword-operator-cpp">/</span><span class="source-lf meta-embedded-block-c constant-numeric-decimal-cpp">4</span><span class="source-lf meta-embedded-block-c constant-numeric-decimal-point-cpp">.</span><span class="source-lf meta-embedded-block-c constant-numeric-decimal-cpp">0</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c"></span>
<span class="source-lf meta-embedded-block-c comment-line-double-slash-cpp">        </span><span class="source-lf meta-embedded-block-c comment-line-double-slash-cpp punctuation-definition-comment-cpp">//</span><span class="source-lf meta-embedded-block-c comment-line-double-slash-cpp"> Insert the input in the delay line.</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c variable-other-object-access-cpp">self</span><span class="source-lf meta-embedded-block-c punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c variable-other-property-cpp">delay_line</span><span class="source-lf meta-embedded-block-c meta-bracket-square-access punctuation-definition-begin-bracket-square">[</span><span class="source-lf meta-embedded-block-c meta-bracket-square-access variable-other-object-access-cpp">self</span><span class="source-lf meta-embedded-block-c meta-bracket-square-access punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c meta-bracket-square-access variable-other-property-cpp">index</span><span class="source-lf meta-embedded-block-c meta-bracket-square-access punctuation-definition-end-bracket-square">]</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c keyword-operator-assignment-cpp">=</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c variable-other-object-access-cpp">in</span><span class="source-lf meta-embedded-block-c punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c variable-other-property-cpp">value</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c"></span>
<span class="source-lf meta-embedded-block-c comment-line-double-slash-cpp">        </span><span class="source-lf meta-embedded-block-c comment-line-double-slash-cpp punctuation-definition-comment-cpp">//</span><span class="source-lf meta-embedded-block-c comment-line-double-slash-cpp"> Update the index for the next input.</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c variable-other-object-access-cpp">self</span><span class="source-lf meta-embedded-block-c punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c variable-other-property-cpp">index</span><span class="source-lf meta-embedded-block-c keyword-operator-increment-cpp">++</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c keyword-control-if-cpp">if</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-section-parens-begin-bracket-round-cpp">(</span><span class="source-lf meta-embedded-block-c meta-parens-cpp variable-other-object-access-cpp">self</span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c meta-parens-cpp variable-other-property-cpp">index</span><span class="source-lf meta-embedded-block-c meta-parens-cpp"> </span><span class="source-lf meta-embedded-block-c meta-parens-cpp keyword-operator-comparison-cpp">&gt;=</span><span class="source-lf meta-embedded-block-c meta-parens-cpp"> </span><span class="source-lf meta-embedded-block-c meta-parens-cpp constant-numeric-decimal-cpp">3</span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-section-parens-end-bracket-round-cpp">)</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-section-block-begin-bracket-curly-cpp">{</span>
<span class="source-lf meta-embedded-block-c meta-block-cpp">            </span><span class="source-lf meta-embedded-block-c meta-block-cpp variable-other-object-access-cpp">self</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c meta-block-cpp variable-other-property-cpp">index</span><span class="source-lf meta-embedded-block-c meta-block-cpp"> </span><span class="source-lf meta-embedded-block-c meta-block-cpp keyword-operator-assignment-cpp">=</span><span class="source-lf meta-embedded-block-c meta-block-cpp"> </span><span class="source-lf meta-embedded-block-c meta-block-cpp constant-numeric-decimal-cpp">0</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c meta-block-cpp">        </span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-section-block-end-bracket-curly-cpp">}</span>
<span class="source-lf meta-embedded-block-c">    </span><span class="source-lf meta-embedded-block-c">=}</span>
<span class="source-lf">}</span>
</pre>
<p>The second line declares that the type of the state variable is an array of <code>double</code>s with the initial value of the array being a three-element array filled with zeros.</p>
<h3 id="states-and-parameters-with-struct-values" style="position:relative;"><a href="#states-and-parameters-with-struct-values" aria-label="states and parameters with struct values permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>States and Parameters with Struct Values</h3>
<p>States whose type are structs can similarly be initialized. This <a href="https://github.com/lf-lang/lingua-franca/blob/master/test/C/src/StructAsState.lf">StructAsState</a> example illustrates this:</p>
<pre class="source-lf language-lf-c"><span class="source-lf meta-targetspec-lflang keyword-control-lflang">target</span><span class="source-lf meta-targetspec-lflang"> </span><span class="source-lf meta-targetspec-lflang constant-language-lflang">C</span><span class="source-lf meta-targetspec-lflang">;</span>
<span class="source-lf storage-modifier-lflang">main</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">StructAsState</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">preamble</span><span class="source-lf"> </span><span class="source-lf meta-embedded-block-c">{=</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c keyword-other-typedef-cpp">typedef</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-head-struct-cpp storage-type-struct-cpp">struct</span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp"> </span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp entity-name-type-struct-cpp">hello_t</span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp"> </span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-head-struct-cpp punctuation-section-block-begin-bracket-curly-struct-cpp">{</span>
<span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-body-struct-cpp">            </span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-body-struct-cpp storage-type-primitive-cpp storage-type-built-in-primitive-cpp">char</span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-body-struct-cpp keyword-operator-cpp">*</span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-body-struct-cpp"> name</span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-body-struct-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-body-struct-cpp">            </span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-body-struct-cpp storage-type-primitive-cpp storage-type-built-in-primitive-cpp">int</span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-body-struct-cpp"> value</span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-body-struct-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-body-struct-cpp">        </span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-body-struct-cpp punctuation-section-block-end-bracket-curly-struct-cpp">}</span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-tail-struct-cpp"> </span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-tail-struct-cpp support-type-posix-reserved-cpp support-type-built-in-posix-reserved-cpp">hello_t</span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">    </span><span class="source-lf meta-embedded-block-c">=}</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">state</span><span class="source-lf"> s:</span><span class="source-lf support-type-posix-reserved-cpp support-type-built-in-posix-reserved-cpp">hello_t</span><span class="source-lf">(</span><span class="source-lf string-quoted-double-lflang">&quot;</span><span class="source-lf string-quoted-double-lflang">Earth</span><span class="source-lf string-quoted-double-lflang">&quot;</span><span class="source-lf">, </span><span class="source-lf constant-numeric-int-lflang">42</span><span class="source-lf">);</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(</span><span class="source-lf support-variable-lflang">startup</span><span class="source-lf">) </span><span class="source-lf meta-embedded-block-c">{=</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c entity-name-function-call-cpp">printf</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp punctuation-definition-string-begin-cpp">&quot;</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp">State s.name=</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp constant-character-escape-cpp">\&quot;</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp constant-other-placeholder">%s</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp constant-character-escape-cpp">\&quot;</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp">, value=</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp constant-other-placeholder">%d</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp">.</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp constant-character-escape-cpp">\n</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp punctuation-definition-string-end-cpp">&quot;</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c variable-other-object-access-cpp">self</span><span class="source-lf meta-embedded-block-c punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c variable-other-object-property-cpp">s</span><span class="source-lf meta-embedded-block-c punctuation-separator-dot-access-cpp">.</span><span class="source-lf meta-embedded-block-c variable-other-property-cpp">name</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c variable-other-object-access-cpp">self</span><span class="source-lf meta-embedded-block-c punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c variable-other-object-property-cpp">s</span><span class="source-lf meta-embedded-block-c punctuation-separator-dot-access-cpp">.</span><span class="source-lf meta-embedded-block-c variable-other-property-cpp">value</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">    </span><span class="source-lf meta-embedded-block-c">=}</span>
<span class="source-lf">}</span>
</pre>
<p>Notice that state <code>s</code> is given type <code>hello_t</code>, which is defined in the <span class="lf_keywords">preamble</span>. The initial value just lists the initial values of each of the fields of the struct in the order they are declared.</p>
<p>Parameters are similar:</p>
<pre class="source-lf language-lf-c"><span class="source-lf meta-targetspec-lflang keyword-control-lflang">target</span><span class="source-lf meta-targetspec-lflang"> </span><span class="source-lf meta-targetspec-lflang constant-language-lflang">C</span><span class="source-lf meta-targetspec-lflang">;</span>
<span class="source-lf storage-modifier-lflang">main</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">StructParameter</span><span class="source-lf">(p:hello_t(</span><span class="source-lf string-quoted-double-lflang">&quot;</span><span class="source-lf string-quoted-double-lflang">Earth</span><span class="source-lf string-quoted-double-lflang">&quot;</span><span class="source-lf">, </span><span class="source-lf constant-numeric-int-lflang">42</span><span class="source-lf">)) {</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">preamble</span><span class="source-lf"> </span><span class="source-lf meta-embedded-block-c">{=</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c keyword-other-typedef-cpp">typedef</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-head-struct-cpp storage-type-struct-cpp">struct</span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp"> </span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp entity-name-type-struct-cpp">hello_t</span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp"> </span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-head-struct-cpp punctuation-section-block-begin-bracket-curly-struct-cpp">{</span>
<span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-body-struct-cpp">            </span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-body-struct-cpp storage-type-primitive-cpp storage-type-built-in-primitive-cpp">char</span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-body-struct-cpp keyword-operator-cpp">*</span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-body-struct-cpp"> name</span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-body-struct-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-body-struct-cpp">            </span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-body-struct-cpp storage-type-primitive-cpp storage-type-built-in-primitive-cpp">int</span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-body-struct-cpp"> value</span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-body-struct-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-body-struct-cpp">        </span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-body-struct-cpp punctuation-section-block-end-bracket-curly-struct-cpp">}</span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-tail-struct-cpp"> </span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-tail-struct-cpp support-type-posix-reserved-cpp support-type-built-in-posix-reserved-cpp">hello_t</span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">    </span><span class="source-lf meta-embedded-block-c">=}</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(</span><span class="source-lf support-variable-lflang">startup</span><span class="source-lf">) </span><span class="source-lf meta-embedded-block-c">{=</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c entity-name-function-call-cpp">printf</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp punctuation-definition-string-begin-cpp">&quot;</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp">Parameter p.name=</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp constant-character-escape-cpp">\&quot;</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp constant-other-placeholder">%s</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp constant-character-escape-cpp">\&quot;</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp">, value=</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp constant-other-placeholder">%d</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp">.</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp constant-character-escape-cpp">\n</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp punctuation-definition-string-end-cpp">&quot;</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c variable-other-object-access-cpp">self</span><span class="source-lf meta-embedded-block-c punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c variable-other-object-property-cpp">p</span><span class="source-lf meta-embedded-block-c punctuation-separator-dot-access-cpp">.</span><span class="source-lf meta-embedded-block-c variable-other-property-cpp">name</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c variable-other-object-access-cpp">self</span><span class="source-lf meta-embedded-block-c punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c variable-other-object-property-cpp">p</span><span class="source-lf meta-embedded-block-c punctuation-separator-dot-access-cpp">.</span><span class="source-lf meta-embedded-block-c variable-other-property-cpp">value</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c keyword-control-if-cpp">if</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-section-parens-begin-bracket-round-cpp">(</span><span class="source-lf meta-embedded-block-c meta-parens-cpp variable-other-object-access-cpp">self</span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c meta-parens-cpp variable-other-object-property-cpp">p</span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-separator-dot-access-cpp">.</span><span class="source-lf meta-embedded-block-c meta-parens-cpp variable-other-property-cpp">value</span><span class="source-lf meta-embedded-block-c meta-parens-cpp"> </span><span class="source-lf meta-embedded-block-c meta-parens-cpp keyword-operator-comparison-cpp">!=</span><span class="source-lf meta-embedded-block-c meta-parens-cpp"> </span><span class="source-lf meta-embedded-block-c meta-parens-cpp constant-numeric-decimal-cpp">42</span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-section-parens-end-bracket-round-cpp">)</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-section-block-begin-bracket-curly-cpp">{</span>
<span class="source-lf meta-embedded-block-c meta-block-cpp">            </span><span class="source-lf meta-embedded-block-c meta-block-cpp entity-name-function-call-cpp">fprintf</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c meta-block-cpp">stderr</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c meta-block-cpp"> </span><span class="source-lf meta-embedded-block-c meta-block-cpp string-quoted-double-cpp punctuation-definition-string-begin-cpp">&quot;</span><span class="source-lf meta-embedded-block-c meta-block-cpp string-quoted-double-cpp">FAILED: Expected 42.</span><span class="source-lf meta-embedded-block-c meta-block-cpp string-quoted-double-cpp constant-character-escape-cpp">\n</span><span class="source-lf meta-embedded-block-c meta-block-cpp string-quoted-double-cpp punctuation-definition-string-end-cpp">&quot;</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c meta-block-cpp">            </span><span class="source-lf meta-embedded-block-c meta-block-cpp entity-name-function-call-cpp">exit</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c meta-block-cpp constant-numeric-decimal-cpp">1</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c meta-block-cpp">        </span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-section-block-end-bracket-curly-cpp">}</span>
<span class="source-lf meta-embedded-block-c">    </span><span class="source-lf meta-embedded-block-c">=}</span>
<span class="source-lf">}</span>
</pre>
</div>
<div class="lf-cpp">
<p>Reactor parameters internally declared as <code>const</code> by the code generator and initialized during reactor instantiation. Thus, the value of a parameter may not be changed. See <a href="/docs/handbook/parameters-and-state-variables">Parameters and State</a> for examples.</p>
<h3 id="array-valued-parameters" style="position:relative;"><a href="#array-valued-parameters" aria-label="array valued parameters permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Array-Valued Parameters</h3>
<p>Also parameters can have fixed- or variable-sized array values. The <a href="https://github.com/lf-lang/lingua-franca/blob/master/test/C/src/ArrayAsParameter.lf">ArrayAsParameter</a> example outputs the elements of an array as a sequence of individual messages:</p>
<pre class="source-lf language-lf-cpp"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Source</span><span class="source-lf">(sequence:int<span class="</span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">, </span><span class="source-lf constant-numeric-int-lflang">1</span><span class="source-lf">, </span><span class="source-lf constant-numeric-int-lflang">2</span><span class="source-lf">"></span>) {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">output</span><span class="source-lf"> out:</span><span class="source-lf storage-type-primitive-cpp storage-type-built-in-primitive-cpp">int</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">state</span><span class="source-lf"> count:</span><span class="source-lf storage-type-primitive-cpp storage-type-built-in-primitive-cpp">int</span><span class="source-lf">(</span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">);</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">logical</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">action</span><span class="source-lf"> next:</span><span class="source-lf storage-type-primitive-cpp storage-type-built-in-primitive-cpp">void</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(</span><span class="source-lf support-variable-lflang">startup</span><span class="source-lf">, next) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> out, next </span><span class="source-lf meta-embedded-block-cpp">{=</span>
<span class="source-lf meta-embedded-block-cpp">        </span><span class="source-lf meta-embedded-block-cpp variable-other-object-access-cpp">out</span><span class="source-lf meta-embedded-block-cpp punctuation-separator-dot-access-cpp">.</span><span class="source-lf meta-embedded-block-cpp entity-name-function-member-cpp">set</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-begin-bracket-round-function-member-cpp">(</span><span class="source-lf meta-embedded-block-cpp meta-bracket-square-access variable-other-object">sequence</span><span class="source-lf meta-embedded-block-cpp meta-bracket-square-access punctuation-definition-begin-bracket-square">[</span><span class="source-lf meta-embedded-block-cpp meta-bracket-square-access">count</span><span class="source-lf meta-embedded-block-cpp meta-bracket-square-access punctuation-definition-end-bracket-square">]</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-end-bracket-round-function-member-cpp">)</span><span class="source-lf meta-embedded-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-cpp">        count</span><span class="source-lf meta-embedded-block-cpp keyword-operator-increment-cpp">++</span><span class="source-lf meta-embedded-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-cpp">        </span><span class="source-lf meta-embedded-block-cpp keyword-control-if-cpp">if</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp punctuation-section-parens-begin-bracket-round-cpp">(</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp">count </span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp keyword-operator-comparison-cpp">&lt;</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp"> </span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp variable-other-object-access-cpp">sequence</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp punctuation-separator-dot-access-cpp">.</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp entity-name-function-member-cpp">size</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp punctuation-section-arguments-begin-bracket-round-function-member-cpp">(</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp punctuation-section-arguments-end-bracket-round-function-member-cpp">)</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp punctuation-section-parens-end-bracket-round-cpp">)</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp meta-block-cpp punctuation-section-block-begin-bracket-curly-cpp">{</span>
<span class="source-lf meta-embedded-block-cpp meta-block-cpp">            </span><span class="source-lf meta-embedded-block-cpp meta-block-cpp variable-other-object-access-cpp">next</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp punctuation-separator-dot-access-cpp">.</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp entity-name-function-member-cpp">schedule</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp punctuation-section-arguments-begin-bracket-round-function-member-cpp">(</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp punctuation-section-arguments-end-bracket-round-function-member-cpp">)</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-cpp meta-block-cpp">        </span><span class="source-lf meta-embedded-block-cpp meta-block-cpp punctuation-section-block-end-bracket-curly-cpp">}</span>
<span class="source-lf meta-embedded-block-cpp">    </span><span class="source-lf meta-embedded-block-cpp">=}</span>
<span class="source-lf">}</span>
</pre>
<p>Note that curly braces <code>{...}</code> can be used for initialization instead of parentheses to better match C++ syntax.</p>
<p>Note that also the main reactor can be parameterized:</p>
<pre class="source-lf language-lf-cpp"><span class="source-lf storage-modifier-lflang">main</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Hello</span><span class="source-lf">(msg: </span><span class="source-lf variable-other-constant-reactorinstance-lflang">std</span><span class="source-lf keyword-operator-lflang">::</span><span class="source-lf variable-other-lflang">string</span><span class="source-lf">(</span><span class="source-lf string-quoted-double-lflang">&quot;</span><span class="source-lf string-quoted-double-lflang">World</span><span class="source-lf string-quoted-double-lflang">&quot;</span><span class="source-lf">)) {</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(</span><span class="source-lf support-variable-lflang">startup</span><span class="source-lf">) </span><span class="source-lf meta-embedded-block-cpp">{=</span>
<span class="source-lf meta-embedded-block-cpp">        </span><span class="source-lf meta-embedded-block-cpp entity-name-scope-resolution-cpp">std</span><span class="source-lf meta-embedded-block-cpp punctuation-separator-namespace-access-cpp punctuation-separator-scope-resolution-cpp">::</span><span class="source-lf meta-embedded-block-cpp">cout </span><span class="source-lf meta-embedded-block-cpp keyword-operator-bitwise-shift-cpp">&lt;&lt;</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp string-quoted-double-cpp punctuation-definition-string-begin-cpp">&quot;</span><span class="source-lf meta-embedded-block-cpp string-quoted-double-cpp">Hello </span><span class="source-lf meta-embedded-block-cpp string-quoted-double-cpp punctuation-definition-string-end-cpp">&quot;</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp keyword-operator-bitwise-shift-cpp">&lt;&lt;</span><span class="source-lf meta-embedded-block-cpp"> msg </span><span class="source-lf meta-embedded-block-cpp keyword-operator-bitwise-shift-cpp">&lt;&lt;</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp string-quoted-double-cpp punctuation-definition-string-begin-cpp">&quot;</span><span class="source-lf meta-embedded-block-cpp string-quoted-double-cpp">!</span><span class="source-lf meta-embedded-block-cpp string-quoted-double-cpp constant-character-escape-cpp">\n</span><span class="source-lf meta-embedded-block-cpp string-quoted-double-cpp punctuation-definition-string-end-cpp">&quot;</span><span class="source-lf meta-embedded-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-cpp">    </span><span class="source-lf meta-embedded-block-cpp">=}</span>
<span class="source-lf">}</span>
</pre>
<p>This program will print “Hello World!” by default. However, since <code>msg</code> is a main reactor parameter, the C++ code generator will extend the CLI argument parser and allow to overwrite <code>msg</code> when invoking the program. For instance,</p>
<pre class="source-lf language-sh"><span class="source-shell">bin/Hello --msg Earth</span>
</pre>
<p>will result in “Hello Earth!” being printed.</p>
<h3 id="state-variables" style="position:relative;"><a href="#state-variables" aria-label="state variables permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>State Variables</h3>
<p>A reactor may declare state variables, which become properties of each instance of the reactor. For example, the following reactor (see <a href="https://github.com/lf-lang/lingua-franca/blob/master/test/Cpp/src/lib/Count.lf">Count.lf</a> and <a href="https://github.com/lf-lang/lingua-franca/blob/master/test/Cpp/src/CountTest.lf">CountTest.lf</a>) will produce the output sequence 1, 2, 3, … :</p>
<pre class="source-lf language-lf-cpp"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Count</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">state</span><span class="source-lf"> i:</span><span class="source-lf storage-type-primitive-cpp storage-type-built-in-primitive-cpp">int</span><span class="source-lf">(</span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">);</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">output</span><span class="source-lf"> c:</span><span class="source-lf storage-type-primitive-cpp storage-type-built-in-primitive-cpp">int</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">timer</span><span class="source-lf"> t(</span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">, </span><span class="source-lf constant-numeric-int-lflang">1</span><span class="source-lf"> </span><span class="source-lf constant-numeric-lflang">sec</span><span class="source-lf">);</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(t) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> c </span><span class="source-lf meta-embedded-block-cpp">{=</span>
<span class="source-lf meta-embedded-block-cpp">        i</span><span class="source-lf meta-embedded-block-cpp keyword-operator-increment-cpp">++</span><span class="source-lf meta-embedded-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-cpp">        </span><span class="source-lf meta-embedded-block-cpp variable-other-object-access-cpp">c</span><span class="source-lf meta-embedded-block-cpp punctuation-separator-dot-access-cpp">.</span><span class="source-lf meta-embedded-block-cpp entity-name-function-member-cpp">set</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-begin-bracket-round-function-member-cpp">(</span><span class="source-lf meta-embedded-block-cpp">i</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-end-bracket-round-function-member-cpp">)</span><span class="source-lf meta-embedded-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-cpp">    </span><span class="source-lf meta-embedded-block-cpp">=}</span>
<span class="source-lf">}</span>
</pre>
<p>The declaration on the second line gives the variable the name <code>count</code>, declares its type to be <code>int</code>, and initializes its value to 0. The type and initial value can be enclosed in the C++-code delimiters <code>{= ... =}</code> if they are not simple identifiers, but in this case, that is not necessary.</p>
<p>In the body of the reaction, the state variable is automatically in scope and can be referenced directly by its name. Since all reactions, state variables and also parameters of a reactor are members of the same class, reactions can also reference state variables (or parameters) using the this pointer: <code>this->name</code>.</p>
<p>A state variable may be a time value, declared as follows:</p>
<pre class="source-lf language-lf-cpp"><span class="source-lf storage-modifier-lflang">state</span><span class="source-lf"> time_value:</span><span class="source-lf entity-name-function-call-cpp">time</span><span class="source-lf punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf constant-numeric-decimal-cpp">100</span><span class="source-lf"> msec</span><span class="source-lf punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf">;</span>
</pre>
<p>The type of the generated <code>time_value</code> variable will be <code>reactor::Duration</code>, which is an alias for <a href="https://en.cppreference.com/w/cpp/chrono/duration"><code>std::chrono::nanoseconds</code></a>.</p>
<p>For the C++ target, Lingua Franca provides two alternative styles for initializing state variables. We can write <code>state foo:int(42)</code> or <code>state foo:int{42}</code>. This allows to distinguish between the different initialization styles in C++. <code>foo:int(42)</code> will be translated to <code>int foo(42)</code> and <code> foo:int{42}</code> will be translated to <code>int foo{42}</code> in the generated code. Generally speaking, the <code>{...}</code> style should be preferred in C++, but it is not always applicable. Hence we allow the LF programmer to choose the style. Due to the peculiarities of C++, this is particularly important for more complex data types. For instance, <code>state foo:std::vector&#x3C;int>(4,2)</code> would be initialized to the list <code>[2,2,2,2]</code> whereas <code>state foo:std::vector&#x3C;int>{4,2}</code> would be initialized to the list <code>[4,2]</code>.</p>
<p>State variables can have array values. For example, the [MovingAverage] (<a href="https://github.com/lf-lang/lingua-franca/blob/master/test/Cpp/src/MovingAverage.lf">https://github.com/lf-lang/lingua-franca/blob/master/test/Cpp/src/MovingAverage.lf</a>) reactor computes the <strong>moving average</strong> of the last four inputs each time it receives an input:</p>
<pre class="source-lf language-lf-cpp"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">MovingAverageImpl</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">state</span><span class="source-lf"> delay_line:</span><span class="source-lf storage-type-primitive-cpp storage-type-built-in-primitive-cpp">double</span><span class="source-lf meta-bracket-square-access punctuation-definition-begin-bracket-square">[</span><span class="source-lf meta-bracket-square-access constant-numeric-decimal-cpp">3</span><span class="source-lf meta-bracket-square-access punctuation-definition-end-bracket-square">]</span><span class="source-lf meta-block-cpp punctuation-section-block-begin-bracket-curly-cpp">{</span><span class="source-lf meta-block-cpp constant-numeric-decimal-cpp">0</span><span class="source-lf meta-block-cpp constant-numeric-decimal-point-cpp">.</span><span class="source-lf meta-block-cpp constant-numeric-decimal-cpp">0</span><span class="source-lf meta-block-cpp punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-block-cpp"> </span><span class="source-lf meta-block-cpp constant-numeric-decimal-cpp">0</span><span class="source-lf meta-block-cpp constant-numeric-decimal-point-cpp">.</span><span class="source-lf meta-block-cpp constant-numeric-decimal-cpp">0</span><span class="source-lf meta-block-cpp punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-block-cpp"> </span><span class="source-lf meta-block-cpp constant-numeric-decimal-cpp">0</span><span class="source-lf meta-block-cpp constant-numeric-decimal-point-cpp">.</span><span class="source-lf meta-block-cpp constant-numeric-decimal-cpp">0</span><span class="source-lf meta-block-cpp punctuation-section-block-end-bracket-curly-cpp">}</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">state</span><span class="source-lf"> index:</span><span class="source-lf storage-type-primitive-cpp storage-type-built-in-primitive-cpp">int</span><span class="source-lf">(</span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">);</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">input</span><span class="source-lf"> in:</span><span class="source-lf storage-type-primitive-cpp storage-type-built-in-primitive-cpp">double</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">output</span><span class="source-lf"> out:</span><span class="source-lf storage-type-primitive-cpp storage-type-built-in-primitive-cpp">double</span><span class="source-lf">;</span>
<span class="source-lf"></span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(in) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> out </span><span class="source-lf meta-embedded-block-cpp">{=</span>
<span class="source-lf meta-embedded-block-cpp comment-line-double-slash-cpp">        </span><span class="source-lf meta-embedded-block-cpp comment-line-double-slash-cpp punctuation-definition-comment-cpp">//</span><span class="source-lf meta-embedded-block-cpp comment-line-double-slash-cpp"> Calculate the output.</span>
<span class="source-lf meta-embedded-block-cpp">        </span><span class="source-lf meta-embedded-block-cpp storage-type-primitive-cpp storage-type-built-in-primitive-cpp">double</span><span class="source-lf meta-embedded-block-cpp"> sum </span><span class="source-lf meta-embedded-block-cpp keyword-operator-assignment-cpp">=</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp keyword-operator-cpp">*</span><span class="source-lf meta-embedded-block-cpp variable-other-object-access-cpp">in</span><span class="source-lf meta-embedded-block-cpp punctuation-separator-dot-access-cpp">.</span><span class="source-lf meta-embedded-block-cpp entity-name-function-member-cpp">get</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-begin-bracket-round-function-member-cpp">(</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-end-bracket-round-function-member-cpp">)</span><span class="source-lf meta-embedded-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-cpp">        </span><span class="source-lf meta-embedded-block-cpp keyword-control-for-cpp">for</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp punctuation-section-parens-begin-bracket-round-cpp">(</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp storage-type-primitive-cpp storage-type-built-in-primitive-cpp">int</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp"> i </span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp keyword-operator-assignment-cpp">=</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp"> </span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp constant-numeric-decimal-cpp">0</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp punctuation-terminator-statement-cpp">;</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp"> i </span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp keyword-operator-comparison-cpp">&lt;</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp"> </span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp constant-numeric-decimal-cpp">3</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp punctuation-terminator-statement-cpp">;</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp"> i</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp keyword-operator-increment-cpp">++</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp punctuation-section-parens-end-bracket-round-cpp">)</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp meta-block-cpp punctuation-section-block-begin-bracket-curly-cpp">{</span>
<span class="source-lf meta-embedded-block-cpp meta-block-cpp">            sum </span><span class="source-lf meta-embedded-block-cpp meta-block-cpp keyword-operator-assignment-compound-cpp">+=</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp meta-block-cpp meta-bracket-square-access variable-other-object">delay_line</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp meta-bracket-square-access punctuation-definition-begin-bracket-square">[</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp meta-bracket-square-access">i</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp meta-bracket-square-access punctuation-definition-end-bracket-square">]</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-cpp meta-block-cpp">        </span><span class="source-lf meta-embedded-block-cpp meta-block-cpp punctuation-section-block-end-bracket-curly-cpp">}</span>
<span class="source-lf meta-embedded-block-cpp">        </span><span class="source-lf meta-embedded-block-cpp variable-other-object-access-cpp">out</span><span class="source-lf meta-embedded-block-cpp punctuation-separator-dot-access-cpp">.</span><span class="source-lf meta-embedded-block-cpp entity-name-function-member-cpp">set</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-begin-bracket-round-function-member-cpp">(</span><span class="source-lf meta-embedded-block-cpp">sum</span><span class="source-lf meta-embedded-block-cpp keyword-operator-cpp">/</span><span class="source-lf meta-embedded-block-cpp constant-numeric-decimal-cpp">4</span><span class="source-lf meta-embedded-block-cpp constant-numeric-decimal-point-cpp">.</span><span class="source-lf meta-embedded-block-cpp constant-numeric-decimal-cpp">0</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-end-bracket-round-function-member-cpp">)</span><span class="source-lf meta-embedded-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-cpp"></span>
<span class="source-lf meta-embedded-block-cpp comment-line-double-slash-cpp">        </span><span class="source-lf meta-embedded-block-cpp comment-line-double-slash-cpp punctuation-definition-comment-cpp">//</span><span class="source-lf meta-embedded-block-cpp comment-line-double-slash-cpp"> Insert the input in the delay line.</span>
<span class="source-lf meta-embedded-block-cpp">        </span><span class="source-lf meta-embedded-block-cpp meta-bracket-square-access variable-other-object">delay_line</span><span class="source-lf meta-embedded-block-cpp meta-bracket-square-access punctuation-definition-begin-bracket-square">[</span><span class="source-lf meta-embedded-block-cpp meta-bracket-square-access">index</span><span class="source-lf meta-embedded-block-cpp meta-bracket-square-access punctuation-definition-end-bracket-square">]</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp keyword-operator-assignment-cpp">=</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp keyword-operator-cpp">*</span><span class="source-lf meta-embedded-block-cpp variable-other-object-access-cpp">in</span><span class="source-lf meta-embedded-block-cpp punctuation-separator-dot-access-cpp">.</span><span class="source-lf meta-embedded-block-cpp entity-name-function-member-cpp">get</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-begin-bracket-round-function-member-cpp">(</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-end-bracket-round-function-member-cpp">)</span><span class="source-lf meta-embedded-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-cpp"></span>
<span class="source-lf meta-embedded-block-cpp comment-line-double-slash-cpp">        </span><span class="source-lf meta-embedded-block-cpp comment-line-double-slash-cpp punctuation-definition-comment-cpp">//</span><span class="source-lf meta-embedded-block-cpp comment-line-double-slash-cpp"> Update the index for the next input.</span>
<span class="source-lf meta-embedded-block-cpp">        index</span><span class="source-lf meta-embedded-block-cpp keyword-operator-increment-cpp">++</span><span class="source-lf meta-embedded-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-cpp">        </span><span class="source-lf meta-embedded-block-cpp keyword-control-if-cpp">if</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp punctuation-section-parens-begin-bracket-round-cpp">(</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp">index </span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp keyword-operator-comparison-cpp">&gt;=</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp"> </span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp constant-numeric-decimal-cpp">3</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp punctuation-section-parens-end-bracket-round-cpp">)</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp meta-block-cpp punctuation-section-block-begin-bracket-curly-cpp">{</span>
<span class="source-lf meta-embedded-block-cpp meta-block-cpp">            index </span><span class="source-lf meta-embedded-block-cpp meta-block-cpp keyword-operator-assignment-cpp">=</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp meta-block-cpp constant-numeric-decimal-cpp">0</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-cpp meta-block-cpp">        </span><span class="source-lf meta-embedded-block-cpp meta-block-cpp punctuation-section-block-end-bracket-curly-cpp">}</span>
<span class="source-lf meta-embedded-block-cpp">    </span><span class="source-lf meta-embedded-block-cpp">=}</span>
<span class="source-lf">}</span>
</pre>
<p>The second line declares that the type of the state variable is an fixed-size array of 3 <code>double</code>s with the initial value of the being filled with zeros (note the curly braces). If the size is given in the type specification, then the code generator will declare the type of the state variable using <a href="https://en.cppreference.com/w/cpp/container/array"><code>std::array</code></a>. In the example above, the type of <code>delay_line</code> is <code>std::array&#x3C;3, double></code>. If the size specifier is omitted (e.g. <code>state x:double[]</code>). The code generator will produce a variable-sized array using <a href="https://en.cppreference.com/w/cpp/container/vector"><code>std::vector</code></a>.</p>
<p>State variables with more complex types such as classes or structs can be similarly initialized. See <a href="https://github.com/lf-lang/lingua-franca/blob/master/test/Cpp/src/StructAsState.lf">StructAsState.lf</a>.</p>
</div>
<div class="lf-py">
<p>Reactor parameters and state variables are referenced in the Python code using
the syntax <code>self.&#x3C;name></code>, where <code>&#x3C;name></code> is the name of the parameter or state
variable. The following
<a href="https://github.com/lf-lang/lingua-franca/blob/master/test/Python/src/Stride.lf">Stride</a>
example modifies the <code>Count</code> reactor in <a href="/docs/handbook/parameters-and-state-variables#state-declaration">State
Declaration</a> to
include both a parameter and a state variable:</p>
<pre class="source-lf language-lf-py"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Count</span><span class="source-lf">(stride(</span><span class="source-lf constant-numeric-int-lflang">1</span><span class="source-lf">)) {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">state</span><span class="source-lf"> count(</span><span class="source-lf constant-numeric-int-lflang">1</span><span class="source-lf">);</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">output</span><span class="source-lf"> y;</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">timer</span><span class="source-lf"> t(</span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">, </span><span class="source-lf constant-numeric-int-lflang">100</span><span class="source-lf"> </span><span class="source-lf constant-numeric-lflang">msec</span><span class="source-lf">);</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(t) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> y </span><span class="source-lf meta-embedded-block-py">{=</span>
<span class="source-lf meta-embedded-block-py">        </span><span class="source-lf meta-embedded-block-py">y</span><span class="source-lf meta-embedded-block-py meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-generic-python">set</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python punctuation-definition-arguments-begin-python">(</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python variable-language-special-self-python">self</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-attribute-python">count</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python punctuation-definition-arguments-end-python">)</span>
<span class="source-lf meta-embedded-block-py">        </span><span class="source-lf meta-embedded-block-py variable-language-special-self-python">self</span><span class="source-lf meta-embedded-block-py meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-attribute-python">count</span><span class="source-lf meta-embedded-block-py"> </span><span class="source-lf meta-embedded-block-py keyword-operator-assignment-python">+=</span><span class="source-lf meta-embedded-block-py"> </span><span class="source-lf meta-embedded-block-py variable-language-special-self-python">self</span><span class="source-lf meta-embedded-block-py meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-attribute-python">stride</span>
<span class="source-lf meta-embedded-block-py">    </span><span class="source-lf meta-embedded-block-py">=}</span>
<span class="source-lf">}</span>
</pre>
<p>This defines a <code>stride</code> parameter with initial value <code>1</code> and a <code>count</code> state
variable with the same initial value. These are referenced in the reaction with
the syntax <code>self.stride</code> and <code>self.count</code> respectively. Note that state
variables and parameters do not have types in the Python reactor target. See <a href="/docs/handbook/parameters-and-state-variables">Parameters
and State</a> for more examples.</p>
<p><strong>The Reactor Class:</strong>
The code generator synthesizes a class in Python for each reactor class in LF,
with a constructor (i.e., <code>def __init__(self, ...):</code>) that creates an instance
of this class and initializes its parameters and state variables as <a href="https://docs.python.org/3/tutorial/classes.html#class-and-instance-variables">instance
variables</a>.
These parameters and state variables can then subsequently be accessed directly
using the <code>self</code> reference in the body of reactions.</p>
<p>It may be tempting to declare state variables in the <span class="lf_keywords">preamble</span>, as follows:</p>
<pre class="source-lf language-lf-py"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">FlawedCount</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">preamble</span><span class="source-lf"> </span><span class="source-lf meta-embedded-block-py">{=</span>
<span class="source-lf meta-embedded-block-py">        </span><span class="source-lf meta-embedded-block-py">count</span><span class="source-lf meta-embedded-block-py"> </span><span class="source-lf meta-embedded-block-py keyword-operator-assignment-python">=</span><span class="source-lf meta-embedded-block-py"> </span><span class="source-lf meta-embedded-block-py constant-numeric-dec-python">0</span>
<span class="source-lf meta-embedded-block-py">    </span><span class="source-lf meta-embedded-block-py">=}</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">output</span><span class="source-lf"> y</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">timer</span><span class="source-lf"> t(</span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">, </span><span class="source-lf constant-numeric-int-lflang">100</span><span class="source-lf"> </span><span class="source-lf constant-numeric-lflang">msec</span><span class="source-lf">)</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(t) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> y </span><span class="source-lf meta-embedded-block-py">{=</span>
<span class="source-lf meta-embedded-block-py">        </span><span class="source-lf meta-embedded-block-py">y</span><span class="source-lf meta-embedded-block-py meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-generic-python">set</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python punctuation-definition-arguments-begin-python">(</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python">count</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python punctuation-definition-arguments-end-python">)</span>
<span class="source-lf meta-embedded-block-py">        </span><span class="source-lf meta-embedded-block-py">count</span><span class="source-lf meta-embedded-block-py"> </span><span class="source-lf meta-embedded-block-py keyword-operator-assignment-python">+=</span><span class="source-lf meta-embedded-block-py"> </span><span class="source-lf meta-embedded-block-py constant-numeric-dec-python">1</span>
<span class="source-lf meta-embedded-block-py">    </span><span class="source-lf meta-embedded-block-py">=}</span>
<span class="source-lf">}</span>
</pre>
<p>This will produce a sequence of integers, but if there is more than one instance
of the reactor, those instances will share the same variable <code>count</code> (because
<code>count</code> will be a <a href="https://docs.python.org/3/tutorial/classes.html#class-and-instance-variables">class variable</a>). Hence,
<strong>don’t do this</strong>! Sharing variables across instances of reactors violates a
basic principle, which is that reactors communicate only by sending messages to
one another. Sharing variables will make your program nondeterministic. If you
have multiple instances of the above <code>FlawedCount</code> reactor, the outputs produced
by each instance will not be predictable, and in a multithreaded implementation,
will also not be repeatable.</p>
<h3 id="array-expressions-for-state-variables-and-parameters" style="position:relative;"><a href="#array-expressions-for-state-variables-and-parameters" aria-label="array expressions for state variables and parameters permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Array Expressions for State Variables and Parameters</h3>
<p>A Lingua Franca array expression (e.g., (0, 1, 2)) can be used for the initial
(default) value of parameters and state variables. In the following example, the
parameter <code>sequence</code> and the state variable <code>x</code> have an initial value of <code>(0, 1, 2)</code>:</p>
<pre class="source-lf language-lf-py"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Source</span><span class="source-lf">(sequence(</span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">, </span><span class="source-lf constant-numeric-int-lflang">1</span><span class="source-lf">, </span><span class="source-lf constant-numeric-int-lflang">2</span><span class="source-lf">)) {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">state</span><span class="source-lf"> x(</span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">, </span><span class="source-lf constant-numeric-int-lflang">1</span><span class="source-lf">, </span><span class="source-lf constant-numeric-int-lflang">2</span><span class="source-lf">);</span>
<span class="source-lf">    </span><span class="source-lf keyword-operator-lflang">.</span><span class="source-lf keyword-operator-lflang">.</span><span class="source-lf keyword-operator-lflang">.</span>
<span class="source-lf">}</span>
</pre>
<p>The Python target interprets the <code>(0, 1, 2)</code> expression differently depending on
whether the assignee is a parameter or a state variable. For parameters, the
<code>(0, 1, 2)</code> expression will translate into an immutable Python tuple (i.e.,
<code>sequence = (0, 1, 2)</code>). For state variables, the <code>(0, 1, 2)</code> expression will
translate into a mutable Python list (i.e., <code>x = [0, 1, 2])</code>). The reason behind
this discrepancy is that parameters are assumed to be immutable after
instantiation (in fact, they are also read-only in reaction bodies), but state
variables usually need to be updated during execution.</p>
<p>Notice that even though the tuple assigned to the parameter is immutable (you
cannot assign new values to its elements), the parameter itself can be
overridden with <em>another</em> immutable tuple when instantiating the reactor:</p>
<pre class="source-lf language-lf"><span class="source-lf variable-other-constant-reactorinstance-lflang">s</span><span class="source-lf"> </span><span class="source-lf keyword-operator-lflang">=</span><span class="source-lf"> </span><span class="source-lf keyword-operator-new-lflang">new</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Source</span><span class="source-lf">(sequence </span><span class="source-lf keyword-operator-lflang">=</span><span class="source-lf"> (</span><span class="source-lf constant-numeric-int-lflang">1</span><span class="source-lf">, </span><span class="source-lf constant-numeric-int-lflang">2</span><span class="source-lf">, </span><span class="source-lf constant-numeric-int-lflang">3</span><span class="source-lf">, </span><span class="source-lf constant-numeric-int-lflang">4</span><span class="source-lf">));</span>
</pre>
<p>As with any ordinary Python list or tuple, <code>len()</code> can been used to deduce the
length.</p>
<h3 id="assigning-arbitrary-initial-expressions-to-state-variables-and-parameters" style="position:relative;"><a href="#assigning-arbitrary-initial-expressions-to-state-variables-and-parameters" aria-label="assigning arbitrary initial expressions to state variables and parameters permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Assigning Arbitrary Initial Expressions to State Variables and Parameters</h3>
<p>The code delimiters <code>{= ... =}</code> can allow for assignment of arbitrary Python
expressions as initial values for state variables and parameters. The following example, taken from
<a href="https://github.com/lf-lang/lingua-franca/blob/master/test/Python/src/StructAsState.lf">StructAsState.lf</a>
demonstrates this usage:</p>
<pre class="source-lf language-lf-py"><span class="source-lf storage-modifier-lflang">main</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">StructAsState</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">preamble</span><span class="source-lf"> </span><span class="source-lf meta-embedded-block-py">{=</span>
<span class="source-lf meta-embedded-block-py meta-class-python">        </span><span class="source-lf meta-embedded-block-py meta-class-python storage-type-class-python">class</span><span class="source-lf meta-embedded-block-py meta-class-python"> </span><span class="source-lf meta-embedded-block-py meta-class-python entity-name-type-class-python">hello</span><span class="source-lf meta-embedded-block-py meta-class-python punctuation-section-class-begin-python">:</span>
<span class="source-lf meta-embedded-block-py meta-function-python">            </span><span class="source-lf meta-embedded-block-py meta-function-python storage-type-function-python">def</span><span class="source-lf meta-embedded-block-py meta-function-python"> </span><span class="source-lf meta-embedded-block-py meta-function-python support-function-magic-python">__init__</span><span class="source-lf meta-embedded-block-py meta-function-python meta-function-parameters-python punctuation-definition-parameters-begin-python">(</span><span class="source-lf meta-embedded-block-py meta-function-python meta-function-parameters-python variable-parameter-function-language-python variable-parameter-function-language-special-self-python">self</span><span class="source-lf meta-embedded-block-py meta-function-python meta-function-parameters-python punctuation-separator-parameters-python">,</span><span class="source-lf meta-embedded-block-py meta-function-python meta-function-parameters-python"> </span><span class="source-lf meta-embedded-block-py meta-function-python meta-function-parameters-python variable-parameter-function-language-python">name</span><span class="source-lf meta-embedded-block-py meta-function-python meta-function-parameters-python punctuation-separator-parameters-python">,</span><span class="source-lf meta-embedded-block-py meta-function-python meta-function-parameters-python"> </span><span class="source-lf meta-embedded-block-py meta-function-python meta-function-parameters-python variable-parameter-function-language-python">value</span><span class="source-lf meta-embedded-block-py meta-function-python meta-function-parameters-python punctuation-definition-parameters-end-python">)</span><span class="source-lf meta-embedded-block-py meta-function-python punctuation-section-function-begin-python">:</span>
<span class="source-lf meta-embedded-block-py">                </span><span class="source-lf meta-embedded-block-py variable-language-special-self-python">self</span><span class="source-lf meta-embedded-block-py meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-attribute-python">name</span><span class="source-lf meta-embedded-block-py"> </span><span class="source-lf meta-embedded-block-py keyword-operator-assignment-python">=</span><span class="source-lf meta-embedded-block-py"> </span><span class="source-lf meta-embedded-block-py">name</span>
<span class="source-lf meta-embedded-block-py">                </span><span class="source-lf meta-embedded-block-py variable-language-special-self-python">self</span><span class="source-lf meta-embedded-block-py meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-attribute-python">value</span><span class="source-lf meta-embedded-block-py"> </span><span class="source-lf meta-embedded-block-py keyword-operator-assignment-python">=</span><span class="source-lf meta-embedded-block-py"> </span><span class="source-lf meta-embedded-block-py">value</span>
<span class="source-lf meta-embedded-block-py">    </span><span class="source-lf meta-embedded-block-py">=}</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">state</span><span class="source-lf"> s (</span><span class="source-lf meta-embedded-block-py">{=</span><span class="source-lf meta-embedded-block-py variable-language-special-self-python">self</span><span class="source-lf meta-embedded-block-py meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-generic-python">hello</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python punctuation-definition-arguments-begin-python">(</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python string-quoted-single-python punctuation-definition-string-begin-python">&quot;</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python string-quoted-single-python">Earth</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python string-quoted-single-python punctuation-definition-string-end-python">&quot;</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python punctuation-separator-arguments-python">,</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python"> </span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python constant-numeric-dec-python">42</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python punctuation-definition-arguments-end-python">)</span><span class="source-lf meta-embedded-block-py"> </span><span class="source-lf meta-embedded-block-py">=}</span><span class="source-lf">);</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(</span><span class="source-lf support-variable-lflang">startup</span><span class="source-lf">) </span><span class="source-lf meta-embedded-block-py">{=</span>
<span class="source-lf meta-embedded-block-py">        </span><span class="source-lf meta-embedded-block-py meta-function-call-python support-function-builtin-python">print</span><span class="source-lf meta-embedded-block-py meta-function-call-python punctuation-definition-arguments-begin-python">(</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python string-quoted-single-python punctuation-definition-string-begin-python">&quot;</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python string-quoted-single-python">State s.name=&#039;</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python string-quoted-single-python meta-format-brace-python constant-character-format-placeholder-other-python">{</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python string-quoted-single-python meta-format-brace-python constant-character-format-placeholder-other-python storage-type-format-python">:s</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python string-quoted-single-python meta-format-brace-python constant-character-format-placeholder-other-python">}</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python string-quoted-single-python">&#039;, value=</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python string-quoted-single-python meta-format-brace-python constant-character-format-placeholder-other-python">{</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python string-quoted-single-python meta-format-brace-python constant-character-format-placeholder-other-python storage-type-format-python">:d</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python string-quoted-single-python meta-format-brace-python constant-character-format-placeholder-other-python">}</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python string-quoted-single-python">.</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python string-quoted-single-python punctuation-definition-string-end-python">&quot;</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-function-call-python meta-function-call-generic-python">format</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-function-call-python punctuation-definition-arguments-begin-python">(</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-function-call-python meta-function-call-arguments-python variable-language-special-self-python">self</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-function-call-python meta-function-call-arguments-python meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-attribute-python">s</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-function-call-python meta-function-call-arguments-python meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-attribute-python">name</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-function-call-python meta-function-call-arguments-python punctuation-separator-arguments-python">,</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-function-call-python meta-function-call-arguments-python"> </span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-function-call-python meta-function-call-arguments-python variable-language-special-self-python">self</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-function-call-python meta-function-call-arguments-python meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-attribute-python">s</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-function-call-python meta-function-call-arguments-python meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-attribute-python">value</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-function-call-python punctuation-definition-arguments-end-python">)</span><span class="source-lf meta-embedded-block-py meta-function-call-python punctuation-definition-arguments-end-python">)</span>
<span class="source-lf meta-embedded-block-py">        </span><span class="source-lf meta-embedded-block-py keyword-control-flow-python">if</span><span class="source-lf meta-embedded-block-py"> </span><span class="source-lf meta-embedded-block-py variable-language-special-self-python">self</span><span class="source-lf meta-embedded-block-py meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-attribute-python">s</span><span class="source-lf meta-embedded-block-py meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-attribute-python">value</span><span class="source-lf meta-embedded-block-py"> </span><span class="source-lf meta-embedded-block-py keyword-operator-comparison-python">!=</span><span class="source-lf meta-embedded-block-py"> </span><span class="source-lf meta-embedded-block-py constant-numeric-dec-python">42</span><span class="source-lf meta-embedded-block-py punctuation-separator-colon-python">:</span>
<span class="source-lf meta-embedded-block-py">            </span><span class="source-lf meta-embedded-block-py">sys</span><span class="source-lf meta-embedded-block-py meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-attribute-python">stderr</span><span class="source-lf meta-embedded-block-py meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-generic-python">write</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python punctuation-definition-arguments-begin-python">(</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python string-quoted-single-python punctuation-definition-string-begin-python">&quot;</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python string-quoted-single-python">FAILED: Expected 42.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python string-quoted-single-python constant-character-escape-python">\n</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python string-quoted-single-python punctuation-definition-string-end-python">&quot;</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python punctuation-definition-arguments-end-python">)</span>
<span class="source-lf meta-embedded-block-py">            </span><span class="source-lf meta-embedded-block-py meta-function-call-python support-function-builtin-python">exit</span><span class="source-lf meta-embedded-block-py meta-function-call-python punctuation-definition-arguments-begin-python">(</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python constant-numeric-dec-python">1</span><span class="source-lf meta-embedded-block-py meta-function-call-python punctuation-definition-arguments-end-python">)</span>
<span class="source-lf meta-embedded-block-py">    </span><span class="source-lf meta-embedded-block-py">=}</span>
<span class="source-lf">}</span>
</pre>
<p>Notice that a class <code>hello</code> is defined in the preamble. The state variable <code>s</code> is then initialized to an instance of <code>hello</code> constructed within the <code>{= ... =}</code> delimiters.</p>
<!-- State variables may be initialized to lists or tuples without requiring `{= ... =}` delimiters. The following illustrates the difference:

```lf-py
target Python;
main reactor Foo {
    state a_tuple(1, 2, 3);
    state a_list([1, 2, 3]);
    reaction(startup) {=
        # will print "<class 'tuple'> != <class 'list'>"
        print("{0} != {1}".format(type(self.a_tuple), type(self.a_list)))
    =}
}
``` -->
<!--
In Python, tuples are immutable, while lists can be modified. Be aware also that the syntax for declaring tuples in the Python target is the same syntax as to declare an array in the C target, so the immutability might be a surprise. -->
</div>
<div class="lf-ts">
<p>In the TypeScript target, all <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html">TypeScript types</a> are generally acceptable for parameters and state variables. Custom types (and classes) must be defined in the <a href="#preamble">preamble</a> before they may be used.</p>
<p><strong>To benefit from type checking, you should declare types for your reactor elements.</strong> If a type isn’t declared for a state variable, it is assigned the type <a href="https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-0.html#new-unknown-top-type"><code>unknown</code></a>.</p>
<p>For example, the following reactor will produce the output sequence 0, 1, 2, 3, … :</p>
<pre class="source-lf language-lf-ts"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Count</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">state</span><span class="source-lf"> count:</span><span class="source-lf storage-type-lflang">number</span><span class="source-lf">(</span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">);</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">output</span><span class="source-lf"> y:</span><span class="source-lf storage-type-lflang">number</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">timer</span><span class="source-lf"> t(</span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">, </span><span class="source-lf constant-numeric-int-lflang">100</span><span class="source-lf"> </span><span class="source-lf constant-numeric-lflang">msec</span><span class="source-lf">);</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(t) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> y </span><span class="source-lf meta-embedded-block-ts">{=</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">count</span><span class="source-lf meta-embedded-block-ts keyword-operator-increment-ts">++</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">y</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-assignment-ts">=</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">count</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">    </span><span class="source-lf meta-embedded-block-ts">=}</span>
<span class="source-lf">}</span>
</pre>
<p>The declaration on the second line gives the variable the name “count”, declares its type to be <code>number</code>, and initializes its value to 0. The type and initial value can be enclosed in the Typescript-code delimiters <code>{= ... =}</code> if they are not simple identifiers, but in this case, that is not necessary.</p>
<p>In the body of the reaction, the reactor’s state variable is referenced by way of a local variable of the same name. The local variable will contain the current value of the state at the beginning of the reaction. The final value of the local variable will be used to update the state at the end of the reaction.</p>
<p>It may be tempting to declare state variables in the <strong>preamble</strong>, as follows:</p>
<pre class="source-lf language-lf-ts"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">FlawedCount</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">preamble</span><span class="source-lf"> </span><span class="source-lf meta-embedded-block-ts">{=</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts storage-type-ts">let</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-definition-variable-ts variable-other-readwrite-ts">count</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts keyword-operator-assignment-ts">=</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts constant-numeric-decimal-ts">0</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">    </span><span class="source-lf meta-embedded-block-ts">=}</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">output</span><span class="source-lf"> y:</span><span class="source-lf storage-type-lflang">number</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">timer</span><span class="source-lf"> t(</span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">, </span><span class="source-lf constant-numeric-int-lflang">100</span><span class="source-lf"> </span><span class="source-lf constant-numeric-lflang">msec</span><span class="source-lf">);</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(t) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> y </span><span class="source-lf meta-embedded-block-ts">{=</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">count</span><span class="source-lf meta-embedded-block-ts keyword-operator-increment-ts">++</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">y</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-assignment-ts">=</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">count</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">    </span><span class="source-lf meta-embedded-block-ts">=}</span>
<span class="source-lf">}</span>
</pre>
<p>This will produce a sequence of integers, but if there is more than one instance of the reactor, those instances will share the same variable count. Hence, <strong>don’t do this</strong>! Sharing variables across instances of reactors violates a basic principle, which is that reactors communicate only by sending messages to one another. Sharing variables will make your program nondeterministic. If you have multiple instances of the above FlawedCount reactor, the outputs produced by each instance will not be predictable, and in an asynchronous implementation, will also not be repeatable.</p>
<p>A state variable may be a time value, declared as follows:</p>
<pre class="source-lf language-lf-ts"><span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">state</span><span class="source-lf"> time_value:</span><span class="source-lf storage-type-lflang">time</span><span class="source-lf">(</span><span class="source-lf constant-numeric-int-lflang">100</span><span class="source-lf"> </span><span class="source-lf constant-numeric-lflang">msec</span><span class="source-lf">);</span>
</pre>
<p>The <code>time_value</code> variable will be of type <code>TimeValue</code>, which is an object used to represent a time in the TypeScript Target. Refer to the section on <a href="#timed-behavior">timed behavior</a> for more information.</p>
<p>A state variable can have an array or object value. For example, the following reactor computes the <strong>moving average</strong> of the last four inputs each time it receives an input:</p>
<pre class="source-lf language-lf-ts"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">MovingAverage</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">state</span><span class="source-lf"> delay_line:</span><span class="source-lf meta-embedded-block-ts">{=</span><span class="source-lf meta-embedded-block-ts support-class-builtin-ts">Array</span><span class="source-lf meta-embedded-block-ts keyword-operator-relational-ts">&lt;</span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">number</span><span class="source-lf meta-embedded-block-ts">&gt;=}</span><span class="source-lf">(</span><span class="source-lf meta-embedded-block-ts">{=</span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts"> </span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts meta-brace-square-ts">[</span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts constant-numeric-decimal-ts">0</span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts constant-numeric-decimal-ts meta-delimiter-decimal-period-ts">.</span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts constant-numeric-decimal-ts">0</span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts punctuation-separator-comma-ts">,</span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts"> </span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts constant-numeric-decimal-ts">0</span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts constant-numeric-decimal-ts meta-delimiter-decimal-period-ts">.</span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts constant-numeric-decimal-ts">0</span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts punctuation-separator-comma-ts">,</span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts"> </span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts constant-numeric-decimal-ts">0</span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts constant-numeric-decimal-ts meta-delimiter-decimal-period-ts">.</span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts constant-numeric-decimal-ts">0</span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts meta-brace-square-ts">]</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts">=}</span><span class="source-lf">);</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">state</span><span class="source-lf"> index:</span><span class="source-lf storage-type-lflang">number</span><span class="source-lf">(</span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">);</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">input</span><span class="source-lf"> x:</span><span class="source-lf storage-type-lflang">number</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">output</span><span class="source-lf"> out:</span><span class="source-lf storage-type-lflang">number</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(x) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> out </span><span class="source-lf meta-embedded-block-ts">{=</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">x</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-assignment-ts">=</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">x</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-control-as-ts">as</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts support-type-primitive-ts">number</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts punctuation-whitespace-comment-leading-ts">        </span><span class="source-lf meta-embedded-block-ts comment-line-double-slash-ts punctuation-definition-comment-ts">//</span><span class="source-lf meta-embedded-block-ts comment-line-double-slash-ts"> Calculate the output.</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts storage-type-ts">let</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-definition-variable-ts variable-other-readwrite-ts">sum</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts keyword-operator-assignment-ts">=</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts variable-other-readwrite-ts">x</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts keyword-control-loop-ts">for</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts storage-type-ts">let</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-definition-variable-ts variable-other-readwrite-ts">i</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts keyword-operator-assignment-ts">=</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts constant-numeric-decimal-ts">0</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">i</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-relational-ts">&lt;</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts constant-numeric-decimal-ts">3</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">i</span><span class="source-lf meta-embedded-block-ts keyword-operator-increment-ts">++</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">)</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-definition-block-ts">{</span>
<span class="source-lf meta-embedded-block-ts meta-block-ts">            </span><span class="source-lf meta-embedded-block-ts meta-block-ts variable-other-readwrite-ts">sum</span><span class="source-lf meta-embedded-block-ts meta-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts keyword-operator-assignment-compound-ts">+=</span><span class="source-lf meta-embedded-block-ts meta-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts variable-other-readwrite-ts">delay_line</span><span class="source-lf meta-embedded-block-ts meta-block-ts meta-array-literal-ts meta-brace-square-ts">[</span><span class="source-lf meta-embedded-block-ts meta-block-ts meta-array-literal-ts variable-other-readwrite-ts">i</span><span class="source-lf meta-embedded-block-ts meta-block-ts meta-array-literal-ts meta-brace-square-ts">]</span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts meta-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-definition-block-ts">}</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">out</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-assignment-ts">=</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">sum</span><span class="source-lf meta-embedded-block-ts keyword-operator-arithmetic-ts">/</span><span class="source-lf meta-embedded-block-ts constant-numeric-decimal-ts">4</span><span class="source-lf meta-embedded-block-ts constant-numeric-decimal-ts meta-delimiter-decimal-period-ts">.</span><span class="source-lf meta-embedded-block-ts constant-numeric-decimal-ts">0</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts"></span>
<span class="source-lf meta-embedded-block-ts punctuation-whitespace-comment-leading-ts">        </span><span class="source-lf meta-embedded-block-ts comment-line-double-slash-ts punctuation-definition-comment-ts">//</span><span class="source-lf meta-embedded-block-ts comment-line-double-slash-ts"> Insert the input in the delay line.</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">delay_line</span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts meta-brace-square-ts">[</span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts variable-other-readwrite-ts">index</span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts meta-brace-square-ts">]</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-assignment-ts">=</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">x</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts"></span>
<span class="source-lf meta-embedded-block-ts punctuation-whitespace-comment-leading-ts">        </span><span class="source-lf meta-embedded-block-ts comment-line-double-slash-ts punctuation-definition-comment-ts">//</span><span class="source-lf meta-embedded-block-ts comment-line-double-slash-ts"> Update the index for the next input.</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">index</span><span class="source-lf meta-embedded-block-ts keyword-operator-increment-ts">++</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts keyword-control-conditional-ts">if</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">index</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-relational-ts">&gt;=</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts constant-numeric-decimal-ts">3</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">)</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-definition-block-ts">{</span>
<span class="source-lf meta-embedded-block-ts meta-block-ts">            </span><span class="source-lf meta-embedded-block-ts meta-block-ts variable-other-readwrite-ts">index</span><span class="source-lf meta-embedded-block-ts meta-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts keyword-operator-assignment-ts">=</span><span class="source-lf meta-embedded-block-ts meta-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts constant-numeric-decimal-ts">0</span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts meta-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-definition-block-ts">}</span>
<span class="source-lf meta-embedded-block-ts">    </span><span class="source-lf meta-embedded-block-ts">=}</span>
<span class="source-lf">}</span>
</pre>
<p>The second line declares that the type of the state variable is an array of <code>number</code>s with the initial value of the array being a three-element array filled with zeros.</p>
<p>States whose type are objects can similarly be initialized. Declarations can take an object literal as the initial value:</p>
<pre class="source-lf language-lf-ts"><span class="source-lf storage-modifier-lflang">state</span><span class="source-lf"> myLiteral:</span><span class="source-lf meta-embedded-block-ts">{=</span><span class="source-lf meta-embedded-block-ts meta-objectliteral-ts"> </span><span class="source-lf meta-embedded-block-ts meta-objectliteral-ts punctuation-definition-block-ts">{</span><span class="source-lf meta-embedded-block-ts meta-objectliteral-ts meta-object-member-ts meta-object-literal-key-ts">foo</span><span class="source-lf meta-embedded-block-ts meta-objectliteral-ts meta-object-member-ts meta-object-literal-key-ts punctuation-separator-key-value-ts">:</span><span class="source-lf meta-embedded-block-ts meta-objectliteral-ts meta-object-member-ts"> </span><span class="source-lf meta-embedded-block-ts meta-objectliteral-ts meta-object-member-ts variable-other-readwrite-ts">number</span><span class="source-lf meta-embedded-block-ts meta-objectliteral-ts punctuation-separator-comma-ts">,</span><span class="source-lf meta-embedded-block-ts meta-objectliteral-ts"> </span><span class="source-lf meta-embedded-block-ts meta-objectliteral-ts meta-object-member-ts meta-object-literal-key-ts">bar</span><span class="source-lf meta-embedded-block-ts meta-objectliteral-ts meta-object-member-ts meta-object-literal-key-ts punctuation-separator-key-value-ts">:</span><span class="source-lf meta-embedded-block-ts meta-objectliteral-ts meta-object-member-ts"> </span><span class="source-lf meta-embedded-block-ts meta-objectliteral-ts meta-object-member-ts variable-other-readwrite-ts">string</span><span class="source-lf meta-embedded-block-ts meta-objectliteral-ts punctuation-definition-block-ts">}</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts">=}</span><span class="source-lf">(</span><span class="source-lf meta-embedded-block-ts">{=</span><span class="source-lf meta-embedded-block-ts meta-objectliteral-ts"> </span><span class="source-lf meta-embedded-block-ts meta-objectliteral-ts punctuation-definition-block-ts">{</span><span class="source-lf meta-embedded-block-ts meta-objectliteral-ts meta-object-member-ts meta-object-literal-key-ts">foo</span><span class="source-lf meta-embedded-block-ts meta-objectliteral-ts meta-object-member-ts meta-object-literal-key-ts punctuation-separator-key-value-ts">:</span><span class="source-lf meta-embedded-block-ts meta-objectliteral-ts meta-object-member-ts"> </span><span class="source-lf meta-embedded-block-ts meta-objectliteral-ts meta-object-member-ts constant-numeric-decimal-ts">42</span><span class="source-lf meta-embedded-block-ts meta-objectliteral-ts punctuation-separator-comma-ts">,</span><span class="source-lf meta-embedded-block-ts meta-objectliteral-ts"> </span><span class="source-lf meta-embedded-block-ts meta-objectliteral-ts meta-object-member-ts meta-object-literal-key-ts">bar</span><span class="source-lf meta-embedded-block-ts meta-objectliteral-ts meta-object-member-ts meta-object-literal-key-ts punctuation-separator-key-value-ts">:</span><span class="source-lf meta-embedded-block-ts meta-objectliteral-ts meta-object-member-ts"> </span><span class="source-lf meta-embedded-block-ts meta-objectliteral-ts meta-object-member-ts string-quoted-double-ts punctuation-definition-string-begin-ts">&quot;</span><span class="source-lf meta-embedded-block-ts meta-objectliteral-ts meta-object-member-ts string-quoted-double-ts">baz</span><span class="source-lf meta-embedded-block-ts meta-objectliteral-ts meta-object-member-ts string-quoted-double-ts punctuation-definition-string-end-ts">&quot;</span><span class="source-lf meta-embedded-block-ts meta-objectliteral-ts punctuation-definition-block-ts">}</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts">=}</span><span class="source-lf">);</span>
</pre>
<p>or use <code>new</code>:</p>
<pre class="source-lf language-lf-ts"><span class="source-lf storage-modifier-lflang">state</span><span class="source-lf"> mySet:</span><span class="source-lf meta-embedded-block-ts">{=</span><span class="source-lf meta-embedded-block-ts support-class-builtin-ts">Set</span><span class="source-lf meta-embedded-block-ts keyword-operator-relational-ts">&lt;</span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">number</span><span class="source-lf meta-embedded-block-ts">&gt;=}</span><span class="source-lf">(</span><span class="source-lf meta-embedded-block-ts">{=</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts new-expr-ts keyword-operator-new-ts">new</span><span class="source-lf meta-embedded-block-ts new-expr-ts"> </span><span class="source-lf meta-embedded-block-ts new-expr-ts meta-function-call-ts support-class-builtin-ts">Set</span><span class="source-lf meta-embedded-block-ts new-expr-ts meta-type-parameters-ts punctuation-definition-typeparameters-begin-ts">&lt;</span><span class="source-lf meta-embedded-block-ts new-expr-ts meta-type-parameters-ts support-type-primitive-ts">number</span><span class="source-lf meta-embedded-block-ts new-expr-ts meta-type-parameters-ts punctuation-definition-typeparameters-end-ts">&gt;</span><span class="source-lf meta-embedded-block-ts new-expr-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts new-expr-ts meta-brace-round-ts">)</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts">=}</span><span class="source-lf">);</span>
</pre>
<p>Reactor parameters are also referenced in the TypeScript code as local variables. The example below modifies the <code>Count</code> reactor so that its stride is a parameter:</p>
<pre class="source-lf language-lf-ts"><span class="source-lf meta-targetspec-lflang keyword-control-lflang">target</span><span class="source-lf meta-targetspec-lflang"> </span><span class="source-lf meta-targetspec-lflang constant-language-lflang">TypeScript</span><span class="source-lf meta-targetspec-lflang">;</span>
<span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Count</span><span class="source-lf">(stride:number(</span><span class="source-lf constant-numeric-int-lflang">1</span><span class="source-lf">)) {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">state</span><span class="source-lf"> count:</span><span class="source-lf storage-type-lflang">number</span><span class="source-lf">(</span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">);</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">output</span><span class="source-lf"> y:</span><span class="source-lf storage-type-lflang">number</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">timer</span><span class="source-lf"> t(</span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">, </span><span class="source-lf constant-numeric-int-lflang">100</span><span class="source-lf"> </span><span class="source-lf constant-numeric-lflang">msec</span><span class="source-lf">);</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(t) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> y </span><span class="source-lf meta-embedded-block-ts">{=</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">y</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-assignment-ts">=</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">count</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">count</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-assignment-compound-ts">+=</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">stride</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">    </span><span class="source-lf meta-embedded-block-ts">=}</span>
<span class="source-lf">}</span>
<span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Display</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">input</span><span class="source-lf"> x:</span><span class="source-lf storage-type-lflang">number</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(x) </span><span class="source-lf meta-embedded-block-ts">{=</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-function-call-ts support-class-console-ts">console</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts punctuation-accessor-ts">.</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts support-function-console-ts">log</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-begin-ts">&quot;</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts">Received: </span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-end-ts">&quot;</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-arithmetic-ts">+</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">x</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-arithmetic-ts">+</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-begin-ts">&quot;</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts">.</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-end-ts">&quot;</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">)</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">    </span><span class="source-lf meta-embedded-block-ts">=}</span>
<span class="source-lf">}</span>
<span class="source-lf storage-modifier-lflang">main</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Stride</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf variable-other-constant-reactorinstance-lflang">c</span><span class="source-lf"> </span><span class="source-lf keyword-operator-lflang">=</span><span class="source-lf"> </span><span class="source-lf keyword-operator-new-lflang">new</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Count</span><span class="source-lf">(stride </span><span class="source-lf keyword-operator-lflang">=</span><span class="source-lf"> </span><span class="source-lf constant-numeric-int-lflang">2</span><span class="source-lf">);</span>
<span class="source-lf">    </span><span class="source-lf variable-other-constant-reactorinstance-lflang">d</span><span class="source-lf"> </span><span class="source-lf keyword-operator-lflang">=</span><span class="source-lf"> </span><span class="source-lf keyword-operator-new-lflang">new</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Display</span><span class="source-lf">();</span>
<span class="source-lf">    </span><span class="source-lf variable-other-constant-reactorinstance-lflang">c</span><span class="source-lf keyword-operator-lflang">.</span><span class="source-lf variable-other-lflang">y</span><span class="source-lf"> </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> </span><span class="source-lf variable-other-constant-reactorinstance-lflang">d</span><span class="source-lf keyword-operator-lflang">.</span><span class="source-lf variable-other-lflang">x</span><span class="source-lf">;</span>
<span class="source-lf">}</span>
</pre>
<p>The second line defines the <code>stride</code> parameter, gives its type, and gives its initial value. As with state variables, the type and initial value can be enclosed in <code>{= ... =}</code> if necessary. The parameter is referenced in the reaction by referring to the local variable <code>stride</code>.</p>
<p>When the reactor is instantiated, the default parameter value can be overridden. This is done in the above example near the bottom with the line:</p>
<pre class="source-lf language-lf-ts"><span class="source-lf">    </span><span class="source-lf variable-other-constant-reactorinstance-lflang">c</span><span class="source-lf"> </span><span class="source-lf keyword-operator-lflang">=</span><span class="source-lf"> </span><span class="source-lf keyword-operator-new-lflang">new</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Count</span><span class="source-lf">(stride </span><span class="source-lf keyword-operator-lflang">=</span><span class="source-lf"> </span><span class="source-lf constant-numeric-int-lflang">2</span><span class="source-lf">);</span>
</pre>
<p>If there is more than one parameter, use a comma separated list of assignments.</p>
<p>Parameters in Lingua Franca are immutable. To encourage correct usage, parameter variables within a reaction are local <code>const</code> variables. If you feel tempted to use a mutable parameter, instead try using the parameter to initialize state and modify the state variable instead. This is illustrated below by a further modification to the Stride example where it takes an initial “start” value for count as a second parameter:</p>
<pre class="source-lf language-lf-ts"><span class="source-lf meta-targetspec-lflang keyword-control-lflang">target</span><span class="source-lf meta-targetspec-lflang"> </span><span class="source-lf meta-targetspec-lflang constant-language-lflang">TypeScript</span><span class="source-lf meta-targetspec-lflang">;</span>
<span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Count</span><span class="source-lf">(stride:number(</span><span class="source-lf constant-numeric-int-lflang">1</span><span class="source-lf">), start:number(</span><span class="source-lf constant-numeric-int-lflang">5</span><span class="source-lf">)) {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">state</span><span class="source-lf"> count:</span><span class="source-lf storage-type-lflang">number</span><span class="source-lf">(start);</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">output</span><span class="source-lf"> y:</span><span class="source-lf storage-type-lflang">number</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">timer</span><span class="source-lf"> t(</span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">, </span><span class="source-lf constant-numeric-int-lflang">100</span><span class="source-lf"> </span><span class="source-lf constant-numeric-lflang">msec</span><span class="source-lf">);</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(t) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> y </span><span class="source-lf meta-embedded-block-ts">{=</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">y</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-assignment-ts">=</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">count</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">count</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-assignment-compound-ts">+=</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">stride</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">    </span><span class="source-lf meta-embedded-block-ts">=}</span>
<span class="source-lf">}</span>
<span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Display</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">input</span><span class="source-lf"> x:</span><span class="source-lf storage-type-lflang">number</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(x) </span><span class="source-lf meta-embedded-block-ts">{=</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-function-call-ts support-class-console-ts">console</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts punctuation-accessor-ts">.</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts support-function-console-ts">log</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-begin-ts">&quot;</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts">Received: </span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-end-ts">&quot;</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-arithmetic-ts">+</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">x</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-arithmetic-ts">+</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-begin-ts">&quot;</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts">.</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-end-ts">&quot;</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">)</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">    </span><span class="source-lf meta-embedded-block-ts">=}</span>
<span class="source-lf">}</span>
<span class="source-lf storage-modifier-lflang">main</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Stride</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf variable-other-constant-reactorinstance-lflang">c</span><span class="source-lf"> </span><span class="source-lf keyword-operator-lflang">=</span><span class="source-lf"> </span><span class="source-lf keyword-operator-new-lflang">new</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Count</span><span class="source-lf">(stride </span><span class="source-lf keyword-operator-lflang">=</span><span class="source-lf"> </span><span class="source-lf constant-numeric-int-lflang">2</span><span class="source-lf">, start </span><span class="source-lf keyword-operator-lflang">=</span><span class="source-lf"> </span><span class="source-lf constant-numeric-int-lflang">10</span><span class="source-lf">);</span>
<span class="source-lf">    </span><span class="source-lf variable-other-constant-reactorinstance-lflang">d</span><span class="source-lf"> </span><span class="source-lf keyword-operator-lflang">=</span><span class="source-lf"> </span><span class="source-lf keyword-operator-new-lflang">new</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Display</span><span class="source-lf">();</span>
<span class="source-lf">    </span><span class="source-lf variable-other-constant-reactorinstance-lflang">c</span><span class="source-lf keyword-operator-lflang">.</span><span class="source-lf variable-other-lflang">y</span><span class="source-lf"> </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> </span><span class="source-lf variable-other-constant-reactorinstance-lflang">d</span><span class="source-lf keyword-operator-lflang">.</span><span class="source-lf variable-other-lflang">x</span><span class="source-lf">;</span>
<span class="source-lf">}</span>
</pre>
<h3 id="array-or-object-parameters" style="position:relative;"><a href="#array-or-object-parameters" aria-label="array or object parameters permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Array or Object Parameters</h3>
<p>Parameters can have array or object values. Here is an example that outputs the elements of an array as a sequence of individual messages:</p>
<pre class="source-lf language-lf-ts"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Source</span><span class="source-lf">(sequence:</span><span class="source-lf meta-embedded-block-ts">{=</span><span class="source-lf meta-embedded-block-ts support-class-builtin-ts">Array</span><span class="source-lf meta-embedded-block-ts keyword-operator-relational-ts">&lt;</span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">number</span><span class="source-lf meta-embedded-block-ts">&gt;=}</span><span class="source-lf">(</span><span class="source-lf meta-embedded-block-ts">{=</span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts"> </span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts meta-brace-square-ts">[</span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts constant-numeric-decimal-ts">0</span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts punctuation-separator-comma-ts">,</span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts"> </span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts constant-numeric-decimal-ts">1</span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts punctuation-separator-comma-ts">,</span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts"> </span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts constant-numeric-decimal-ts">2</span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts meta-brace-square-ts">]</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts">=}</span><span class="source-lf">)) {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">output</span><span class="source-lf"> out:</span><span class="source-lf storage-type-lflang">number</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">state</span><span class="source-lf"> count:</span><span class="source-lf storage-type-lflang">number</span><span class="source-lf">(</span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">);</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">logical</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">action</span><span class="source-lf"> next;</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(</span><span class="source-lf support-variable-lflang">startup</span><span class="source-lf">, next) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> out, next </span><span class="source-lf meta-embedded-block-ts">{=</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">out</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-assignment-ts">=</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">sequence</span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts meta-brace-square-ts">[</span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts variable-other-readwrite-ts">count</span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts meta-brace-square-ts">]</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">count</span><span class="source-lf meta-embedded-block-ts keyword-operator-increment-ts">++</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts keyword-control-conditional-ts">if</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">count</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-relational-ts">&lt;</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts variable-other-object-ts">sequence</span><span class="source-lf meta-embedded-block-ts punctuation-accessor-ts">.</span><span class="source-lf meta-embedded-block-ts support-variable-property-ts">length</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">)</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-definition-block-ts">{</span>
<span class="source-lf meta-embedded-block-ts meta-block-ts">            </span><span class="source-lf meta-embedded-block-ts meta-block-ts meta-function-call-ts variable-other-object-ts">actions</span><span class="source-lf meta-embedded-block-ts meta-block-ts meta-function-call-ts punctuation-accessor-ts">.</span><span class="source-lf meta-embedded-block-ts meta-block-ts meta-function-call-ts support-variable-property-dom-ts">next</span><span class="source-lf meta-embedded-block-ts meta-block-ts meta-function-call-ts punctuation-accessor-ts">.</span><span class="source-lf meta-embedded-block-ts meta-block-ts meta-function-call-ts entity-name-function-ts">schedule</span><span class="source-lf meta-embedded-block-ts meta-block-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts meta-block-ts constant-numeric-decimal-ts">0</span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-separator-comma-ts">,</span><span class="source-lf meta-embedded-block-ts meta-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts constant-language-null-ts">null</span><span class="source-lf meta-embedded-block-ts meta-block-ts meta-brace-round-ts">)</span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts meta-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-definition-block-ts">}</span>
<span class="source-lf meta-embedded-block-ts">    </span><span class="source-lf meta-embedded-block-ts">=}</span>
<span class="source-lf">}</span>
</pre>
<p>Above, the parameter default value is an array with three elements, <code>[0, 1, 2]</code>. The syntax for giving this default value is a TypeScript array literal. Since this is TypeScript syntax, not Lingua Franca syntax, the initial value needs to be surrounded with the target code delimiters, <code>{= ... =}</code>. The default value can be overridden when instantiating the reactor using a similar syntax:</p>
<pre class="source-lf language-lf-ts"><span class="source-lf variable-other-constant-reactorinstance-lflang">s</span><span class="source-lf"> </span><span class="source-lf keyword-operator-lflang">=</span><span class="source-lf"> </span><span class="source-lf keyword-operator-new-lflang">new</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Source</span><span class="source-lf">(sequence</span><span class="source-lf keyword-operator-lflang">=</span><span class="source-lf meta-embedded-block-ts">{=</span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts"> </span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts meta-brace-square-ts">[</span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts constant-numeric-decimal-ts">1</span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts punctuation-separator-comma-ts">,</span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts"> </span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts constant-numeric-decimal-ts">2</span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts punctuation-separator-comma-ts">,</span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts"> </span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts constant-numeric-decimal-ts">3</span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts punctuation-separator-comma-ts">,</span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts"> </span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts constant-numeric-decimal-ts">4</span><span class="source-lf meta-embedded-block-ts meta-array-literal-ts meta-brace-square-ts">]</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts">=}</span><span class="source-lf">);</span>
</pre>
<p>Both default and overridden values for parameters can also be created with the <code>new</code> keyword:</p>
<pre class="source-lf language-lf-ts"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Source</span><span class="source-lf">(sequence:</span><span class="source-lf meta-embedded-block-ts">{=</span><span class="source-lf meta-embedded-block-ts support-class-builtin-ts">Array</span><span class="source-lf meta-embedded-block-ts keyword-operator-relational-ts">&lt;</span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">number</span><span class="source-lf meta-embedded-block-ts">&gt;=}</span><span class="source-lf">(</span><span class="source-lf meta-embedded-block-ts">{=</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts new-expr-ts keyword-operator-new-ts">new</span><span class="source-lf meta-embedded-block-ts new-expr-ts"> </span><span class="source-lf meta-embedded-block-ts new-expr-ts meta-function-call-ts support-class-builtin-ts">Array</span><span class="source-lf meta-embedded-block-ts new-expr-ts meta-type-parameters-ts punctuation-definition-typeparameters-begin-ts">&lt;</span><span class="source-lf meta-embedded-block-ts new-expr-ts meta-type-parameters-ts support-type-primitive-ts">number</span><span class="source-lf meta-embedded-block-ts new-expr-ts meta-type-parameters-ts punctuation-definition-typeparameters-end-ts">&gt;</span><span class="source-lf meta-embedded-block-ts new-expr-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts new-expr-ts meta-brace-round-ts">)</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts">=}</span><span class="source-lf">)) {</span>
</pre>
<p>and</p>
<pre class="source-lf language-lf-ts"><span class="source-lf variable-other-constant-reactorinstance-lflang">s</span><span class="source-lf"> </span><span class="source-lf keyword-operator-lflang">=</span><span class="source-lf"> </span><span class="source-lf keyword-operator-new-lflang">new</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Source</span><span class="source-lf">(sequence</span><span class="source-lf keyword-operator-lflang">=</span><span class="source-lf meta-embedded-block-ts">{=</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts new-expr-ts keyword-operator-new-ts">new</span><span class="source-lf meta-embedded-block-ts new-expr-ts"> </span><span class="source-lf meta-embedded-block-ts new-expr-ts support-class-builtin-ts">Array</span><span class="source-lf meta-embedded-block-ts new-expr-ts keyword-operator-relational-ts">&lt;</span><span class="source-lf meta-embedded-block-ts new-expr-ts meta-function-call-ts entity-name-function-ts">number</span><span class="source-lf meta-embedded-block-ts new-expr-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts new-expr-ts meta-brace-round-ts">)</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts">=}</span><span class="source-lf">);</span>
</pre>
</div>
<div class="lf-rs">
<p>Parameters and state variables in Rust are accessed on the <code>self</code> structure, as shown in <a href="/docs/handbook/parameters-and-state-variables#parameter-declaration">Parameter Declaration</a>.</p>
</div>
<h2 id="inputs-and-outputs" style="position:relative;"><a href="#inputs-and-outputs" aria-label="inputs and outputs permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Inputs and Outputs</h2>
<div class="lf-c">
<p>In the body of a reaction in the C target, the value of an input is obtained using the syntax <code>name->value</code>, where <code>name</code> is the name of the input port. See, for example, the <code>Destination</code> reactor in <a href="/docs/handbook/inputs-and-outputs#triggers-effects-and-uses">Triggers, Effects, and Uses</a>.</p>
<p>To set the value of outputs, use <code>lf_set</code>. See, for example, the <code>Double</code> reactor in <a href="/docs/handbook/inputs-and-outputs#input-and-output-declarations">Input and Output Declarations</a>.)</p>
<p>An output may even be set in different reactions of the same reactor at the same tag. In this case, one reaction may wish to test whether the previously invoked reaction has set the output. It can check <code>name->is_present</code> to determine whether the output has been set. For example, the following reactor (the test case <a href="https://github.com/lf-lang/lingua-franca/blob/master/test/C/src/TestForPreviousOutput.lf">TestForPreviousOutput</a>) will always produce the output 42:</p>
<pre class="source-lf language-lf-c"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">TestForPreviousOutput</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">output</span><span class="source-lf"> out:</span><span class="source-lf storage-type-primitive-cpp storage-type-built-in-primitive-cpp">int</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(</span><span class="source-lf support-variable-lflang">startup</span><span class="source-lf">) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> out </span><span class="source-lf meta-embedded-block-c">{=</span>
<span class="source-lf meta-embedded-block-c comment-line-double-slash-cpp">        </span><span class="source-lf meta-embedded-block-c comment-line-double-slash-cpp punctuation-definition-comment-cpp">//</span><span class="source-lf meta-embedded-block-c comment-line-double-slash-cpp"> Set a seed for random number generation based on the current time.</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c entity-name-function-call-cpp">srand</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c entity-name-function-call-cpp">time</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c constant-numeric-decimal-cpp">0</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c comment-line-double-slash-cpp">        </span><span class="source-lf meta-embedded-block-c comment-line-double-slash-cpp punctuation-definition-comment-cpp">//</span><span class="source-lf meta-embedded-block-c comment-line-double-slash-cpp"> Randomly produce an output or not.</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c keyword-control-if-cpp">if</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-section-parens-begin-bracket-round-cpp">(</span><span class="source-lf meta-embedded-block-c meta-parens-cpp entity-name-function-call-cpp">rand</span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c meta-parens-cpp"> </span><span class="source-lf meta-embedded-block-c meta-parens-cpp keyword-operator-cpp">%</span><span class="source-lf meta-embedded-block-c meta-parens-cpp"> </span><span class="source-lf meta-embedded-block-c meta-parens-cpp constant-numeric-decimal-cpp">2</span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-section-parens-end-bracket-round-cpp">)</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-section-block-begin-bracket-curly-cpp">{</span>
<span class="source-lf meta-embedded-block-c meta-block-cpp">            </span><span class="source-lf meta-embedded-block-c meta-block-cpp entity-name-function-call-cpp">lf_set</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c meta-block-cpp">out</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c meta-block-cpp"> </span><span class="source-lf meta-embedded-block-c meta-block-cpp constant-numeric-decimal-cpp">21</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c meta-block-cpp">        </span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-section-block-end-bracket-curly-cpp">}</span>
<span class="source-lf meta-embedded-block-c">    </span><span class="source-lf meta-embedded-block-c">=}</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(</span><span class="source-lf support-variable-lflang">startup</span><span class="source-lf">) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> out </span><span class="source-lf meta-embedded-block-c">{=</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c keyword-control-if-cpp">if</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-section-parens-begin-bracket-round-cpp">(</span><span class="source-lf meta-embedded-block-c meta-parens-cpp variable-other-object-access-cpp">out</span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c meta-parens-cpp variable-other-property-cpp">is_present</span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-section-parens-end-bracket-round-cpp">)</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-section-block-begin-bracket-curly-cpp">{</span>
<span class="source-lf meta-embedded-block-c meta-block-cpp">            </span><span class="source-lf meta-embedded-block-c meta-block-cpp entity-name-function-call-cpp">lf_set</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c meta-block-cpp">out</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c meta-block-cpp"> </span><span class="source-lf meta-embedded-block-c meta-block-cpp constant-numeric-decimal-cpp">2</span><span class="source-lf meta-embedded-block-c meta-block-cpp"> </span><span class="source-lf meta-embedded-block-c meta-block-cpp keyword-operator-cpp">*</span><span class="source-lf meta-embedded-block-c meta-block-cpp"> </span><span class="source-lf meta-embedded-block-c meta-block-cpp variable-other-object-access-cpp">out</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c meta-block-cpp variable-other-property-cpp">value</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c meta-block-cpp">        </span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-section-block-end-bracket-curly-cpp">}</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c keyword-control-else-cpp">else</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-section-block-begin-bracket-curly-cpp">{</span>
<span class="source-lf meta-embedded-block-c meta-block-cpp">            </span><span class="source-lf meta-embedded-block-c meta-block-cpp entity-name-function-call-cpp">lf_set</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c meta-block-cpp">out</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c meta-block-cpp"> </span><span class="source-lf meta-embedded-block-c meta-block-cpp constant-numeric-decimal-cpp">42</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c meta-block-cpp">        </span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-section-block-end-bracket-curly-cpp">}</span>
<span class="source-lf meta-embedded-block-c">    </span><span class="source-lf meta-embedded-block-c">=}</span>
<span class="source-lf">}</span>
</pre>
<p>The first reaction may or may not set the output to 21. The second reaction doubles the output if it has been previously produced and otherwise produces 42.</p>
<h3 id="sending-and-receiving-data" style="position:relative;"><a href="#sending-and-receiving-data" aria-label="sending and receiving data permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Sending and Receiving Data</h3>
<p>You can define your own data types in C and send and receive those. Consider the <a href="https://github.com/lf-lang/lingua-franca/blob/master/test/C/src/StructAsType.lf">StructAsType</a> example:</p>
<pre class="source-lf language-lf-c"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">StructAsType</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">preamble</span><span class="source-lf"> </span><span class="source-lf meta-embedded-block-c">{=</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c keyword-other-typedef-cpp">typedef</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-head-struct-cpp storage-type-struct-cpp">struct</span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp"> </span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp entity-name-type-struct-cpp">hello_t</span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp"> </span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-head-struct-cpp punctuation-section-block-begin-bracket-curly-struct-cpp">{</span>
<span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-body-struct-cpp">            </span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-body-struct-cpp storage-type-primitive-cpp storage-type-built-in-primitive-cpp">char</span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-body-struct-cpp keyword-operator-cpp">*</span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-body-struct-cpp"> name</span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-body-struct-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-body-struct-cpp">            </span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-body-struct-cpp storage-type-primitive-cpp storage-type-built-in-primitive-cpp">int</span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-body-struct-cpp"> value</span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-body-struct-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-body-struct-cpp">        </span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-body-struct-cpp punctuation-section-block-end-bracket-curly-struct-cpp">}</span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-tail-struct-cpp"> </span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp meta-tail-struct-cpp support-type-posix-reserved-cpp support-type-built-in-posix-reserved-cpp">hello_t</span><span class="source-lf meta-embedded-block-c meta-block-struct-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">    </span><span class="source-lf meta-embedded-block-c">=}</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">output</span><span class="source-lf"> out:</span><span class="source-lf support-type-posix-reserved-cpp support-type-built-in-posix-reserved-cpp">hello_t</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(</span><span class="source-lf support-variable-lflang">startup</span><span class="source-lf">) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> out </span><span class="source-lf meta-embedded-block-c">{=</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c storage-type-struct-declare-cpp">struct</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c entity-name-type-struct-cpp">hello_t</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c variable-other-object-declare-cpp">temp</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c keyword-operator-assignment-cpp">=</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-section-block-begin-bracket-curly-cpp">{</span><span class="source-lf meta-embedded-block-c meta-block-cpp string-quoted-double-cpp punctuation-definition-string-begin-cpp">&quot;</span><span class="source-lf meta-embedded-block-c meta-block-cpp string-quoted-double-cpp">Earth</span><span class="source-lf meta-embedded-block-c meta-block-cpp string-quoted-double-cpp punctuation-definition-string-end-cpp">&quot;</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c meta-block-cpp"> </span><span class="source-lf meta-embedded-block-c meta-block-cpp constant-numeric-decimal-cpp">42</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-section-block-end-bracket-curly-cpp">}</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c entity-name-function-call-cpp">lf_set</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c">out</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> temp</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">    </span><span class="source-lf meta-embedded-block-c">=}</span>
<span class="source-lf">}</span>
</pre>
<p>The <span class="lf_keywords">preamble</span> code defines a struct data type. In the reaction to <span class="lf_keywords">startup</span>, the reactor creates an instance of this struct on the stack (as a local variable named <code>temp</code>) and then copies that struct to the output using the <code>lf_set</code> macro.</p>
<p>For large structs, it may be inefficient to create a struct on the stack and copy it to the output, as done above. You can use a pointer type instead. See <a href="#dynamically-allocated-arrays">below</a> for details.</p>
<p>A reactor receiving the struct message uses the struct as normal in C:</p>
<pre class="source-lf language-lf-c"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Print</span><span class="source-lf">() {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">input</span><span class="source-lf"> in:</span><span class="source-lf support-type-posix-reserved-cpp support-type-built-in-posix-reserved-cpp">hello_t</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(in) </span><span class="source-lf meta-embedded-block-c">{=</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c entity-name-function-call-cpp">printf</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp punctuation-definition-string-begin-cpp">&quot;</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp">Received: name = </span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp constant-other-placeholder">%s</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp">, value = </span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp constant-other-placeholder">%d</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp constant-character-escape-cpp">\n</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp punctuation-definition-string-end-cpp">&quot;</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c variable-other-object-access-cpp">in</span><span class="source-lf meta-embedded-block-c punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c variable-other-object-property-cpp">value</span><span class="source-lf meta-embedded-block-c punctuation-separator-dot-access-cpp">.</span><span class="source-lf meta-embedded-block-c variable-other-property-cpp">name</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c variable-other-object-access-cpp">in</span><span class="source-lf meta-embedded-block-c punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c variable-other-object-property-cpp">value</span><span class="source-lf meta-embedded-block-c punctuation-separator-dot-access-cpp">.</span><span class="source-lf meta-embedded-block-c variable-other-property-cpp">value</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">    </span><span class="source-lf meta-embedded-block-c">=}</span>
<span class="source-lf">}</span>
</pre>
<p>The preamble should not be repeated in this reactor definition if the two reactors are defined together because this will trigger an error when the compiler thinks that <code>hello_t</code> is being redefined.</p>
<h3 id="dynamically-allocated-data" style="position:relative;"><a href="#dynamically-allocated-data" aria-label="dynamically allocated data permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Dynamically Allocated Data</h3>
<p>Suppose dynamically allocated data is set on an output port. When should that memory be freed? A reactor cannot know when downstream reactors are done with the data. Lingua Franca provides utilities for managing this using reference counting. You can specify a destructor on a port and pass a pointer to a dynamically allocated object as illustrated in the <a href="https://github.com/lf-lang/lingua-franca/blob/master/test/C/src/SetDestructor.lf">SetDestructor</a> example.</p>
<p>Suppose the data structure of interest, its constructor and destructor are defined as follows:</p>
<pre class="source-lf language-c"><span class="source-c keyword-other-typedef-c">typedef</span><span class="source-c"> </span><span class="source-c storage-type-struct-c">struct</span><span class="source-c"> </span><span class="source-c support-type-posix-reserved-c">int_array_t</span><span class="source-c"> </span><span class="source-c meta-block-c punctuation-section-block-begin-bracket-curly-c">{</span>
<span class="source-c meta-block-c">    </span><span class="source-c meta-block-c storage-type-built-in-primitive-c">int</span><span class="source-c meta-block-c keyword-operator-c">*</span><span class="source-c meta-block-c"> data</span><span class="source-c meta-block-c punctuation-terminator-statement-c">;</span>
<span class="source-c meta-block-c">    </span><span class="source-c meta-block-c storage-type-built-in-c">size_t</span><span class="source-c meta-block-c"> length</span><span class="source-c meta-block-c punctuation-terminator-statement-c">;</span>
<span class="source-c meta-block-c punctuation-section-block-end-bracket-curly-c">}</span><span class="source-c"> </span><span class="source-c support-type-posix-reserved-c">int_array_t</span><span class="source-c punctuation-terminator-statement-c">;</span>
<span class="source-c"></span>
<span class="source-c support-type-posix-reserved-c">int_array_t</span><span class="source-c keyword-operator-c">*</span><span class="source-c"> </span><span class="source-c meta-function-c meta-function-definition-parameters-c entity-name-function-c">int_array_constructor</span><span class="source-c meta-function-c meta-function-definition-parameters-c punctuation-section-parameters-begin-bracket-round-c">(</span><span class="source-c meta-function-c meta-function-definition-parameters-c storage-type-built-in-c">size_t</span><span class="source-c meta-function-c meta-function-definition-parameters-c"> </span><span class="source-c meta-function-c meta-function-definition-parameters-c variable-parameter-probably-c">length</span><span class="source-c meta-function-c meta-function-definition-parameters-c punctuation-section-parameters-end-bracket-round-c">)</span><span class="source-c"> </span><span class="source-c meta-block-c punctuation-section-block-begin-bracket-curly-c">{</span>
<span class="source-c meta-block-c">    </span><span class="source-c meta-block-c support-type-posix-reserved-c">int_array_t</span><span class="source-c meta-block-c keyword-operator-c">*</span><span class="source-c meta-block-c"> val </span><span class="source-c meta-block-c keyword-operator-assignment-c">=</span><span class="source-c meta-block-c"> </span><span class="source-c meta-block-c meta-parens-block-c punctuation-section-parens-begin-bracket-round-c">(</span><span class="source-c meta-block-c meta-parens-block-c support-type-posix-reserved-c">int_array_t</span><span class="source-c meta-block-c meta-parens-block-c keyword-operator-c">*</span><span class="source-c meta-block-c meta-parens-block-c punctuation-section-parens-end-bracket-round-c">)</span><span class="source-c meta-block-c"> </span><span class="source-c meta-block-c meta-function-call-c entity-name-function-c">malloc</span><span class="source-c meta-block-c meta-function-call-c punctuation-section-arguments-begin-bracket-round-c">(</span><span class="source-c meta-block-c meta-function-call-c keyword-operator-sizeof-c">sizeof</span><span class="source-c meta-block-c meta-function-call-c punctuation-section-parens-begin-bracket-round-c">(</span><span class="source-c meta-block-c meta-function-call-c support-type-posix-reserved-c">int_array_t</span><span class="source-c meta-block-c meta-function-call-c punctuation-section-parens-end-bracket-round-c">)</span><span class="source-c meta-block-c meta-function-call-c punctuation-section-arguments-end-bracket-round-c">)</span><span class="source-c meta-block-c punctuation-terminator-statement-c">;</span>
<span class="source-c meta-block-c">    </span><span class="source-c meta-block-c variable-other-object-access-c">val</span><span class="source-c meta-block-c punctuation-separator-pointer-access-c">-&gt;</span><span class="source-c meta-block-c variable-other-member-c">data</span><span class="source-c meta-block-c"> </span><span class="source-c meta-block-c keyword-operator-assignment-c">=</span><span class="source-c meta-block-c"> </span><span class="source-c meta-block-c meta-parens-block-c punctuation-section-parens-begin-bracket-round-c">(</span><span class="source-c meta-block-c meta-parens-block-c storage-type-built-in-primitive-c">int</span><span class="source-c meta-block-c meta-parens-block-c keyword-operator-c">*</span><span class="source-c meta-block-c meta-parens-block-c punctuation-section-parens-end-bracket-round-c">)</span><span class="source-c meta-block-c"> </span><span class="source-c meta-block-c meta-function-call-c entity-name-function-c">calloc</span><span class="source-c meta-block-c meta-function-call-c punctuation-section-arguments-begin-bracket-round-c">(</span><span class="source-c meta-block-c meta-function-call-c">length</span><span class="source-c meta-block-c meta-function-call-c punctuation-separator-delimiter-c">,</span><span class="source-c meta-block-c meta-function-call-c"> </span><span class="source-c meta-block-c meta-function-call-c keyword-operator-sizeof-c">sizeof</span><span class="source-c meta-block-c meta-function-call-c punctuation-section-parens-begin-bracket-round-c">(</span><span class="source-c meta-block-c meta-function-call-c storage-type-built-in-primitive-c">int</span><span class="source-c meta-block-c meta-function-call-c punctuation-section-parens-end-bracket-round-c">)</span><span class="source-c meta-block-c meta-function-call-c punctuation-section-arguments-end-bracket-round-c">)</span><span class="source-c meta-block-c punctuation-terminator-statement-c">;</span>
<span class="source-c meta-block-c">    </span><span class="source-c meta-block-c variable-other-object-access-c">val</span><span class="source-c meta-block-c punctuation-separator-pointer-access-c">-&gt;</span><span class="source-c meta-block-c variable-other-member-c">length</span><span class="source-c meta-block-c"> </span><span class="source-c meta-block-c keyword-operator-assignment-c">=</span><span class="source-c meta-block-c"> length</span><span class="source-c meta-block-c punctuation-terminator-statement-c">;</span>
<span class="source-c meta-block-c">    </span><span class="source-c meta-block-c keyword-control-c">return</span><span class="source-c meta-block-c"> val</span><span class="source-c meta-block-c punctuation-terminator-statement-c">;</span>
<span class="source-c meta-block-c punctuation-section-block-end-bracket-curly-c">}</span>
<span class="source-c"></span>
<span class="source-c storage-type-built-in-primitive-c">void</span><span class="source-c"> </span><span class="source-c meta-function-c meta-function-definition-parameters-c entity-name-function-c">int_array_destructor</span><span class="source-c meta-function-c meta-function-definition-parameters-c punctuation-section-parameters-begin-bracket-round-c">(</span><span class="source-c meta-function-c meta-function-definition-parameters-c storage-type-built-in-primitive-c">void</span><span class="source-c meta-function-c meta-function-definition-parameters-c keyword-operator-c">*</span><span class="source-c meta-function-c meta-function-definition-parameters-c"> </span><span class="source-c meta-function-c meta-function-definition-parameters-c variable-parameter-probably-c">arr</span><span class="source-c meta-function-c meta-function-definition-parameters-c punctuation-section-parameters-end-bracket-round-c">)</span><span class="source-c"> </span><span class="source-c meta-block-c punctuation-section-block-begin-bracket-curly-c">{</span>
<span class="source-c meta-block-c">    </span><span class="source-c meta-block-c meta-function-call-c entity-name-function-c">free</span><span class="source-c meta-block-c meta-function-call-c punctuation-section-arguments-begin-bracket-round-c">(</span><span class="source-c meta-block-c meta-function-call-c punctuation-section-parens-begin-bracket-round-c">(</span><span class="source-c meta-block-c meta-function-call-c punctuation-section-parens-begin-bracket-round-c">(</span><span class="source-c meta-block-c meta-function-call-c support-type-posix-reserved-c">int_array_t</span><span class="source-c meta-block-c meta-function-call-c keyword-operator-c">*</span><span class="source-c meta-block-c meta-function-call-c punctuation-section-parens-end-bracket-round-c">)</span><span class="source-c meta-block-c meta-function-call-c"> arr</span><span class="source-c meta-block-c meta-function-call-c punctuation-section-parens-end-bracket-round-c">)</span><span class="source-c meta-block-c meta-function-call-c punctuation-separator-pointer-access-c">-&gt;</span><span class="source-c meta-block-c meta-function-call-c variable-other-member-c">data</span><span class="source-c meta-block-c meta-function-call-c punctuation-section-arguments-end-bracket-round-c">)</span><span class="source-c meta-block-c punctuation-terminator-statement-c">;</span>
<span class="source-c meta-block-c">    </span><span class="source-c meta-block-c meta-function-call-c entity-name-function-c">free</span><span class="source-c meta-block-c meta-function-call-c punctuation-section-arguments-begin-bracket-round-c">(</span><span class="source-c meta-block-c meta-function-call-c">arr</span><span class="source-c meta-block-c meta-function-call-c punctuation-section-arguments-end-bracket-round-c">)</span><span class="source-c meta-block-c punctuation-terminator-statement-c">;</span>
<span class="source-c meta-block-c punctuation-section-block-end-bracket-curly-c">}</span>
</pre>
<p>Then, the sender reactor would use <code>lf_set_destructor</code> to specify how the memory set on an output port should be freed:</p>
<pre class="source-lf language-lf-c"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Source</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">output</span><span class="source-lf"> out:</span><span class="source-lf support-type-posix-reserved-cpp support-type-built-in-posix-reserved-cpp">int_array_t</span><span class="source-lf keyword-operator-cpp">*</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(</span><span class="source-lf support-variable-lflang">startup</span><span class="source-lf">) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> out </span><span class="source-lf meta-embedded-block-c">{=</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c entity-name-function-call-cpp">lf_set_destructor</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c">out</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> int_array_destructor</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c support-type-posix-reserved-cpp support-type-built-in-posix-reserved-cpp">int_array_t</span><span class="source-lf meta-embedded-block-c keyword-operator-cpp">*</span><span class="source-lf meta-embedded-block-c"> array </span><span class="source-lf meta-embedded-block-c keyword-operator-assignment-cpp">=</span><span class="source-lf meta-embedded-block-c">  </span><span class="source-lf meta-embedded-block-c entity-name-function-call-cpp">int_array_constructor</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c constant-numeric-decimal-cpp">2</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c keyword-control-for-cpp">for</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-section-parens-begin-bracket-round-cpp">(</span><span class="source-lf meta-embedded-block-c meta-parens-cpp storage-type-cpp storage-type-built-in-cpp">size_t</span><span class="source-lf meta-embedded-block-c meta-parens-cpp"> i </span><span class="source-lf meta-embedded-block-c meta-parens-cpp keyword-operator-assignment-cpp">=</span><span class="source-lf meta-embedded-block-c meta-parens-cpp"> </span><span class="source-lf meta-embedded-block-c meta-parens-cpp constant-numeric-decimal-cpp">0</span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-terminator-statement-cpp">;</span><span class="source-lf meta-embedded-block-c meta-parens-cpp"> i </span><span class="source-lf meta-embedded-block-c meta-parens-cpp keyword-operator-comparison-cpp">&lt;</span><span class="source-lf meta-embedded-block-c meta-parens-cpp"> </span><span class="source-lf meta-embedded-block-c meta-parens-cpp variable-other-object-access-cpp">array</span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c meta-parens-cpp variable-other-property-cpp">length</span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-terminator-statement-cpp">;</span><span class="source-lf meta-embedded-block-c meta-parens-cpp"> i</span><span class="source-lf meta-embedded-block-c meta-parens-cpp keyword-operator-increment-cpp">++</span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-section-parens-end-bracket-round-cpp">)</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-section-block-begin-bracket-curly-cpp">{</span>
<span class="source-lf meta-embedded-block-c meta-block-cpp">            </span><span class="source-lf meta-embedded-block-c meta-block-cpp variable-other-object-access-cpp">array</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c meta-block-cpp variable-other-property-cpp">data</span><span class="source-lf meta-embedded-block-c meta-block-cpp meta-bracket-square-access punctuation-definition-begin-bracket-square">[</span><span class="source-lf meta-embedded-block-c meta-block-cpp meta-bracket-square-access">i</span><span class="source-lf meta-embedded-block-c meta-block-cpp meta-bracket-square-access punctuation-definition-end-bracket-square">]</span><span class="source-lf meta-embedded-block-c meta-block-cpp"> </span><span class="source-lf meta-embedded-block-c meta-block-cpp keyword-operator-assignment-cpp">=</span><span class="source-lf meta-embedded-block-c meta-block-cpp"> i</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c meta-block-cpp">        </span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-section-block-end-bracket-curly-cpp">}</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c entity-name-function-call-cpp">lf_set</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c">out</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> array</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">    </span><span class="source-lf meta-embedded-block-c">=}</span>
<span class="source-lf">}</span>
</pre>
<p>A reactor receiving this array is straightforward. It just references the array elements as usual in C, as illustrated by this example:</p>
<pre class="source-lf language-lf-c"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Print</span><span class="source-lf">() {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">input</span><span class="source-lf"> in:</span><span class="source-lf support-type-posix-reserved-cpp support-type-built-in-posix-reserved-cpp">int_array_t</span><span class="source-lf keyword-operator-cpp">*</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(in) </span><span class="source-lf meta-embedded-block-c">{=</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c entity-name-function-call-cpp">printf</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp punctuation-definition-string-begin-cpp">&quot;</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp">Received: [</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp punctuation-definition-string-end-cpp">&quot;</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c keyword-control-for-cpp">for</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-section-parens-begin-bracket-round-cpp">(</span><span class="source-lf meta-embedded-block-c meta-parens-cpp storage-type-primitive-cpp storage-type-built-in-primitive-cpp">int</span><span class="source-lf meta-embedded-block-c meta-parens-cpp"> i </span><span class="source-lf meta-embedded-block-c meta-parens-cpp keyword-operator-assignment-cpp">=</span><span class="source-lf meta-embedded-block-c meta-parens-cpp"> </span><span class="source-lf meta-embedded-block-c meta-parens-cpp constant-numeric-decimal-cpp">0</span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-terminator-statement-cpp">;</span><span class="source-lf meta-embedded-block-c meta-parens-cpp"> i </span><span class="source-lf meta-embedded-block-c meta-parens-cpp keyword-operator-comparison-cpp">&lt;</span><span class="source-lf meta-embedded-block-c meta-parens-cpp"> </span><span class="source-lf meta-embedded-block-c meta-parens-cpp variable-other-object-access-cpp">in</span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c meta-parens-cpp variable-other-object-property-cpp">value</span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c meta-parens-cpp variable-other-property-cpp">length</span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-terminator-statement-cpp">;</span><span class="source-lf meta-embedded-block-c meta-parens-cpp"> i</span><span class="source-lf meta-embedded-block-c meta-parens-cpp keyword-operator-increment-cpp">++</span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-section-parens-end-bracket-round-cpp">)</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-section-block-begin-bracket-curly-cpp">{</span>
<span class="source-lf meta-embedded-block-c meta-block-cpp">            </span><span class="source-lf meta-embedded-block-c meta-block-cpp keyword-control-if-cpp">if</span><span class="source-lf meta-embedded-block-c meta-block-cpp"> </span><span class="source-lf meta-embedded-block-c meta-block-cpp meta-parens-cpp punctuation-section-parens-begin-bracket-round-cpp">(</span><span class="source-lf meta-embedded-block-c meta-block-cpp meta-parens-cpp">i </span><span class="source-lf meta-embedded-block-c meta-block-cpp meta-parens-cpp keyword-operator-comparison-cpp">&gt;</span><span class="source-lf meta-embedded-block-c meta-block-cpp meta-parens-cpp"> </span><span class="source-lf meta-embedded-block-c meta-block-cpp meta-parens-cpp constant-numeric-decimal-cpp">0</span><span class="source-lf meta-embedded-block-c meta-block-cpp meta-parens-cpp punctuation-section-parens-end-bracket-round-cpp">)</span><span class="source-lf meta-embedded-block-c meta-block-cpp"> </span><span class="source-lf meta-embedded-block-c meta-block-cpp entity-name-function-call-cpp">printf</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c meta-block-cpp string-quoted-double-cpp punctuation-definition-string-begin-cpp">&quot;</span><span class="source-lf meta-embedded-block-c meta-block-cpp string-quoted-double-cpp">, </span><span class="source-lf meta-embedded-block-c meta-block-cpp string-quoted-double-cpp punctuation-definition-string-end-cpp">&quot;</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c meta-block-cpp">            </span><span class="source-lf meta-embedded-block-c meta-block-cpp entity-name-function-call-cpp">printf</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c meta-block-cpp string-quoted-double-cpp punctuation-definition-string-begin-cpp">&quot;</span><span class="source-lf meta-embedded-block-c meta-block-cpp string-quoted-double-cpp constant-other-placeholder">%d</span><span class="source-lf meta-embedded-block-c meta-block-cpp string-quoted-double-cpp punctuation-definition-string-end-cpp">&quot;</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c meta-block-cpp"> </span><span class="source-lf meta-embedded-block-c meta-block-cpp variable-other-object-access-cpp">in</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c meta-block-cpp variable-other-object-property-cpp">value</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c meta-block-cpp variable-other-property-cpp">data</span><span class="source-lf meta-embedded-block-c meta-block-cpp meta-bracket-square-access punctuation-definition-begin-bracket-square">[</span><span class="source-lf meta-embedded-block-c meta-block-cpp meta-bracket-square-access">i</span><span class="source-lf meta-embedded-block-c meta-block-cpp meta-bracket-square-access punctuation-definition-end-bracket-square">]</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c meta-block-cpp">        </span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-section-block-end-bracket-curly-cpp">}</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c entity-name-function-call-cpp">printf</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp punctuation-definition-string-begin-cpp">&quot;</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp">]</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp constant-character-escape-cpp">\n</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp punctuation-definition-string-end-cpp">&quot;</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">    </span><span class="source-lf meta-embedded-block-c">=}</span>
<span class="source-lf">}</span>
</pre>
<p>The deallocation of memory for the data will occur automatically after the last reactor that receives a pointer to the data has finished using it, using the destructor specified by <code>lf_set_destructor</code> or <code>free</code> if none specified.</p>
<p>Occasionally, you will want an input or output type to be a pointer, but you don’t want the automatic memory allocation and deallocation. A simple example is a string type, which in C is <code>char*</code>. Consider the following (erroneous) reactor:</p>
<pre class="source-lf language-lf-c"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Erroneous</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">output</span><span class="source-lf"> out:</span><span class="source-lf storage-type-primitive-cpp storage-type-built-in-primitive-cpp">char</span><span class="source-lf keyword-operator-cpp">*</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(</span><span class="source-lf support-variable-lflang">startup</span><span class="source-lf">) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> out </span><span class="source-lf meta-embedded-block-c">{=</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c entity-name-function-call-cpp">lf_set</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c">out</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp punctuation-definition-string-begin-cpp">&quot;</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp">Hello World</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp punctuation-definition-string-end-cpp">&quot;</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">    </span><span class="source-lf meta-embedded-block-c">=}</span>
<span class="source-lf">}</span>
</pre>
<p>An output data type that ends with <code>*</code> signals to Lingua Franca that the message
is dynamically allocated and must be freed downstream after all recipients are
done with it. But the <code>"Hello World"</code> string here is statically allocated, so an
error will occur when the last downstream reactor to use this message attempts
to free the allocated memory. To avoid this for strings, you can use a special
<code>string</code> type as follows:</p>
<pre class="source-lf language-lf-c"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Fixed</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">output</span><span class="source-lf"> out:</span><span class="source-lf storage-type-lflang">string</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(</span><span class="source-lf support-variable-lflang">startup</span><span class="source-lf">) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> out </span><span class="source-lf meta-embedded-block-c">{=</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c entity-name-function-call-cpp">lf_set</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c">out</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp punctuation-definition-string-begin-cpp">&quot;</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp">Hello World</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp punctuation-definition-string-end-cpp">&quot;</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">    </span><span class="source-lf meta-embedded-block-c">=}</span>
<span class="source-lf">}</span>
</pre>
<p>The <code>string</code> type is equivalent to <code>char*</code>, but since it doesn’t end with <code>*</code>, it does not signal to Lingua Franca that the type is dynamically allocated. Lingua Franca only handles allocation and deallocation for types that are specified literally with a final <code>*</code> in the type name. The same trick can be used for any type where you don’t want automatic allocation and deallocation. E.g., the <a href="https://github.com/lf-lang/lingua-franca/blob/master/test/C/src/SendsPointerTest.lf">SendsPointer</a> example looks like this:</p>
<pre class="source-lf language-lf-c"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">SendsPointer</span><span class="source-lf">  {</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">preamble</span><span class="source-lf"> </span><span class="source-lf meta-embedded-block-c">{=</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c keyword-other-typedef-cpp">typedef</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c storage-type-primitive-cpp storage-type-built-in-primitive-cpp">int</span><span class="source-lf meta-embedded-block-c keyword-operator-cpp">*</span><span class="source-lf meta-embedded-block-c"> int_pointer</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">    </span><span class="source-lf meta-embedded-block-c">=}</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">output</span><span class="source-lf"> out:</span><span class="source-lf storage-type-lflang">int_pointer</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(</span><span class="source-lf support-variable-lflang">startup</span><span class="source-lf">) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> out </span><span class="source-lf meta-embedded-block-c">{=</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c storage-modifier-specifier-static-cpp">static</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c storage-type-primitive-cpp storage-type-built-in-primitive-cpp">int</span><span class="source-lf meta-embedded-block-c"> my_constant </span><span class="source-lf meta-embedded-block-c keyword-operator-assignment-cpp">=</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c constant-numeric-decimal-cpp">42</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c entity-name-function-call-cpp">lf_set</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c">out</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c keyword-operator-cpp">&amp;</span><span class="source-lf meta-embedded-block-c">my_constant</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span>
<span class="source-lf meta-embedded-block-c">    </span><span class="source-lf meta-embedded-block-c">=}</span>
<span class="source-lf">}</span>
</pre>
<p>The above technique can be used to abuse the reactor model of computation by communicating pointers to shared variables. This is generally a bad idea unless those shared variables are immutable. The result will likely be nondeterministic. Also, communicating pointers across machines that do not share memory will not work at all.</p>
<h3 id="mutable-inputs" style="position:relative;"><a href="#mutable-inputs" aria-label="mutable inputs permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Mutable Inputs</h3>
<p>Although it cannot be enforced in C, the receiving reactor should not modify the values stored in the array. Inputs are logically <em>immutable</em> because there may be several recipients. Any recipient that wishes to modify the array should make a copy of it. Fortunately, a utility is provided for this pattern. Consider the <a href="https://github.com/lf-lang/lingua-franca/blob/master/test/C/src/ArrayScale.lf">ArrayScale</a> example:</p>
<pre class="source-lf language-lf-c"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">ArrayScale</span><span class="source-lf">(scale:int(</span><span class="source-lf constant-numeric-int-lflang">2</span><span class="source-lf">)) {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">mutable</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">input</span><span class="source-lf"> in:</span><span class="source-lf storage-type-primitive-cpp storage-type-built-in-primitive-cpp">int</span><span class="source-lf">[]</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">output</span><span class="source-lf"> out:</span><span class="source-lf storage-type-primitive-cpp storage-type-built-in-primitive-cpp">int</span><span class="source-lf">[]</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(in) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> out </span><span class="source-lf meta-embedded-block-c">{=</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c keyword-control-for-cpp">for</span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-section-parens-begin-bracket-round-cpp">(</span><span class="source-lf meta-embedded-block-c meta-parens-cpp storage-type-primitive-cpp storage-type-built-in-primitive-cpp">int</span><span class="source-lf meta-embedded-block-c meta-parens-cpp"> i </span><span class="source-lf meta-embedded-block-c meta-parens-cpp keyword-operator-assignment-cpp">=</span><span class="source-lf meta-embedded-block-c meta-parens-cpp"> </span><span class="source-lf meta-embedded-block-c meta-parens-cpp constant-numeric-decimal-cpp">0</span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-terminator-statement-cpp">;</span><span class="source-lf meta-embedded-block-c meta-parens-cpp"> i </span><span class="source-lf meta-embedded-block-c meta-parens-cpp keyword-operator-comparison-cpp">&lt;</span><span class="source-lf meta-embedded-block-c meta-parens-cpp"> </span><span class="source-lf meta-embedded-block-c meta-parens-cpp variable-other-object-access-cpp">in</span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c meta-parens-cpp variable-other-property-cpp">length</span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-terminator-statement-cpp">;</span><span class="source-lf meta-embedded-block-c meta-parens-cpp"> i</span><span class="source-lf meta-embedded-block-c meta-parens-cpp keyword-operator-increment-cpp">++</span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-section-parens-end-bracket-round-cpp">)</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-section-block-begin-bracket-curly-cpp">{</span>
<span class="source-lf meta-embedded-block-c meta-block-cpp">            </span><span class="source-lf meta-embedded-block-c meta-block-cpp variable-other-object-access-cpp">in</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c meta-block-cpp variable-other-property-cpp">value</span><span class="source-lf meta-embedded-block-c meta-block-cpp meta-bracket-square-access punctuation-definition-begin-bracket-square">[</span><span class="source-lf meta-embedded-block-c meta-block-cpp meta-bracket-square-access">i</span><span class="source-lf meta-embedded-block-c meta-block-cpp meta-bracket-square-access punctuation-definition-end-bracket-square">]</span><span class="source-lf meta-embedded-block-c meta-block-cpp"> </span><span class="source-lf meta-embedded-block-c meta-block-cpp keyword-operator-assignment-compound-cpp">*=</span><span class="source-lf meta-embedded-block-c meta-block-cpp"> </span><span class="source-lf meta-embedded-block-c meta-block-cpp variable-other-object-access-cpp">self</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c meta-block-cpp variable-other-property-cpp">scale</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c meta-block-cpp">        </span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-section-block-end-bracket-curly-cpp">}</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c entity-name-function-call-cpp">lf_set_token</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c">out</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c variable-other-object-access-cpp">in</span><span class="source-lf meta-embedded-block-c punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c variable-other-property-cpp">token</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">    </span><span class="source-lf meta-embedded-block-c">=}</span>
<span class="source-lf">}</span>
</pre>
<p>Here, the input is declared <span class="lf_keywords">mutable</span>, which means that any reaction is free to
modify the input. If this reactor is the only recipient of the array or the last
recipient of the array, then this will not make a copy of the array but rather use
the original array. Otherwise, it will use a copy. By default, the assignment
operator (<code>=</code>) is used to copy the data. However, the sender can also specify
a copy constructor to be used by calling <code>lf_set_copy_constructor</code> on the
output port.</p>
<p>The above <code>ArrayScale</code> reactor modifies the array and then forwards it to its output port using the <code>lf_set_token()</code> macro. That macro further delegates to downstream reactors the responsibility for freeing dynamically allocated memory once all readers have completed their work.</p>
<p>If the above code were not to forward the array, then the dynamically allocated memory will be automatically freed when this reactor is done with it.</p>
<p>The above three reactors can be combined into a pipeline as follows:</p>
<pre class="source-lf language-lf"><span class="source-lf storage-modifier-lflang">main</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">ArrayScaleTest</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf variable-other-constant-reactorinstance-lflang">s</span><span class="source-lf"> </span><span class="source-lf keyword-operator-lflang">=</span><span class="source-lf"> </span><span class="source-lf keyword-operator-new-lflang">new</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">ArrayPrint</span><span class="source-lf">();</span>
<span class="source-lf">    </span><span class="source-lf variable-other-constant-reactorinstance-lflang">c</span><span class="source-lf"> </span><span class="source-lf keyword-operator-lflang">=</span><span class="source-lf"> </span><span class="source-lf keyword-operator-new-lflang">new</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">ArrayScale</span><span class="source-lf">();</span>
<span class="source-lf">    </span><span class="source-lf variable-other-constant-reactorinstance-lflang">p</span><span class="source-lf"> </span><span class="source-lf keyword-operator-lflang">=</span><span class="source-lf"> </span><span class="source-lf keyword-operator-new-lflang">new</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Print</span><span class="source-lf">();</span>
<span class="source-lf">    </span><span class="source-lf variable-other-constant-reactorinstance-lflang">s</span><span class="source-lf keyword-operator-lflang">.</span><span class="source-lf variable-other-lflang">out</span><span class="source-lf"> </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> </span><span class="source-lf variable-other-constant-reactorinstance-lflang">c</span><span class="source-lf keyword-operator-lflang">.</span><span class="source-lf variable-other-lflang">in</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf variable-other-constant-reactorinstance-lflang">c</span><span class="source-lf keyword-operator-lflang">.</span><span class="source-lf variable-other-lflang">out</span><span class="source-lf"> </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> </span><span class="source-lf variable-other-constant-reactorinstance-lflang">p</span><span class="source-lf keyword-operator-lflang">.</span><span class="source-lf variable-other-lflang">in</span><span class="source-lf">;</span>
<span class="source-lf">}</span>
</pre>
<p>In this composite, the array is allocated by <code>ArrayPrint</code>, modified by <code>ArrayScale</code>, and deallocated (freed) after <code>Print</code> has reacted. No copy is necessary because <code>ArrayScale</code> is the only recipient of the original array.</p>
<p>Inputs and outputs can also be dynamically allocated structs. In fact, Lingua Franca’s C target will treat any input or output data type that ends with <code>[]</code> or <code>*</code> specially by providing utilities for allocating memory and modifying and forwarding. Deallocation of the allocated memory is automatic. The complete set of utilities is given below.</p>
<h3 id="string-types" style="position:relative;"><a href="#string-types" aria-label="string types permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>String Types</h3>
<p>String types in C are <code>char*</code>. But, as explained above, types ending with <code>*</code> are interpreted specially to provide automatic memory management, which we generally don’t want with strings (a string that is a compile-time constant must not be freed). You could enclose the type as <code>{= char* =}</code>, but to avoid this awkwardness, the header files include a typedef that permits using <code>string</code> instead of <code>char*</code>. For example (from <a href="https://github.com/lf-lang/lingua-franca/blob/master/test/C/src/DelayString.lf">DelayString.lf</a>):</p>
<pre class="source-lf language-lf-c"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">DelayString</span><span class="source-lf">(delay:</span><span class="source-lf storage-type-lflang">time</span><span class="source-lf">(</span><span class="source-lf constant-numeric-int-lflang">100</span><span class="source-lf"> </span><span class="source-lf constant-numeric-lflang">msec</span><span class="source-lf">)) {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">input</span><span class="source-lf"> in:</span><span class="source-lf storage-type-lflang">string</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">output</span><span class="source-lf"> out:</span><span class="source-lf storage-type-lflang">string</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">logical</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">action</span><span class="source-lf"> a:</span><span class="source-lf storage-type-lflang">string</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(a) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> out </span><span class="source-lf meta-embedded-block-c">{=</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c entity-name-function-call-cpp">lf_set</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c">out</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c variable-other-object-access-cpp">a</span><span class="source-lf meta-embedded-block-c punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c variable-other-property-cpp">value</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">    </span><span class="source-lf meta-embedded-block-c">=}</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(in) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> a </span><span class="source-lf meta-embedded-block-c">{=</span>
<span class="source-lf meta-embedded-block-c comment-line-double-slash-cpp">        </span><span class="source-lf meta-embedded-block-c comment-line-double-slash-cpp punctuation-definition-comment-cpp">//</span><span class="source-lf meta-embedded-block-c comment-line-double-slash-cpp"> The following copies the char*, not the string.</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c entity-name-function-call-cpp">lf_schedule_copy</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c">a</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c variable-other-object-access-cpp">self</span><span class="source-lf meta-embedded-block-c punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c variable-other-property-cpp">delay</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c keyword-operator-cpp">&amp;</span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-section-parens-begin-bracket-round-cpp">(</span><span class="source-lf meta-embedded-block-c meta-parens-cpp variable-other-object-access-cpp">in</span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c meta-parens-cpp variable-other-property-cpp">value</span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-section-parens-end-bracket-round-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c constant-numeric-decimal-cpp">1</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">    </span><span class="source-lf meta-embedded-block-c">=}</span>
<span class="source-lf">}</span>
</pre>
<h3 id="macros-for-setting-output-values" style="position:relative;"><a href="#macros-for-setting-output-values" aria-label="macros for setting output values permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Macros For Setting Output Values</h3>
<p>In all of the following, <code>&#x3C;out></code> is the name of the output and <code>&#x3C;value></code> is the value to be sent.</p>
<blockquote>
<p><code>lf_set(&#x3C;out>, &#x3C;value>);</code></p>
</blockquote>
<p>Set the specified output (or input of a contained reactor) to the specified
value using shallow copy. <code>lf_set</code> can be used with all supported data types
(including type declarations that end with <code>*</code> or <code>[]</code>).</p>
<blockquote>
<p><code>lf_set_token(&#x3C;out>, &#x3C;value>);</code></p>
</blockquote>
<p>This version is used to directly set the underlying reference-counted token in
outputs with a type declaration ending with <code>*</code> (any pointer) or <code>[]</code> (any
array). The <code>&#x3C;value></code> argument should be a struct of type <code>token_t</code>. It should
be rarely necessary to have the need to create your own (dynamically allocated)
instance of <code>token_t</code>. Hence, use <code>lf_set_token</code> with caution.</p>
<p>Consider the
<a href="https://github.com/lf-lang/lingua-franca/blob/master/test/C/src/SetToken.lf">SetToken.lf</a>
example:</p>
<pre class="source-lf language-lf-c"><span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Source</span><span class="source-lf"> {</span>
<span class="source-lf">        </span><span class="source-lf storage-modifier-lflang">output</span><span class="source-lf"> out:</span><span class="source-lf storage-type-primitive-cpp storage-type-built-in-primitive-cpp">int</span><span class="source-lf keyword-operator-cpp">*</span><span class="source-lf">;</span>
<span class="source-lf">        </span><span class="source-lf storage-modifier-lflang">logical</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">action</span><span class="source-lf"> a:</span><span class="source-lf storage-type-primitive-cpp storage-type-built-in-primitive-cpp">int</span><span class="source-lf">;</span>
<span class="source-lf">        </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(</span><span class="source-lf support-variable-lflang">startup</span><span class="source-lf">) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> a </span><span class="source-lf meta-embedded-block-c">{=</span>
<span class="source-lf meta-embedded-block-c">            </span><span class="source-lf meta-embedded-block-c entity-name-function-call-cpp">lf_schedule_int</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c">a</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c entity-name-function-call-cpp">MSEC</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c constant-numeric-decimal-cpp">200</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c constant-numeric-decimal-cpp">42</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c">=}</span>
<span class="source-lf">        </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(a) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> out </span><span class="source-lf meta-embedded-block-c">{=</span>
<span class="source-lf meta-embedded-block-c">            </span><span class="source-lf meta-embedded-block-c entity-name-function-call-cpp">lf_set_token</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c">out</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c variable-other-object-access-cpp">a</span><span class="source-lf meta-embedded-block-c punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c variable-other-property-cpp">token</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c">=}</span>
<span class="source-lf">    }</span>
</pre>
<p>Here, the first reaction schedules an integer-valued action to trigger after 200 microseconds. As explained below, action payloads are carried by tokens. The second reaction grabs the token rather than the value using the syntax <code>a->token</code> (the name of the action followed by <code>->token</code>). It then forwards the token to the output. The output data type is <code>int*</code> not <code>int</code> because the token carries a pointer to dynamically allocated memory that contains the value. All inputs and outputs with types ending in <code>*</code> or <code>[]</code> are carried by tokens.</p>
<blockquote>
<p><code>lf_set_destructor(&#x3C;out>, &#x3C;destructor>);</code></p>
</blockquote>
<p>Specify the destructor <code>destructor</code> used to deallocate any dynamic data set on the output port <code>out</code>.</p>
<blockquote>
<p><code>lf_set_copy_constructor(&#x3C;out>, &#x3C;copy_constructor>);</code></p>
</blockquote>
<p>Specify the <code>copy_constructor</code> used to copy construct any dynamic data set on the output port <code>out</code> if the receiving port is <span class="lf_keywords">mutable</span>.</p>
<p><code>lf_set</code> (and <code>lf_set_token</code>) will overwrite any output value previously set at the same logical time and will cause the final output value to be sent to all reactors connected to the output. They also set a local <code>&#x3C;out>->is_present</code> variable to true. This can be used to subsequently test whether the output value has been set.</p>
</div>
<div class="lf-cpp">
<p>In the body of a reaction in the C++ target, the value of an input is obtained using the syntax <code>*name.get()</code>, where <code>name</code> is the name of the input port. Similarly, outputs are set using a <code>set()</code> method on an output port. For examples, see <a href="/docs/handbook/inputs-and-outputs">Inputs and Outputs</a>.</p>
<p>Note that <code>get()</code> always returns a pointer to the actual value. Thus the pointer needs to be dereferenced with <code>*</code> to obtain the value. (See <a href="#sending-and-receiving-large-data-types">Sending and Receiving Large Data Types</a> for an explanation of the exact mechanisms behind this pointer access).
To determine whether an input is present, <code>name.is_present()</code> can be used. Since <code>get()</code> returns a <code>nullptr</code> if no value is present, <code>name.get() != nullptr</code> can be used alternatively for checking presence.</p>
<h3 id="sending-and-receiving-large-data-types" style="position:relative;"><a href="#sending-and-receiving-large-data-types" aria-label="sending and receiving large data types permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Sending and Receiving Large Data Types</h3>
<p>You can define your own data types in C++ or use types defined in a library and send and receive those. Consider the <a href="https://github.com/lf-lang/lingua-franca/blob/master/test/Cpp/src/StructAsType.lf">StructAsType</a> example:</p>
<pre class="source-lf language-lf-cpp"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">StructAsType</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">public</span><span class="source-lf"> </span><span class="source-lf keyword-control-lflang">preamble</span><span class="source-lf"> </span><span class="source-lf meta-embedded-block-cpp">{=</span>
<span class="source-lf meta-embedded-block-cpp">        </span><span class="source-lf meta-embedded-block-cpp meta-block-struct-cpp meta-head-struct-cpp storage-type-struct-cpp">struct</span><span class="source-lf meta-embedded-block-cpp meta-block-struct-cpp"> </span><span class="source-lf meta-embedded-block-cpp meta-block-struct-cpp entity-name-type-struct-cpp">Hello</span><span class="source-lf meta-embedded-block-cpp meta-block-struct-cpp"> </span><span class="source-lf meta-embedded-block-cpp meta-block-struct-cpp meta-head-struct-cpp punctuation-section-block-begin-bracket-curly-struct-cpp">{</span>
<span class="source-lf meta-embedded-block-cpp meta-block-struct-cpp meta-body-struct-cpp">            </span><span class="source-lf meta-embedded-block-cpp meta-block-struct-cpp meta-body-struct-cpp entity-name-scope-resolution-cpp">std</span><span class="source-lf meta-embedded-block-cpp meta-block-struct-cpp meta-body-struct-cpp punctuation-separator-namespace-access-cpp punctuation-separator-scope-resolution-cpp">::</span><span class="source-lf meta-embedded-block-cpp meta-block-struct-cpp meta-body-struct-cpp">string name</span><span class="source-lf meta-embedded-block-cpp meta-block-struct-cpp meta-body-struct-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-cpp meta-block-struct-cpp meta-body-struct-cpp">            </span><span class="source-lf meta-embedded-block-cpp meta-block-struct-cpp meta-body-struct-cpp storage-type-primitive-cpp storage-type-built-in-primitive-cpp">int</span><span class="source-lf meta-embedded-block-cpp meta-block-struct-cpp meta-body-struct-cpp"> value</span><span class="source-lf meta-embedded-block-cpp meta-block-struct-cpp meta-body-struct-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-cpp meta-block-struct-cpp meta-body-struct-cpp">        </span><span class="source-lf meta-embedded-block-cpp meta-block-struct-cpp meta-body-struct-cpp punctuation-section-block-end-bracket-curly-struct-cpp">}</span><span class="source-lf meta-embedded-block-cpp meta-block-struct-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-cpp">    </span><span class="source-lf meta-embedded-block-cpp">=}</span>
<span class="source-lf"></span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">output</span><span class="source-lf"> out:</span><span class="source-lf entity-name-type-lflang">Hello</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(</span><span class="source-lf support-variable-lflang">startup</span><span class="source-lf">) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> out </span><span class="source-lf meta-embedded-block-cpp">{=</span>
<span class="source-lf meta-embedded-block-cpp">        Hello hello</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp punctuation-section-block-begin-bracket-curly-cpp">{</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp string-quoted-double-cpp punctuation-definition-string-begin-cpp">&quot;</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp string-quoted-double-cpp">Earth, 42};</span>
<span class="source-lf meta-embedded-block-cpp meta-block-cpp string-quoted-double-cpp">        out.set(hello);</span>
<span class="source-lf meta-embedded-block-cpp meta-block-cpp string-quoted-double-cpp">    =}</span>
<span class="source-lf meta-embedded-block-cpp meta-block-cpp string-quoted-double-cpp">}</span>
</pre>
<p>The <strong>preamble</strong> code defines a struct data type. In the reaction to <strong>startup</strong>, the reactor creates an instance of this struct on the stack (as a local variable named <code>hello</code>) and then copies that instance to the output using the <code>set()</code> method. For this reason, the C++ reactor runtime provides more sophisticated ways to allocate objects and send them via ports.</p>
<p>The C++ library defines two types of smart pointers that the runtime uses internally to implement the exchange of data between ports. These are <code>reactor::MutableValuePtr&#x3C;T></code> and <code>reactor::ImmutableValuePtr&#x3C;T></code>. <code>reactor::MutableValuePtr&#x3C;T></code> is a wrapper around <a href="https://en.cppreference.com/w/cpp/memory/unique_ptr"><code>std::unique_ptr</code></a> and provides read and write access to the value hold, while ensuring that the value has a unique owner. In contrast, <code>reactor::ImmutableValuePtr&#x3C;T></code> is a wrapper around <a href="https://en.cppreference.com/w/cpp/memory/shared_ptr"><code>std::shared_pointer</code></a> and provides read only (const) access to the value it holds. This allows data to be shared between reactions of various reactors, while guarantee data consistency. Similar to <code>std::make_unique</code> and <code>std::make_shared</code>, the reactor library provides convenient function for creating mutable and immutable values pointers: <code>reactor::make_mutable_value&#x3C;T>(...)</code> and <code>reactor::make_immutable_value&#x3C;T>(...)</code>.</p>
<p>In fact this code from the example above:</p>
<pre class="source-lf language-cpp"><span class="source-cpp">Hello hello</span><span class="source-cpp meta-block-cpp punctuation-section-block-begin-bracket-curly-cpp">{</span><span class="source-cpp meta-block-cpp string-quoted-double-cpp punctuation-definition-string-begin-cpp">&quot;</span><span class="source-cpp meta-block-cpp string-quoted-double-cpp">Earth, 42</span><span class="source-cpp meta-block-cpp string-quoted-double-cpp punctuation-definition-string-end-cpp">&quot;</span><span class="source-cpp meta-block-cpp punctuation-section-block-end-bracket-curly-cpp">}</span><span class="source-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-cpp variable-other-object-access-cpp">out</span><span class="source-cpp punctuation-separator-dot-access-cpp">.</span><span class="source-cpp entity-name-function-member-cpp">set</span><span class="source-cpp punctuation-section-arguments-begin-bracket-round-function-member-cpp">(</span><span class="source-cpp">hello</span><span class="source-cpp punctuation-section-arguments-end-bracket-round-function-member-cpp">)</span><span class="source-cpp punctuation-terminator-statement-cpp">;</span>
</pre>
<p>implicitly invokes <code>reactor::make_immutable_value&#x3C;Hello>(hello)</code> and could be rewritten as</p>
<pre class="source-lf language-cpp"><span class="source-cpp">Hello hello</span><span class="source-cpp meta-block-cpp punctuation-section-block-begin-bracket-curly-cpp">{</span><span class="source-cpp meta-block-cpp string-quoted-double-cpp punctuation-definition-string-begin-cpp">&quot;</span><span class="source-cpp meta-block-cpp string-quoted-double-cpp">Earth, 42</span><span class="source-cpp meta-block-cpp string-quoted-double-cpp punctuation-definition-string-end-cpp">&quot;</span><span class="source-cpp meta-block-cpp punctuation-section-block-end-bracket-curly-cpp">}</span><span class="source-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-cpp variable-other-object-access-cpp">out</span><span class="source-cpp punctuation-separator-dot-access-cpp">.</span><span class="source-cpp entity-name-function-member-cpp">set</span><span class="source-cpp punctuation-section-arguments-begin-bracket-round-function-member-cpp">(</span><span class="source-cpp entity-name-scope-resolution-function-call-cpp">reactor</span><span class="source-cpp punctuation-separator-namespace-access-cpp punctuation-separator-scope-resolution-function-call-cpp">::</span><span class="source-cpp entity-name-function-call-cpp">make_immutable_value</span><span class="source-cpp meta-template-call-cpp meta-template-call-cpp punctuation-section-angle-brackets-begin-template-call-cpp">&lt;</span><span class="source-cpp meta-template-call-cpp meta-template-call-cpp meta-qualified_type-cpp entity-name-type-cpp">Hello</span><span class="source-cpp meta-template-call-cpp meta-template-call-cpp punctuation-section-angle-brackets-end-template-call-cpp">&gt;</span><span class="source-cpp punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-cpp">hello</span><span class="source-cpp punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-cpp punctuation-section-arguments-end-bracket-round-function-member-cpp">)</span><span class="source-cpp punctuation-terminator-statement-cpp">;</span>
</pre>
<p>This will invoke the copy constructor of <code>Hello</code>, copying its content from the <code>hello</code> instance to the newly created <code>reactor::ImmutableValuePtr&#x3C;Hello></code>.</p>
<p>Since copying large objects is inefficient, the move semantics of C++ can be used to move the ownership of object instead of copying it. This can be done in the following two ways. First, by directly creating a mutable or immutable value pointer, where a mutable pointer allows modification of the object after it has been created:</p>
<pre class="source-lf language-cpp"><span class="source-cpp storage-type-primitive-cpp storage-type-built-in-primitive-cpp">auto</span><span class="source-cpp"> hello </span><span class="source-cpp keyword-operator-assignment-cpp">=</span><span class="source-cpp"> </span><span class="source-cpp entity-name-scope-resolution-cpp">reactor</span><span class="source-cpp punctuation-separator-namespace-access-cpp punctuation-separator-scope-resolution-cpp">::</span><span class="source-cpp entity-name-function-call-cpp">make_mutable_value</span><span class="source-cpp meta-template-call-cpp meta-template-call-cpp punctuation-section-angle-brackets-begin-template-call-cpp">&lt;</span><span class="source-cpp meta-template-call-cpp meta-template-call-cpp meta-qualified_type-cpp entity-name-type-cpp">Hello</span><span class="source-cpp meta-template-call-cpp meta-template-call-cpp punctuation-section-angle-brackets-end-template-call-cpp">&gt;</span><span class="source-cpp punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-cpp string-quoted-double-cpp punctuation-definition-string-begin-cpp">&quot;</span><span class="source-cpp string-quoted-double-cpp">Earth</span><span class="source-cpp string-quoted-double-cpp punctuation-definition-string-end-cpp">&quot;</span><span class="source-cpp punctuation-separator-delimiter-comma-cpp">,</span><span class="source-cpp"> </span><span class="source-cpp constant-numeric-decimal-cpp">42</span><span class="source-cpp punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-cpp variable-other-object-access-cpp">hello</span><span class="source-cpp punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-cpp variable-other-property-cpp">name</span><span class="source-cpp"> </span><span class="source-cpp keyword-operator-assignment-cpp">=</span><span class="source-cpp"> </span><span class="source-cpp string-quoted-double-cpp punctuation-definition-string-begin-cpp">&quot;</span><span class="source-cpp string-quoted-double-cpp">Mars</span><span class="source-cpp string-quoted-double-cpp punctuation-definition-string-end-cpp">&quot;</span><span class="source-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-cpp variable-other-object-access-cpp">out</span><span class="source-cpp punctuation-separator-dot-access-cpp">.</span><span class="source-cpp entity-name-function-member-cpp">set</span><span class="source-cpp punctuation-section-arguments-begin-bracket-round-function-member-cpp">(</span><span class="source-cpp entity-name-scope-resolution-function-call-cpp">std</span><span class="source-cpp punctuation-separator-namespace-access-cpp punctuation-separator-scope-resolution-function-call-cpp">::</span><span class="source-cpp entity-name-function-call-cpp">move</span><span class="source-cpp punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-cpp">hello</span><span class="source-cpp punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-cpp punctuation-section-arguments-end-bracket-round-function-member-cpp">)</span><span class="source-cpp punctuation-terminator-statement-cpp">;</span>
</pre>
<p>An example of this can be found in <a href="https://github.com/lf-lang/lingua-franca/blob/master/test/Cpp/src/StructPrint.lf">StructPrint.lf</a>. Not that after the call to <code>std::move</code>, hello is <code>nullptr</code> and the reaction cannot modify the object anymore. Alternatively, if no modification is requires, the object can be instantiated directly in the call to <code>set()</code> as follows:</p>
<pre class="source-lf language-cpp"><span class="source-cpp variable-other-object-access-cpp">out</span><span class="source-cpp punctuation-separator-dot-access-cpp">.</span><span class="source-cpp entity-name-function-member-cpp">set</span><span class="source-cpp punctuation-section-arguments-begin-bracket-round-function-member-cpp">(</span><span class="source-cpp">{</span><span class="source-cpp string-quoted-double-cpp punctuation-definition-string-begin-cpp">&quot;</span><span class="source-cpp string-quoted-double-cpp">Earth</span><span class="source-cpp string-quoted-double-cpp punctuation-definition-string-end-cpp">&quot;</span><span class="source-cpp punctuation-separator-delimiter-comma-cpp">,</span><span class="source-cpp"> </span><span class="source-cpp constant-numeric-decimal-cpp">42</span><span class="source-cpp">}</span><span class="source-cpp punctuation-section-arguments-end-bracket-round-function-member-cpp">)</span><span class="source-cpp punctuation-terminator-statement-cpp">;</span>
</pre>
<p>An example of this can be found in <a href="https://github.com/lf-lang/lingua-franca/blob/master/test/Cpp/src/StructAsTypeDirect.lf">StructAsTypeDirect</a>.</p>
<p>Getting a value from an input port of type <code>T</code> via <code>get()</code> always returns an <code>reactor::ImmutableValuePtr&#x3C;T></code>. This ensures that the value cannot be modified by multiple reactors receiving the same value, as this could lead to an inconsistent state and nondeterminism in a multi-threaded execution. An immutable value pointer can be converted to a mutable pointer by calling <code>get_mutable_copy</code>. For instance, the <a href="https://github.com/lf-lang/lingua-franca/blob/master/test/Cpp/src/ArrayScale.lf">ArrayScale</a> reactor modifies elements of the array it receives before sending it to the next reactor:</p>
<pre class="source-lf language-lf-cpp"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Scale</span><span class="source-lf">(scale:int(</span><span class="source-lf constant-numeric-int-lflang">2</span><span class="source-lf">)) {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">input</span><span class="source-lf"> in:</span><span class="source-lf storage-type-primitive-cpp storage-type-built-in-primitive-cpp">int</span><span class="source-lf meta-bracket-square-access punctuation-definition-begin-bracket-square">[</span><span class="source-lf meta-bracket-square-access constant-numeric-decimal-cpp">3</span><span class="source-lf meta-bracket-square-access punctuation-definition-end-bracket-square">]</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">output</span><span class="source-lf"> out:</span><span class="source-lf storage-type-primitive-cpp storage-type-built-in-primitive-cpp">int</span><span class="source-lf meta-bracket-square-access punctuation-definition-begin-bracket-square">[</span><span class="source-lf meta-bracket-square-access constant-numeric-decimal-cpp">3</span><span class="source-lf meta-bracket-square-access punctuation-definition-end-bracket-square">]</span><span class="source-lf">;</span>
<span class="source-lf"></span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(in) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> out </span><span class="source-lf meta-embedded-block-cpp">{=</span>
<span class="source-lf meta-embedded-block-cpp">        </span><span class="source-lf meta-embedded-block-cpp storage-type-primitive-cpp storage-type-built-in-primitive-cpp">auto</span><span class="source-lf meta-embedded-block-cpp"> array </span><span class="source-lf meta-embedded-block-cpp keyword-operator-assignment-cpp">=</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp variable-other-object-access-cpp">in</span><span class="source-lf meta-embedded-block-cpp punctuation-separator-dot-access-cpp">.</span><span class="source-lf meta-embedded-block-cpp entity-name-function-member-cpp">get</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-begin-bracket-round-function-member-cpp">(</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-end-bracket-round-function-member-cpp">)</span><span class="source-lf meta-embedded-block-cpp punctuation-separator-dot-access-cpp">.</span><span class="source-lf meta-embedded-block-cpp entity-name-function-member-cpp">get_mutable_copy</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-begin-bracket-round-function-member-cpp">(</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-end-bracket-round-function-member-cpp">)</span><span class="source-lf meta-embedded-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-cpp">        </span><span class="source-lf meta-embedded-block-cpp keyword-control-for-cpp">for</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp punctuation-section-parens-begin-bracket-round-cpp">(</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp storage-type-primitive-cpp storage-type-built-in-primitive-cpp">int</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp"> i </span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp keyword-operator-assignment-cpp">=</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp"> </span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp constant-numeric-decimal-cpp">0</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp punctuation-terminator-statement-cpp">;</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp"> i </span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp keyword-operator-comparison-cpp">&lt;</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp"> </span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp variable-other-object-access-cpp">array</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp entity-name-function-member-cpp">size</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp punctuation-section-arguments-begin-bracket-round-function-member-cpp">(</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp punctuation-section-arguments-end-bracket-round-function-member-cpp">)</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp punctuation-terminator-statement-cpp">;</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp"> i</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp keyword-operator-increment-cpp">++</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp punctuation-section-parens-end-bracket-round-cpp">)</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp meta-block-cpp punctuation-section-block-begin-bracket-curly-cpp">{</span>
<span class="source-lf meta-embedded-block-cpp meta-block-cpp">            </span><span class="source-lf meta-embedded-block-cpp meta-block-cpp meta-parens-cpp punctuation-section-parens-begin-bracket-round-cpp">(</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp meta-parens-cpp keyword-operator-cpp">*</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp meta-parens-cpp">array</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp meta-parens-cpp punctuation-section-parens-end-bracket-round-cpp">)</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp meta-bracket-square-access punctuation-definition-begin-bracket-square">[</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp meta-bracket-square-access">i</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp meta-bracket-square-access punctuation-definition-end-bracket-square">]</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp meta-block-cpp keyword-operator-assignment-cpp">=</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp meta-block-cpp meta-parens-cpp punctuation-section-parens-begin-bracket-round-cpp">(</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp meta-parens-cpp keyword-operator-cpp">*</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp meta-parens-cpp">array</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp meta-parens-cpp punctuation-section-parens-end-bracket-round-cpp">)</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp meta-bracket-square-access punctuation-definition-begin-bracket-square">[</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp meta-bracket-square-access">i</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp meta-bracket-square-access punctuation-definition-end-bracket-square">]</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp meta-block-cpp keyword-operator-cpp">*</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp"> scale</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-cpp meta-block-cpp">        </span><span class="source-lf meta-embedded-block-cpp meta-block-cpp punctuation-section-block-end-bracket-curly-cpp">}</span>
<span class="source-lf meta-embedded-block-cpp">        </span><span class="source-lf meta-embedded-block-cpp variable-other-object-access-cpp">out</span><span class="source-lf meta-embedded-block-cpp punctuation-separator-dot-access-cpp">.</span><span class="source-lf meta-embedded-block-cpp entity-name-function-member-cpp">set</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-begin-bracket-round-function-member-cpp">(</span><span class="source-lf meta-embedded-block-cpp entity-name-scope-resolution-function-call-cpp">std</span><span class="source-lf meta-embedded-block-cpp punctuation-separator-namespace-access-cpp punctuation-separator-scope-resolution-function-call-cpp">::</span><span class="source-lf meta-embedded-block-cpp entity-name-function-call-cpp">move</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-cpp">array</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-end-bracket-round-function-member-cpp">)</span><span class="source-lf meta-embedded-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-cpp">    </span><span class="source-lf meta-embedded-block-cpp">=}</span>
<span class="source-lf">}</span>
</pre>
<p>Currently <code>get_mutable_copy()</code> always copies the contained value to safely create a mutable pointer. However, a future implementation could optimize this by checking if any other reaction is accessing the same value. If not, the value can simply be moved from the immutable pointer to a mutable one.</p>
</div>
<div class="lf-py">
<p>In the body of a reaction in the Python target, the value of an input is
obtained using the syntax <code>name.value</code>, where <code>name</code> is the name of the input
port. To determine whether an input is present, use <code>name.is_present</code>. To
produce an output, use the syntax <code>name.set(value)</code>. The <code>value</code> can be any
valid Python object. For simple examples, see <a href="/docs/handbook/inputs-and-outputs">Inputs and
Outputs</a>.</p>
<h3 id="sending-and-receiving-objects" style="position:relative;"><a href="#sending-and-receiving-objects" aria-label="sending and receiving objects permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Sending and Receiving Objects</h3>
<p>You can define your own data types in Python and send and receive those. Consider the <a href="https://github.com/lf-lang/lingua-franca/blob/master/test/Python/src/StructAsType.lf">StructAsType</a> example:</p>
<pre class="source-lf language-lf-py"><span class="source-lf meta-targetspec-lflang keyword-control-lflang">target</span><span class="source-lf meta-targetspec-lflang"> </span><span class="source-lf meta-targetspec-lflang constant-language-lflang">Python</span><span class="source-lf meta-targetspec-lflang"> {</span><span class="source-lf meta-targetspec-lflang variable-parameter-lflang">files</span><span class="source-lf meta-targetspec-lflang">: include</span><span class="source-lf meta-targetspec-lflang keyword-operator-lflang">/</span><span class="source-lf meta-targetspec-lflang variable-other-constant-reactorinstance-lflang">hello</span><span class="source-lf meta-targetspec-lflang keyword-operator-lflang">.</span><span class="source-lf meta-targetspec-lflang variable-other-lflang">py</span><span class="source-lf meta-targetspec-lflang">}</span><span class="source-lf meta-targetspec-lflang">;</span>
<span class="source-lf"></span>
<span class="source-lf keyword-control-lflang">preamble</span><span class="source-lf"> </span><span class="source-lf meta-embedded-block-py">{=</span>
<span class="source-lf meta-embedded-block-py keyword-control-import-python">import</span><span class="source-lf meta-embedded-block-py"> </span><span class="source-lf meta-embedded-block-py">hello</span>
<span class="source-lf meta-embedded-block-py">=}</span>
<span class="source-lf"></span>
<span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Source</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">output</span><span class="source-lf"> out;</span>
<span class="source-lf"></span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(</span><span class="source-lf support-variable-lflang">startup</span><span class="source-lf">) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> out </span><span class="source-lf meta-embedded-block-py">{=</span>
<span class="source-lf meta-embedded-block-py">        </span><span class="source-lf meta-embedded-block-py">temp</span><span class="source-lf meta-embedded-block-py"> </span><span class="source-lf meta-embedded-block-py keyword-operator-assignment-python">=</span><span class="source-lf meta-embedded-block-py"> </span><span class="source-lf meta-embedded-block-py">hello</span><span class="source-lf meta-embedded-block-py meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-generic-python">hello</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python punctuation-definition-arguments-begin-python">(</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python string-quoted-single-python punctuation-definition-string-begin-python">&quot;</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python string-quoted-single-python">Earth</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python string-quoted-single-python punctuation-definition-string-end-python">&quot;</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python punctuation-separator-arguments-python">,</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python"> </span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python constant-numeric-dec-python">42</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python punctuation-definition-arguments-end-python">)</span>
<span class="source-lf meta-embedded-block-py">        </span><span class="source-lf meta-embedded-block-py">out</span><span class="source-lf meta-embedded-block-py meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-generic-python">set</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python punctuation-definition-arguments-begin-python">(</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python">temp</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python punctuation-definition-arguments-end-python">)</span>
<span class="source-lf meta-embedded-block-py">    </span><span class="source-lf meta-embedded-block-py">=}</span>
<span class="source-lf">}</span>
</pre>
<p>The top-level preamble has imported the <a href="https://github.com/lf-lang/lingua-franca/blob/master/test/Python/src/include/hello.py">hello</a> module, which contains the following class:</p>
<pre class="source-lf language-python"><span class="source-python meta-class-python storage-type-class-python">class</span><span class="source-python meta-class-python"> </span><span class="source-python meta-class-python entity-name-type-class-python">hello</span><span class="source-python meta-class-python punctuation-section-class-begin-python">:</span>
<span class="source-python meta-function-python">    </span><span class="source-python meta-function-python storage-type-function-python">def</span><span class="source-python meta-function-python"> </span><span class="source-python meta-function-python support-function-magic-python">__init__</span><span class="source-python meta-function-python meta-function-parameters-python punctuation-definition-parameters-begin-python">(</span><span class="source-python meta-function-python meta-function-parameters-python variable-parameter-function-language-python variable-parameter-function-language-special-self-python">self</span><span class="source-python meta-function-python meta-function-parameters-python punctuation-separator-parameters-python">,</span><span class="source-python meta-function-python meta-function-parameters-python"> </span><span class="source-python meta-function-python meta-function-parameters-python variable-parameter-function-language-python">name</span><span class="source-python meta-function-python meta-function-parameters-python"> </span><span class="source-python meta-function-python meta-function-parameters-python keyword-operator-python">=</span><span class="source-python meta-function-python meta-function-parameters-python"> </span><span class="source-python meta-function-python meta-function-parameters-python string-quoted-single-python punctuation-definition-string-begin-python">&quot;</span><span class="source-python meta-function-python meta-function-parameters-python string-quoted-single-python punctuation-definition-string-end-python">&quot;</span><span class="source-python meta-function-python meta-function-parameters-python punctuation-separator-parameters-python">,</span><span class="source-python meta-function-python meta-function-parameters-python"> </span><span class="source-python meta-function-python meta-function-parameters-python variable-parameter-function-language-python">value</span><span class="source-python meta-function-python meta-function-parameters-python"> </span><span class="source-python meta-function-python meta-function-parameters-python keyword-operator-python">=</span><span class="source-python meta-function-python meta-function-parameters-python"> </span><span class="source-python meta-function-python meta-function-parameters-python constant-numeric-dec-python">0</span><span class="source-python meta-function-python meta-function-parameters-python punctuation-definition-parameters-end-python">)</span><span class="source-python meta-function-python punctuation-section-function-begin-python">:</span>
<span class="source-python">        </span><span class="source-python variable-language-special-self-python">self</span><span class="source-python meta-member-access-python punctuation-separator-period-python">.</span><span class="source-python meta-member-access-python meta-attribute-python">name</span><span class="source-python"> </span><span class="source-python keyword-operator-assignment-python">=</span><span class="source-python"> </span><span class="source-python">name</span>
<span class="source-python">        </span><span class="source-python variable-language-special-self-python">self</span><span class="source-python meta-member-access-python punctuation-separator-period-python">.</span><span class="source-python meta-member-access-python meta-attribute-python">value</span><span class="source-python"> </span><span class="source-python keyword-operator-assignment-python">=</span><span class="source-python"> </span><span class="source-python">value</span>
</pre>
<p>In the reaction to <strong>startup</strong>, the reactor has created an instance object of this class (as local variable named <code>temp</code>) and passed it downstream using the <code>set</code> method on output port <code>out</code>.</p>
<p>The <code>set</code> method is defined as follows:</p>
<blockquote>
<p><code>&#x3C;port>.set(&#x3C;value>)</code>: Set the specified output port (or input of a contained
reactor) to the specified value. This value can be any Python object
(including <code>None</code> and objects of type <code>Any</code>). The value is
copied and therefore the variable carrying the value can be subsequently
modified without changing the output.</p>
</blockquote>
<p>A reactor receiving the class object message can subsequently access the object
using <code>&#x3C;port>.value</code>:</p>
<pre class="source-lf language-lf-py"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Print</span><span class="source-lf">(expected(</span><span class="source-lf constant-numeric-int-lflang">42</span><span class="source-lf">)) {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">input</span><span class="source-lf"> _in;</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(_in) </span><span class="source-lf meta-embedded-block-py">{=</span>
<span class="source-lf meta-embedded-block-py">        </span><span class="source-lf meta-embedded-block-py meta-function-call-python support-function-builtin-python">print</span><span class="source-lf meta-embedded-block-py meta-function-call-python punctuation-definition-arguments-begin-python">(</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python string-quoted-single-python punctuation-definition-string-begin-python">&quot;</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python string-quoted-single-python">Received: name = </span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python string-quoted-single-python meta-format-brace-python constant-character-format-placeholder-other-python">{</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python string-quoted-single-python meta-format-brace-python constant-character-format-placeholder-other-python storage-type-format-python">:s</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python string-quoted-single-python meta-format-brace-python constant-character-format-placeholder-other-python">}</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python string-quoted-single-python">, value = </span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python string-quoted-single-python meta-format-brace-python constant-character-format-placeholder-other-python">{</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python string-quoted-single-python meta-format-brace-python constant-character-format-placeholder-other-python storage-type-format-python">:d</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python string-quoted-single-python meta-format-brace-python constant-character-format-placeholder-other-python">}</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python string-quoted-single-python constant-character-escape-python">\n</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python string-quoted-single-python punctuation-definition-string-end-python">&quot;</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-function-call-python meta-function-call-generic-python">format</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-function-call-python punctuation-definition-arguments-begin-python">(</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-function-call-python meta-function-call-arguments-python">_in</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-function-call-python meta-function-call-arguments-python meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-attribute-python">value</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-function-call-python meta-function-call-arguments-python meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-attribute-python">name</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-function-call-python meta-function-call-arguments-python punctuation-separator-arguments-python">,</span>
<span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-function-call-python meta-function-call-arguments-python">                                                             </span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-function-call-python meta-function-call-arguments-python">_in</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-function-call-python meta-function-call-arguments-python meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-attribute-python">value</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-function-call-python meta-function-call-arguments-python meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-attribute-python">value</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-function-call-python punctuation-definition-arguments-end-python">)</span><span class="source-lf meta-embedded-block-py meta-function-call-python punctuation-definition-arguments-end-python">)</span>
<span class="source-lf meta-embedded-block-py">    </span><span class="source-lf meta-embedded-block-py">=}</span>
<span class="source-lf">}</span>
</pre>
<p><strong>Note:</strong> The <code>hello</code> module has been imported using a top-level preamble, therefore, the contents of the module are available to all reactors defined in the current Lingua Franca file (similar situation arises if the <code>hello</code> class itself was in the top-level preamble).</p>
</div>
<div class="lf-ts">
<p>In the TypeScript target, all <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html">TypeScript types</a> are generally acceptable for inputs and outputs with one notable exception:</p>
<ul>
<li><code>undefined</code> is not a valid type for an input, output, or action. This is because <code>undefined</code> is used to designate the absence of an input, output, or action during a reaction.</li>
</ul>
<p>As with parameters and state variables, custom types (and classes) must be defined in the <a href="#preamble">preamble</a> before they may be used.</p>
<p><strong>To benefit from type checking, you should declare types for your reactor elements.</strong> If a type isn’t declared for an input, output, or action, it is assigned the <a href="https://github.com/lf-lang/reactor-ts">reactor-ts</a> type <code>Present</code> which is defined as</p>
<pre class="source-lf language-lf-ts"><span class="source-lf">export type Present </span><span class="source-lf keyword-operator-lflang">=</span><span class="source-lf"> (number | string | boolean | symbol | object | null);</span>
</pre>
<p>In the body of a reaction in the TypeScript target, inputs are simply referred to by name. An input of type <code>t</code> is available within the body of a reaction as a local variable of type <code>t | undefined</code>. To determine whether an input is present, test the value of the input against <code>undefined</code>. An <code>undefined</code> input is not present.</p>
<p><strong>WARNING</strong> Be sure to use the <code>===</code> or <code>!==</code> operator and not <code>==</code> or <code>!=</code> to test against <code>undefined</code>. In JavaScript/TypeScript the comparison <code>undefined == null</code> yields the value <code>true</code>. It may also be tempting to rely upon the falsy evaluation of <code>undefined</code> within an <code>if</code> statement, but this may introduce bugs. For example a reaction that tests the presence of input <code>x</code> with <code>if (x) { ... }</code> will not correctly identify potentially valid present values such as <code>0</code>, <code>false</code>, or <code>""</code>.</p>
<p>For example, the <a href="https://github.com/lf-lang/lingua-franca/blob/master/test/TypeScript/src/Determinism.lf">Determinism.lf</a> test case includes the following reactor:</p>
<pre class="source-lf language-lf-ts"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Destination</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">input</span><span class="source-lf"> x:</span><span class="source-lf storage-type-lflang">number</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">input</span><span class="source-lf"> y:</span><span class="source-lf storage-type-lflang">number</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(x, y) </span><span class="source-lf meta-embedded-block-ts">{=</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts storage-type-ts">let</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-definition-variable-ts variable-other-readwrite-ts">sum</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts keyword-operator-assignment-ts">=</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts constant-numeric-decimal-ts">0</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts keyword-control-conditional-ts">if</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">x</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-comparison-ts">!==</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts constant-language-undefined-ts">undefined</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">)</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-definition-block-ts">{</span>
<span class="source-lf meta-embedded-block-ts meta-block-ts">            </span><span class="source-lf meta-embedded-block-ts meta-block-ts variable-other-readwrite-ts">sum</span><span class="source-lf meta-embedded-block-ts meta-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts keyword-operator-assignment-compound-ts">+=</span><span class="source-lf meta-embedded-block-ts meta-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts variable-other-readwrite-ts">x</span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts meta-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-definition-block-ts">}</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts keyword-control-conditional-ts">if</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">y</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-comparison-ts">!==</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts constant-language-undefined-ts">undefined</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">)</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-definition-block-ts">{</span>
<span class="source-lf meta-embedded-block-ts meta-block-ts">            </span><span class="source-lf meta-embedded-block-ts meta-block-ts variable-other-readwrite-ts">sum</span><span class="source-lf meta-embedded-block-ts meta-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts keyword-operator-assignment-compound-ts">+=</span><span class="source-lf meta-embedded-block-ts meta-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts variable-other-readwrite-ts">y</span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts meta-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-definition-block-ts">}</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-function-call-ts support-class-console-ts">console</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts punctuation-accessor-ts">.</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts support-function-console-ts">log</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-begin-ts">&quot;</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts">Received </span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-end-ts">&quot;</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-arithmetic-ts">+</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">sum</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">)</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts keyword-control-conditional-ts">if</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">sum</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-comparison-ts">!=</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts constant-numeric-decimal-ts">2</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">)</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-definition-block-ts">{</span>
<span class="source-lf meta-embedded-block-ts meta-block-ts">            </span><span class="source-lf meta-embedded-block-ts meta-block-ts meta-function-call-ts support-class-console-ts">console</span><span class="source-lf meta-embedded-block-ts meta-block-ts meta-function-call-ts punctuation-accessor-ts">.</span><span class="source-lf meta-embedded-block-ts meta-block-ts meta-function-call-ts support-function-console-ts">log</span><span class="source-lf meta-embedded-block-ts meta-block-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts meta-block-ts string-quoted-double-ts punctuation-definition-string-begin-ts">&quot;</span><span class="source-lf meta-embedded-block-ts meta-block-ts string-quoted-double-ts">FAILURE: Expected 2.</span><span class="source-lf meta-embedded-block-ts meta-block-ts string-quoted-double-ts punctuation-definition-string-end-ts">&quot;</span><span class="source-lf meta-embedded-block-ts meta-block-ts meta-brace-round-ts">)</span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts meta-block-ts">            </span><span class="source-lf meta-embedded-block-ts meta-block-ts meta-function-call-ts variable-other-object-ts">util</span><span class="source-lf meta-embedded-block-ts meta-block-ts meta-function-call-ts punctuation-accessor-ts">.</span><span class="source-lf meta-embedded-block-ts meta-block-ts meta-function-call-ts entity-name-function-ts">failure</span><span class="source-lf meta-embedded-block-ts meta-block-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts meta-block-ts meta-brace-round-ts">)</span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts meta-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-definition-block-ts">}</span>
<span class="source-lf meta-embedded-block-ts">    </span><span class="source-lf meta-embedded-block-ts">=}</span>
<span class="source-lf">}</span>
</pre>
<p>The reaction refers to the inputs <code>x</code> and <code>y</code> by name and tests for their presence by testing <code>x</code> and <code>y</code> against <code>undefined</code>. If a reaction is triggered by just one input, then normally it is not necessary to test for its presence. It will always be present. However TypeScript’s type system is not smart enough to know such an input will never have type <code>undefined</code> if there’s no test against <code>undefined</code> within the reaction. An explicit type annotation (for example <code>x = x as t;</code> where <code>t</code> is the type of the input) may be necessary to avoid type errors from the compiler. In the above example, there are two triggers, so the reaction has no assurance that both will be present.</p>
<p>Inputs declared in the <strong>uses</strong> part of the reaction do not trigger the reaction. Consider this modification of the above reaction:</p>
<pre class="source-lf language-lf-ts"><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(x) y </span><span class="source-lf meta-embedded-block-ts">{=</span>
<span class="source-lf meta-embedded-block-ts">    </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts storage-type-ts">let</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-definition-variable-ts variable-other-readwrite-ts">sum</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts keyword-operator-assignment-ts">=</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts variable-other-readwrite-ts">x</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts keyword-control-as-ts">as</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts support-type-primitive-ts">number</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">    </span><span class="source-lf meta-embedded-block-ts keyword-control-conditional-ts">if</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">y</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-comparison-ts">!==</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts constant-language-undefined-ts">undefined</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">)</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-definition-block-ts">{</span>
<span class="source-lf meta-embedded-block-ts meta-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-block-ts variable-other-readwrite-ts">sum</span><span class="source-lf meta-embedded-block-ts meta-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts keyword-operator-assignment-compound-ts">+=</span><span class="source-lf meta-embedded-block-ts meta-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts variable-other-readwrite-ts">y</span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts meta-block-ts">    </span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-definition-block-ts">}</span>
<span class="source-lf meta-embedded-block-ts">    </span><span class="source-lf meta-embedded-block-ts meta-function-call-ts support-class-console-ts">console</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts punctuation-accessor-ts">.</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts support-function-console-ts">log</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-begin-ts">&quot;</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts">Received </span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-end-ts">&quot;</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-arithmetic-ts">+</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">sum</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-arithmetic-ts">+</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-begin-ts">&quot;</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts">.</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-end-ts">&quot;</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">)</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">=}</span>
</pre>
<p>It is no longer necessary to test for the presence of <code>x</code> because that is the only trigger. The input <code>y</code>, however, may or may not be present at the logical time that this reaction is triggered. Hence, the code must test for its presence.</p>
<p>The <strong>effects</strong> portion of the reaction specification can include outputs and actions. Actions will be described below. Like inputs, an output of type <code>t</code> is available within the body of a reaction as a local variable of type <code>t | undefined</code>. The local variable for each output is initialized to the output’s current value. Outputs are set by assigning a (non-<code>undefined</code>) value to its local variable (no changes will be made to an output if it has the value <code>undefined</code> at the end of a reaction). Whatever value an output’s local variable has at the end of the reaction will be set to that output. If an output’s local variable has the value <code>undefined</code> at the end of the reaction, that output will not be set and connected downstream inputs will be absent. For example, we can further modify the above example as follows:</p>
<pre class="source-lf language-lf-ts"><span class="source-lf storage-modifier-lflang">output</span><span class="source-lf"> z:</span><span class="source-lf storage-type-lflang">number</span><span class="source-lf">;</span>
<span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(x) y </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> z </span><span class="source-lf meta-embedded-block-ts">{=</span>
<span class="source-lf meta-embedded-block-ts">    </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts storage-type-ts">let</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-definition-variable-ts variable-other-readwrite-ts">sum</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts keyword-operator-assignment-ts">=</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts variable-other-readwrite-ts">x</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts keyword-control-as-ts">as</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts support-type-primitive-ts">number</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">    </span><span class="source-lf meta-embedded-block-ts keyword-control-conditional-ts">if</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">y</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-comparison-ts">!==</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts constant-language-undefined-ts">undefined</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">)</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-definition-block-ts">{</span>
<span class="source-lf meta-embedded-block-ts meta-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-block-ts variable-other-readwrite-ts">sum</span><span class="source-lf meta-embedded-block-ts meta-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts keyword-operator-assignment-compound-ts">+=</span><span class="source-lf meta-embedded-block-ts meta-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts variable-other-readwrite-ts">y</span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts meta-block-ts">    </span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-definition-block-ts">}</span>
<span class="source-lf meta-embedded-block-ts">    </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">z</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-assignment-ts">=</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">sum</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">=}</span>
</pre>
<p>If an output gets set more than once at any logical time, downstream reactors will see only the <em>final</em> value that is set. Since the order in which reactions of a reactor are invoked at a logical time is deterministic, and whether inputs are present depends only on their timestamps, the final value set for an output will also be deterministic.</p>
<p>An output may even be set in different reactions of the same reactor at the same logical time. In this case, one reaction may wish to test whether the previously invoked reaction has set the output. It can do that using a <code>!== undefined</code> test for that output. For example, the following reactor will always produce the output 42:</p>
<pre class="source-lf language-lf-ts"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">TestForPreviousOutput</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">output</span><span class="source-lf"> out:</span><span class="source-lf storage-type-lflang">number</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(</span><span class="source-lf support-variable-lflang">startup</span><span class="source-lf">) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> out </span><span class="source-lf meta-embedded-block-ts">{=</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts keyword-control-conditional-ts">if</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts support-constant-math-ts">Math</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts punctuation-accessor-ts">.</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts support-function-math-ts">random</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">)</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-relational-ts">&gt;</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts constant-numeric-decimal-ts">0</span><span class="source-lf meta-embedded-block-ts constant-numeric-decimal-ts meta-delimiter-decimal-period-ts">.</span><span class="source-lf meta-embedded-block-ts constant-numeric-decimal-ts">5</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">)</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-definition-block-ts">{</span>
<span class="source-lf meta-embedded-block-ts meta-block-ts">            </span><span class="source-lf meta-embedded-block-ts meta-block-ts variable-other-readwrite-ts">out</span><span class="source-lf meta-embedded-block-ts meta-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts keyword-operator-assignment-ts">=</span><span class="source-lf meta-embedded-block-ts meta-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts constant-numeric-decimal-ts">21</span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts meta-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-definition-block-ts">}</span>
<span class="source-lf meta-embedded-block-ts">    </span><span class="source-lf meta-embedded-block-ts">=}</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(</span><span class="source-lf support-variable-lflang">startup</span><span class="source-lf">) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> out </span><span class="source-lf meta-embedded-block-ts">{=</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts storage-type-ts">let</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-definition-variable-ts variable-other-readwrite-ts">previous_output</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts keyword-operator-assignment-ts">=</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts variable-other-readwrite-ts">out</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts keyword-control-conditional-ts">if</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">previous_output</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">)</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-definition-block-ts">{</span>
<span class="source-lf meta-embedded-block-ts meta-block-ts">            </span><span class="source-lf meta-embedded-block-ts meta-block-ts variable-other-readwrite-ts">out</span><span class="source-lf meta-embedded-block-ts meta-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts keyword-operator-assignment-ts">=</span><span class="source-lf meta-embedded-block-ts meta-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts constant-numeric-decimal-ts">2</span><span class="source-lf meta-embedded-block-ts meta-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts keyword-operator-arithmetic-ts">*</span><span class="source-lf meta-embedded-block-ts meta-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts variable-other-readwrite-ts">previous_output</span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts meta-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-definition-block-ts">}</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-control-conditional-ts">else</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-definition-block-ts">{</span>
<span class="source-lf meta-embedded-block-ts meta-block-ts">            </span><span class="source-lf meta-embedded-block-ts meta-block-ts variable-other-readwrite-ts">out</span><span class="source-lf meta-embedded-block-ts meta-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts keyword-operator-assignment-ts">=</span><span class="source-lf meta-embedded-block-ts meta-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts constant-numeric-decimal-ts">42</span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts meta-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-definition-block-ts">}</span>
<span class="source-lf meta-embedded-block-ts">    </span><span class="source-lf meta-embedded-block-ts">=}</span>
<span class="source-lf">}</span>
</pre>
<p>The first reaction may or may not set the output to 21. The second reaction doubles the output if it has been previously produced and otherwise produces 42.</p>
<h3 id="sending-and-receiving-custom-types" style="position:relative;"><a href="#sending-and-receiving-custom-types" aria-label="sending and receiving custom types permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Sending and Receiving Custom Types</h3>
<p>You can define your own data types in TypeScript and send and receive those. Consider the following example:</p>
<pre class="source-lf language-lf-ts"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">CustomType</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">preamble</span><span class="source-lf"> </span><span class="source-lf meta-embedded-block-ts">{=</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-type-declaration-ts storage-type-type-ts">type</span><span class="source-lf meta-embedded-block-ts meta-type-declaration-ts"> </span><span class="source-lf meta-embedded-block-ts meta-type-declaration-ts entity-name-type-alias-ts">custom</span><span class="source-lf meta-embedded-block-ts meta-type-declaration-ts"> </span><span class="source-lf meta-embedded-block-ts meta-type-declaration-ts keyword-operator-assignment-ts">=</span><span class="source-lf meta-embedded-block-ts meta-type-declaration-ts"> </span><span class="source-lf meta-embedded-block-ts meta-type-declaration-ts support-type-primitive-ts">string</span><span class="source-lf meta-embedded-block-ts meta-type-declaration-ts"> </span><span class="source-lf meta-embedded-block-ts meta-type-declaration-ts keyword-operator-type-ts">|</span><span class="source-lf meta-embedded-block-ts meta-type-declaration-ts"> </span><span class="source-lf meta-embedded-block-ts meta-type-declaration-ts support-type-builtin-ts">null</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">    </span><span class="source-lf meta-embedded-block-ts">=}</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">output</span><span class="source-lf"> out:</span><span class="source-lf storage-type-lflang">custom</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(</span><span class="source-lf support-variable-lflang">startup</span><span class="source-lf">) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> out </span><span class="source-lf meta-embedded-block-ts">{=</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">out</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-assignment-ts">=</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts constant-language-null-ts">null</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">    </span><span class="source-lf meta-embedded-block-ts">=}</span>
<span class="source-lf">}</span>
</pre>
<p>The <strong>preamble</strong> code defines a custom union type of <code>string</code> and <code>null</code>.</p>
</div>
<div class="lf-rs">
<p>Inputs and outputs in the Rust target are accessed using the <code>set</code> and <code>get</code> methods of the <code>ctx</code> objects, as shown in <a href="/docs/handbook/inputs-and-outputs">Inputs and Outputs</a>.</p>
</div>
<h2 id="time" style="position:relative;"><a href="#time" aria-label="time permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Time</h2>
<div class="lf-c">
<p>In the C target, the value of a time instant or interval is an integer specifying a number of nanoseconds. An instant is the number of nanoseconds that have elapsed since January 1, 1970. An interval is the difference between two instants. When an LF program starts executing, logical time is (normally) set to the instant provided by the operating system. (On some embedded platforms without real-time clocks, it will be set instead to zero.)</p>
<p>Time in the C target is a <code>int64_t</code>, which is a 64-bit signed number. Since a 64-bit number has a limited range, this measure of time instants will overflow in approximately the year 2262. For better code clarity, two types are defined in <a href="https://github.com/lf-lang/reactor-c/blob/main/core/tag.h">tag.h</a>, <code>instant_t</code> and <code>interval_t</code>, which you can use for time instants and intervals respectively. These are both equivalent to <code>int64_t</code>, but using those types will insulate your code against changes and platform-specific customizations.</p>
<p>Lingua Franca uses a superdense model of time. A reaction is invoked at a logical <strong>tag</strong>, a struct consisting of a <code>time</code> value (an <code>instant_t</code>, which is a <code>int64_t</code>) and a <code>microstep</code> value (a <code>microstep_t</code>, which is an <code>uint32_t</code>). The tag is guaranteed to not increase during the execution of a reaction. Outputs produced by a reaction have the same tag as the inputs, actions, or timers that trigger the reaction, and hence are <strong>logically simultaneous</strong>.</p>
<p>The time structs and functions for working with time are defined in <a href="https://github.com/lf-lang/reactor-c/blob/main/core/tag.h">tag.h</a>. The most useful functions are:</p>
<ul>
<li><code>tag_t lf_tag()</code>: Get the current tag at which this reaction has been invoked.</li>
<li><code>int lf_tag_compare(tag_t, tag_t)</code>: Compare two tags, returning -1, 0, or 1 for less than, equal, and greater than.</li>
<li><code>instant_t lf_time_logical()</code>: Get the current logical time (the first part of the current tag).</li>
<li><code>interval_t lf_time_logical_elapsed()</code>: Get the logical time elapsed since program start.</li>
</ul>
<p>There are also some useful functions for accessing physical time:</p>
<ul>
<li><code>instant_t lf_time_physical()</code>: Get the current physical time.</li>
<li><code>instant_t lf_time_physical_elapsed()</code>: Get the physical time elapsed since program start.</li>
<li><code>instant_t lf_time_start()</code>: Get the starting physical and logical time.</li>
</ul>
<p>The last of these is both a physical and logical time because, at the start of execution, the starting logical time is set equal to the current physical time as measured by a local clock.</p>
<p>A reaction can examine the current logical time (which is constant during the execution of the reaction). For example, consider the <a href="https://github.com/lf-lang/lingua-franca/blob/master/test/C/src/GetTime.lf">GetTime</a> example:</p>
<pre class="source-lf language-lf-c"><span class="source-lf storage-modifier-lflang">main</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">GetTime</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">timer</span><span class="source-lf"> t(</span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">, </span><span class="source-lf constant-numeric-int-lflang">1</span><span class="source-lf"> </span><span class="source-lf constant-numeric-lflang">sec</span><span class="source-lf">);</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(t) </span><span class="source-lf meta-embedded-block-c">{=</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c support-type-posix-reserved-cpp support-type-built-in-posix-reserved-cpp">instant_t</span><span class="source-lf meta-embedded-block-c"> logical </span><span class="source-lf meta-embedded-block-c keyword-operator-assignment-cpp">=</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c entity-name-function-call-cpp">lf_time_logical</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c entity-name-function-call-cpp">printf</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp punctuation-definition-string-begin-cpp">&quot;</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp">Logical time is </span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp constant-other-placeholder">%ld</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp">.</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp constant-character-escape-cpp">\n</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp punctuation-definition-string-end-cpp">&quot;</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> logical</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">    </span><span class="source-lf meta-embedded-block-c">=}</span>
<span class="source-lf">}</span>
</pre>
<p>When executed, you will get something like this:</p>
<pre class="source-lf language-text">Start execution at time Sun Oct 13 10:18:36 2019
plus 353609000 nanoseconds.
Logical time is 1570987116353609000.
Logical time is 1570987117353609000.
Logical time is 1570987118353609000.
...</pre>
<p>The first two lines give the current time-of-day provided by the execution platform at the start of execution. This is used to initialize logical time. Subsequent values of logical time are printed out in their raw form, rather than the friendlier form in the first two lines. If you look closely, you will see that each number is one second larger than the previous number, where one second is 1000000000 nanoseconds.</p>
<p>You can also obtain the <em>elapsed</em> logical time since the start of execution:</p>
<pre class="source-lf language-lf-c"><span class="source-lf storage-modifier-lflang">main</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">GetTime</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">timer</span><span class="source-lf"> t(</span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">, </span><span class="source-lf constant-numeric-int-lflang">1</span><span class="source-lf"> </span><span class="source-lf constant-numeric-lflang">sec</span><span class="source-lf">);</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(t) </span><span class="source-lf meta-embedded-block-c">{=</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c support-type-posix-reserved-cpp support-type-built-in-posix-reserved-cpp">interval_t</span><span class="source-lf meta-embedded-block-c"> elapsed </span><span class="source-lf meta-embedded-block-c keyword-operator-assignment-cpp">=</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c entity-name-function-call-cpp">lf_time_logical_elapsed</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c entity-name-function-call-cpp">printf</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp punctuation-definition-string-begin-cpp">&quot;</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp">Elapsed logical time is </span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp constant-other-placeholder">%ld</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp">.</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp constant-character-escape-cpp">\n</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp punctuation-definition-string-end-cpp">&quot;</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> elapsed</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">    </span><span class="source-lf meta-embedded-block-c">=}</span>
<span class="source-lf">}</span>
</pre>
<p>This will produce:</p>
<pre class="source-lf language-text">Start execution at time Sun Oct 13 10:25:22 2019
plus 833273000 nanoseconds.
Elapsed logical time is 0.
Elapsed logical time is 1000000000.
Elapsed logical time is 2000000000.
...</pre>
<p>You can also get physical time, which comes from your platform’s real-time clock:</p>
<pre class="source-lf language-lf-c"><span class="source-lf storage-modifier-lflang">main</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">GetTime</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">timer</span><span class="source-lf"> t(</span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">, </span><span class="source-lf constant-numeric-int-lflang">1</span><span class="source-lf"> </span><span class="source-lf constant-numeric-lflang">sec</span><span class="source-lf">);</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(t) </span><span class="source-lf meta-embedded-block-c">{=</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c support-type-posix-reserved-cpp support-type-built-in-posix-reserved-cpp">instant_t</span><span class="source-lf meta-embedded-block-c"> physical </span><span class="source-lf meta-embedded-block-c keyword-operator-assignment-cpp">=</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c entity-name-function-call-cpp">lf_time_physical</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c entity-name-function-call-cpp">printf</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp punctuation-definition-string-begin-cpp">&quot;</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp">Physical time is </span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp constant-other-placeholder">%ld</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp">.</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp constant-character-escape-cpp">\n</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp punctuation-definition-string-end-cpp">&quot;</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> physical</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">    </span><span class="source-lf meta-embedded-block-c">=}</span>
<span class="source-lf">}</span>
</pre>
<p>This will produce something like this:</p>
<pre class="source-lf language-text">Start execution at time Sun Oct 13 10:35:59 2019
plus 984992000 nanoseconds.
Physical time is 1570988159986108000.
Physical time is 1570988160990219000.
Physical time is 1570988161990067000.
...</pre>
<p>Finally, you can get elapsed physical time:</p>
<pre class="source-lf language-lf-c"><span class="source-lf storage-modifier-lflang">main</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">GetTime</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">timer</span><span class="source-lf"> t(</span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">, </span><span class="source-lf constant-numeric-int-lflang">1</span><span class="source-lf"> </span><span class="source-lf constant-numeric-lflang">sec</span><span class="source-lf">);</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(t) </span><span class="source-lf meta-embedded-block-c">{=</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c support-type-posix-reserved-cpp support-type-built-in-posix-reserved-cpp">instant_t</span><span class="source-lf meta-embedded-block-c"> elapsed_physical </span><span class="source-lf meta-embedded-block-c keyword-operator-assignment-cpp">=</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c entity-name-function-call-cpp">lf_time_physical_elapsed</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c entity-name-function-call-cpp">printf</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp punctuation-definition-string-begin-cpp">&quot;</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp">Elapsed physical time is </span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp constant-other-placeholder">%ld</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp">.</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp constant-character-escape-cpp">\n</span><span class="source-lf meta-embedded-block-c string-quoted-double-cpp punctuation-definition-string-end-cpp">&quot;</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> elapsed_physical</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">    </span><span class="source-lf meta-embedded-block-c">=}</span>
<span class="source-lf">}</span>
</pre>
<p>This will produce something like this:</p>
<pre class="source-lf language-text">Elapsed physical time is 657000.
Elapsed physical time is 1001856000.
Elapsed physical time is 2004761000.
...</pre>
<p>Notice that these numbers are increasing by <em>roughly</em> one second each time. If you set the <code>fast</code> target parameter to <code>true</code>, then logical time will elapse much faster than physical time.</p>
<p>Working with nanoseconds in C code can be tedious if you are interested in longer durations. For convenience, a set of macros are available to the C programmer to convert time units into the required nanoseconds. For example, you can specify 200 msec in C code as <code>MSEC(200)</code> or two weeks as <code>WEEKS(2)</code>. The provided macros are <code>NSEC</code>, <code>USEC</code> (for microseconds), <code>MSEC</code>, <code>SEC</code>, <code>MINUTE</code>, <code>HOUR</code>, <code>DAY</code>, and <code>WEEK</code>. You may also use the plural of any of these. Examples are given in the next section.</p>
</div>
<div class="lf-cpp">
<p>Timers are specified exactly as in the <a href="/docs/handbook/time-and-timers">Time and Timers</a>. When working with time in the C++ code body of a reaction, however, you will need to know a bit about its internal representation.</p>
<p>The reactor-cpp library uses <a href="https://en.cppreference.com/w/cpp/chrono"><code>std::chrono</code></a> for representing time. Specifically, the library defines two types for representing durations and timepoints: <code>reactor::Duration</code> and <code>reactor::TimePoint</code>. <code>reactor::Duration</code> is an alias for <a href="https://en.cppreference.com/w/cpp/chrono/duration"><code>std::chrono::nanosecods</code></a>. <code>reactor::TimePoint</code> is alias for <a href="https://en.cppreference.com/w/cpp/chrono/time_point"><code>std::chrono::time_point&#x3C;std::chrono::system_clock, std::chrono::nanoseconds></code></a>. As you can see from these definitions, the smallest time step that can be represented is one nanosecond. Note that <code>reactor::TimePoint</code> describes a specific point in time and is associated with a specific clock, whereas <code>reactor::Duration</code> defines a time interval between two time points.</p>
<p>Lingua Franca uses a superdense model of logical time. A reaction is invoked at a logical <strong>tag</strong>. In the C++ library, a tag is represented by the class <code>reactor::Tag</code>. In essence, this class is a tuple of a <code>reactor::TimePoint</code> representing a specific point in logical time and a microstep value (of type <code>reactor::mstep_t</code>, which is an alias for <code>unsigned long</code>). <code>reactor::Tag</code> provides two methods for getting the time point or the microstep:</p>
<pre class="source-lf language-cpp"><span class="source-cpp meta-function-definition-cpp storage-modifier-const-cpp">const</span><span class="source-cpp meta-function-definition-cpp"> </span><span class="source-cpp meta-function-definition-cpp meta-qualified_type-cpp entity-name-type-cpp">TimePoint</span><span class="source-cpp meta-function-definition-cpp storage-modifier-reference-cpp">&amp;</span><span class="source-cpp meta-function-definition-cpp"> </span><span class="source-cpp meta-function-definition-cpp meta-head-function-definition-cpp entity-name-function-definition-cpp">time_point</span><span class="source-cpp meta-function-definition-cpp meta-head-function-definition-cpp punctuation-section-parameters-begin-bracket-round-cpp">(</span><span class="source-cpp meta-function-definition-cpp meta-head-function-definition-cpp punctuation-section-parameters-end-bracket-round-cpp">)</span><span class="source-cpp meta-function-definition-cpp meta-head-function-definition-cpp"> </span><span class="source-cpp meta-function-definition-cpp meta-head-function-definition-cpp storage-modifier-specifier-functional-post-parameters-const-cpp">const</span><span class="source-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-cpp meta-function-definition-cpp storage-modifier-const-cpp">const</span><span class="source-cpp meta-function-definition-cpp"> </span><span class="source-cpp meta-function-definition-cpp meta-qualified_type-cpp support-type-posix-reserved-cpp support-type-built-in-posix-reserved-cpp">mstep_t</span><span class="source-cpp meta-function-definition-cpp storage-modifier-reference-cpp">&amp;</span><span class="source-cpp meta-function-definition-cpp"> </span><span class="source-cpp meta-function-definition-cpp meta-head-function-definition-cpp entity-name-function-definition-cpp">micro_step</span><span class="source-cpp meta-function-definition-cpp meta-head-function-definition-cpp punctuation-section-parameters-begin-bracket-round-cpp">(</span><span class="source-cpp meta-function-definition-cpp meta-head-function-definition-cpp punctuation-section-parameters-end-bracket-round-cpp">)</span><span class="source-cpp meta-function-definition-cpp meta-head-function-definition-cpp"> </span><span class="source-cpp meta-function-definition-cpp meta-head-function-definition-cpp storage-modifier-specifier-functional-post-parameters-const-cpp">const</span><span class="source-cpp punctuation-terminator-statement-cpp">;</span>
</pre>
<p>The C++ code in reaction bodies has access to library functions that allow to retrieve the current logical or physical time:</p>
<ul>
<li><code>TimePoint get_physical_time()</code>: Get the current physical time.</li>
<li><code>TimePoint get_logcial_time()</code>: Get the current logical time.</li>
<li><code>Duration get_elapsed_physical_time()</code>: Get the physical time elapsed since program start.</li>
<li><code>Duration get_elapsed_logical_time()</code>: Get the logical time elapsed since program start.</li>
</ul>
<p>A reaction can examine the current logical time (which is constant during the execution of the reaction). For example, consider the <a href="https://github.com/lf-lang/lingua-franca/blob/master/test/Cpp/src/GetTime.lf">GetTime</a> example:</p>
<pre class="source-lf language-lf-cpp"><span class="source-lf storage-modifier-lflang">main</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">timer</span><span class="source-lf"> t(</span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">, </span><span class="source-lf constant-numeric-int-lflang">1</span><span class="source-lf"> </span><span class="source-lf constant-numeric-lflang">sec</span><span class="source-lf">);</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(t) </span><span class="source-lf meta-embedded-block-cpp">{=</span>
<span class="source-lf meta-embedded-block-cpp">        </span><span class="source-lf meta-embedded-block-cpp storage-type-primitive-cpp storage-type-built-in-primitive-cpp">auto</span><span class="source-lf meta-embedded-block-cpp"> logical </span><span class="source-lf meta-embedded-block-cpp keyword-operator-assignment-cpp">=</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp entity-name-function-call-cpp">get_logical_time</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-cpp">        </span><span class="source-lf meta-embedded-block-cpp entity-name-scope-resolution-cpp">std</span><span class="source-lf meta-embedded-block-cpp punctuation-separator-namespace-access-cpp punctuation-separator-scope-resolution-cpp">::</span><span class="source-lf meta-embedded-block-cpp">cout </span><span class="source-lf meta-embedded-block-cpp keyword-operator-bitwise-shift-cpp">&lt;&lt;</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp string-quoted-double-cpp punctuation-definition-string-begin-cpp">&quot;</span><span class="source-lf meta-embedded-block-cpp string-quoted-double-cpp">Logical time is </span><span class="source-lf meta-embedded-block-cpp string-quoted-double-cpp punctuation-definition-string-end-cpp">&quot;</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp keyword-operator-bitwise-shift-cpp">&lt;&lt;</span><span class="source-lf meta-embedded-block-cpp"> logical </span><span class="source-lf meta-embedded-block-cpp keyword-operator-bitwise-shift-cpp">&lt;&lt;</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp entity-name-scope-resolution-cpp">std</span><span class="source-lf meta-embedded-block-cpp punctuation-separator-namespace-access-cpp punctuation-separator-scope-resolution-cpp">::</span><span class="source-lf meta-embedded-block-cpp">endl</span><span class="source-lf meta-embedded-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-cpp">    </span><span class="source-lf meta-embedded-block-cpp">=}</span>
<span class="source-lf">}</span>
</pre>
<p>Note that the <code>&#x3C;&#x3C;</code> operator is overloaded for both <code>reactor::TimePoint</code> and <code>reactor::Duration</code> and will print the time information accordingly.</p>
<p>When executing the above program, you will see something like this:</p>
<pre class="source-lf language-text">[INFO]  Starting the execution
Logical time is 2021-05-19 14:06:09.496828396
Logical time is 2021-05-19 14:06:10.496828396
Logical time is 2021-05-19 14:06:11.496828396
Logical time is 2021-05-19 14:06:11.496828396
...</pre>
<p>If you look closely, you will see that each printed logical time is one second larger than the previous one.</p>
<p>You can also obtain the <em>elapsed</em> logical time since the start of execution:</p>
<pre class="source-lf language-lf-cpp"><span class="source-lf storage-modifier-lflang">main</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">timer</span><span class="source-lf"> t(</span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">, </span><span class="source-lf constant-numeric-int-lflang">1</span><span class="source-lf"> </span><span class="source-lf constant-numeric-lflang">sec</span><span class="source-lf">);</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(t) </span><span class="source-lf meta-embedded-block-cpp">{=</span>
<span class="source-lf meta-embedded-block-cpp">        </span><span class="source-lf meta-embedded-block-cpp storage-type-primitive-cpp storage-type-built-in-primitive-cpp">auto</span><span class="source-lf meta-embedded-block-cpp"> elapsed </span><span class="source-lf meta-embedded-block-cpp keyword-operator-assignment-cpp">=</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp entity-name-function-call-cpp">get_elapsed_logical_time</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-cpp">        </span><span class="source-lf meta-embedded-block-cpp entity-name-scope-resolution-cpp">std</span><span class="source-lf meta-embedded-block-cpp punctuation-separator-namespace-access-cpp punctuation-separator-scope-resolution-cpp">::</span><span class="source-lf meta-embedded-block-cpp">cout </span><span class="source-lf meta-embedded-block-cpp keyword-operator-bitwise-shift-cpp">&lt;&lt;</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp string-quoted-double-cpp punctuation-definition-string-begin-cpp">&quot;</span><span class="source-lf meta-embedded-block-cpp string-quoted-double-cpp">Elapsed logical time is </span><span class="source-lf meta-embedded-block-cpp string-quoted-double-cpp punctuation-definition-string-end-cpp">&quot;</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp keyword-operator-bitwise-shift-cpp">&lt;&lt;</span><span class="source-lf meta-embedded-block-cpp"> elapsed </span><span class="source-lf meta-embedded-block-cpp keyword-operator-bitwise-shift-cpp">&lt;&lt;</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp entity-name-scope-resolution-cpp">std</span><span class="source-lf meta-embedded-block-cpp punctuation-separator-namespace-access-cpp punctuation-separator-scope-resolution-cpp">::</span><span class="source-lf meta-embedded-block-cpp">endl</span><span class="source-lf meta-embedded-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-cpp">        </span><span class="source-lf meta-embedded-block-cpp entity-name-scope-resolution-cpp">std</span><span class="source-lf meta-embedded-block-cpp punctuation-separator-namespace-access-cpp punctuation-separator-scope-resolution-cpp">::</span><span class="source-lf meta-embedded-block-cpp">cout </span><span class="source-lf meta-embedded-block-cpp keyword-operator-bitwise-shift-cpp">&lt;&lt;</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp string-quoted-double-cpp punctuation-definition-string-begin-cpp">&quot;</span><span class="source-lf meta-embedded-block-cpp string-quoted-double-cpp">In seconds: </span><span class="source-lf meta-embedded-block-cpp string-quoted-double-cpp punctuation-definition-string-end-cpp">&quot;</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp keyword-operator-bitwise-shift-cpp">&lt;&lt;</span><span class="source-lf meta-embedded-block-cpp">  </span><span class="source-lf meta-embedded-block-cpp entity-name-scope-resolution-cpp">std</span><span class="source-lf meta-embedded-block-cpp punctuation-separator-namespace-access-cpp punctuation-separator-scope-resolution-cpp">::</span><span class="source-lf meta-embedded-block-cpp entity-name-scope-resolution-function-call-cpp">chrono</span><span class="source-lf meta-embedded-block-cpp punctuation-separator-namespace-access-cpp punctuation-separator-scope-resolution-function-call-cpp">::</span><span class="source-lf meta-embedded-block-cpp entity-name-function-call-cpp">duration_cast</span><span class="source-lf meta-embedded-block-cpp meta-template-call-cpp meta-template-call-cpp punctuation-section-angle-brackets-begin-template-call-cpp">&lt;</span><span class="source-lf meta-embedded-block-cpp meta-template-call-cpp meta-template-call-cpp entity-name-scope-resolution-template-call-cpp">std</span><span class="source-lf meta-embedded-block-cpp meta-template-call-cpp meta-template-call-cpp punctuation-separator-namespace-access-cpp punctuation-separator-scope-resolution-template-call-cpp">::</span><span class="source-lf meta-embedded-block-cpp meta-template-call-cpp meta-template-call-cpp entity-name-scope-resolution-template-call-cpp">chrono</span><span class="source-lf meta-embedded-block-cpp meta-template-call-cpp meta-template-call-cpp punctuation-separator-namespace-access-cpp punctuation-separator-scope-resolution-template-call-cpp">::</span><span class="source-lf meta-embedded-block-cpp meta-template-call-cpp meta-template-call-cpp meta-qualified_type-cpp entity-name-type-cpp">seconds</span><span class="source-lf meta-embedded-block-cpp meta-template-call-cpp meta-template-call-cpp punctuation-section-angle-brackets-end-template-call-cpp">&gt;</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-cpp">elapsed</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp keyword-operator-bitwise-shift-cpp">&lt;&lt;</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp entity-name-scope-resolution-cpp">std</span><span class="source-lf meta-embedded-block-cpp punctuation-separator-namespace-access-cpp punctuation-separator-scope-resolution-cpp">::</span><span class="source-lf meta-embedded-block-cpp">endl</span><span class="source-lf meta-embedded-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-cpp">    </span><span class="source-lf meta-embedded-block-cpp">=}</span>
<span class="source-lf">}</span>
</pre>
<p>Using <code>std::chrono</code> it is also possible to convert between time units and directly print the number of elapsed seconds as seen above. The resulting output of this program will be:</p>
<pre class="source-lf language-text">[INFO]  Starting the execution
Elapsed logical time is 0 nsecs
In seconds: 0 secs
Elapsed logical time is 1000000000 nsecs
In seconds: 1 secs
Elapsed logical time is 2000000000 nsecs
In seconds: 2 secs
...</pre>
<p>You can also get physical and elapsed physical time:</p>
<pre class="source-lf language-lf-cpp"><span class="source-lf storage-modifier-lflang">main</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">timer</span><span class="source-lf"> t(</span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">, </span><span class="source-lf constant-numeric-int-lflang">1</span><span class="source-lf"> </span><span class="source-lf constant-numeric-lflang">sec</span><span class="source-lf">);</span>
<span class="source-lf">	</span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(t) </span><span class="source-lf meta-embedded-block-cpp">{=</span>
<span class="source-lf meta-embedded-block-cpp">        </span><span class="source-lf meta-embedded-block-cpp storage-type-primitive-cpp storage-type-built-in-primitive-cpp">auto</span><span class="source-lf meta-embedded-block-cpp"> logical </span><span class="source-lf meta-embedded-block-cpp keyword-operator-assignment-cpp">=</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp entity-name-function-call-cpp">get_logical_time</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-cpp">        </span><span class="source-lf meta-embedded-block-cpp storage-type-primitive-cpp storage-type-built-in-primitive-cpp">auto</span><span class="source-lf meta-embedded-block-cpp"> physical </span><span class="source-lf meta-embedded-block-cpp keyword-operator-assignment-cpp">=</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp entity-name-function-call-cpp">get_physical_time</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-cpp">		</span><span class="source-lf meta-embedded-block-cpp storage-type-primitive-cpp storage-type-built-in-primitive-cpp">auto</span><span class="source-lf meta-embedded-block-cpp"> elapsed </span><span class="source-lf meta-embedded-block-cpp keyword-operator-assignment-cpp">=</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp entity-name-function-call-cpp">get_elapsed_physical_time</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-cpp">        </span><span class="source-lf meta-embedded-block-cpp entity-name-scope-resolution-cpp">std</span><span class="source-lf meta-embedded-block-cpp punctuation-separator-namespace-access-cpp punctuation-separator-scope-resolution-cpp">::</span><span class="source-lf meta-embedded-block-cpp">cout </span><span class="source-lf meta-embedded-block-cpp keyword-operator-bitwise-shift-cpp">&lt;&lt;</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp string-quoted-double-cpp punctuation-definition-string-begin-cpp">&quot;</span><span class="source-lf meta-embedded-block-cpp string-quoted-double-cpp">Physical time is </span><span class="source-lf meta-embedded-block-cpp string-quoted-double-cpp punctuation-definition-string-end-cpp">&quot;</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp keyword-operator-bitwise-shift-cpp">&lt;&lt;</span><span class="source-lf meta-embedded-block-cpp"> physical </span><span class="source-lf meta-embedded-block-cpp keyword-operator-bitwise-shift-cpp">&lt;&lt;</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp entity-name-scope-resolution-cpp">std</span><span class="source-lf meta-embedded-block-cpp punctuation-separator-namespace-access-cpp punctuation-separator-scope-resolution-cpp">::</span><span class="source-lf meta-embedded-block-cpp">endl</span><span class="source-lf meta-embedded-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-cpp">        </span><span class="source-lf meta-embedded-block-cpp entity-name-scope-resolution-cpp">std</span><span class="source-lf meta-embedded-block-cpp punctuation-separator-namespace-access-cpp punctuation-separator-scope-resolution-cpp">::</span><span class="source-lf meta-embedded-block-cpp">cout </span><span class="source-lf meta-embedded-block-cpp keyword-operator-bitwise-shift-cpp">&lt;&lt;</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp string-quoted-double-cpp punctuation-definition-string-begin-cpp">&quot;</span><span class="source-lf meta-embedded-block-cpp string-quoted-double-cpp">Elapsed physical time is </span><span class="source-lf meta-embedded-block-cpp string-quoted-double-cpp punctuation-definition-string-end-cpp">&quot;</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp keyword-operator-bitwise-shift-cpp">&lt;&lt;</span><span class="source-lf meta-embedded-block-cpp"> elapsed </span><span class="source-lf meta-embedded-block-cpp keyword-operator-bitwise-shift-cpp">&lt;&lt;</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp entity-name-scope-resolution-cpp">std</span><span class="source-lf meta-embedded-block-cpp punctuation-separator-namespace-access-cpp punctuation-separator-scope-resolution-cpp">::</span><span class="source-lf meta-embedded-block-cpp">endl</span><span class="source-lf meta-embedded-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-cpp">        </span><span class="source-lf meta-embedded-block-cpp entity-name-scope-resolution-cpp">std</span><span class="source-lf meta-embedded-block-cpp punctuation-separator-namespace-access-cpp punctuation-separator-scope-resolution-cpp">::</span><span class="source-lf meta-embedded-block-cpp">cout </span><span class="source-lf meta-embedded-block-cpp keyword-operator-bitwise-shift-cpp">&lt;&lt;</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp string-quoted-double-cpp punctuation-definition-string-begin-cpp">&quot;</span><span class="source-lf meta-embedded-block-cpp string-quoted-double-cpp">Time lag is </span><span class="source-lf meta-embedded-block-cpp string-quoted-double-cpp punctuation-definition-string-end-cpp">&quot;</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp keyword-operator-bitwise-shift-cpp">&lt;&lt;</span><span class="source-lf meta-embedded-block-cpp"> physical </span><span class="source-lf meta-embedded-block-cpp keyword-operator-cpp">-</span><span class="source-lf meta-embedded-block-cpp"> logical </span><span class="source-lf meta-embedded-block-cpp keyword-operator-bitwise-shift-cpp">&lt;&lt;</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp entity-name-scope-resolution-cpp">std</span><span class="source-lf meta-embedded-block-cpp punctuation-separator-namespace-access-cpp punctuation-separator-scope-resolution-cpp">::</span><span class="source-lf meta-embedded-block-cpp">endl</span><span class="source-lf meta-embedded-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-cpp">   </span><span class="source-lf meta-embedded-block-cpp">=}</span>
<span class="source-lf">}</span>
</pre>
<p>Notice that the physical times are increasing by <em>roughly</em> one second in each reaction. The output also shows the lag between physical and logical time. If you set the <code>fast</code> target parameter to <code>true</code>, then physical time will elapse much faster than logical time. The above program will produce something like this:</p>
<pre class="source-lf language-text">[INFO]  Starting the execution
Physical time is 2021-05-19 14:25:18.070523014
Elapsed physical time is 2601601 nsecs
Time lag is 2598229 nsecs
Physical time is 2021-05-19 14:25:19.068038275
Elapsed physical time is 1000113888 nsecs
Time lag is 113490 nsecs
[INFO]  Physical time is Terminating the execution
2021-05-19 14:25:20.068153026
Elapsed physical time is 2000228689 nsecs
Time lag is 228241 nsecs</pre>
<p>For specifying time durations in code <a href="https://en.cppreference.com/w/cpp/header/chrono">chrono</a> provides convenient literal operators in <code>std::chrono_literals</code>. This namespace is automatically included for all reaction bodies. Thus, we can simply write:</p>
<pre class="source-lf language-cpp"><span class="source-cpp entity-name-scope-resolution-cpp">std</span><span class="source-cpp punctuation-separator-namespace-access-cpp punctuation-separator-scope-resolution-cpp">::</span><span class="source-cpp">cout </span><span class="source-cpp keyword-operator-bitwise-shift-cpp">&lt;&lt;</span><span class="source-cpp"> </span><span class="source-cpp constant-numeric-decimal-cpp">42</span><span class="source-cpp keyword-other-unit-user-defined-cpp">us</span><span class="source-cpp"> </span><span class="source-cpp keyword-operator-bitwise-shift-cpp">&lt;&lt;</span><span class="source-cpp"> </span><span class="source-cpp entity-name-scope-resolution-cpp">std</span><span class="source-cpp punctuation-separator-namespace-access-cpp punctuation-separator-scope-resolution-cpp">::</span><span class="source-cpp">endl</span><span class="source-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-cpp entity-name-scope-resolution-cpp">std</span><span class="source-cpp punctuation-separator-namespace-access-cpp punctuation-separator-scope-resolution-cpp">::</span><span class="source-cpp">cout </span><span class="source-cpp keyword-operator-bitwise-shift-cpp">&lt;&lt;</span><span class="source-cpp"> </span><span class="source-cpp constant-numeric-decimal-cpp">1</span><span class="source-cpp keyword-other-unit-user-defined-cpp">ms</span><span class="source-cpp"> </span><span class="source-cpp keyword-operator-bitwise-shift-cpp">&lt;&lt;</span><span class="source-cpp"> </span><span class="source-cpp entity-name-scope-resolution-cpp">std</span><span class="source-cpp punctuation-separator-namespace-access-cpp punctuation-separator-scope-resolution-cpp">::</span><span class="source-cpp">endl</span><span class="source-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-cpp entity-name-scope-resolution-cpp">std</span><span class="source-cpp punctuation-separator-namespace-access-cpp punctuation-separator-scope-resolution-cpp">::</span><span class="source-cpp">cout </span><span class="source-cpp keyword-operator-bitwise-shift-cpp">&lt;&lt;</span><span class="source-cpp"> </span><span class="source-cpp constant-numeric-decimal-cpp">3</span><span class="source-cpp keyword-other-unit-user-defined-cpp">s</span><span class="source-cpp"> </span><span class="source-cpp keyword-operator-bitwise-shift-cpp">&lt;&lt;</span><span class="source-cpp"> </span><span class="source-cpp entity-name-scope-resolution-cpp">std</span><span class="source-cpp punctuation-separator-namespace-access-cpp punctuation-separator-scope-resolution-cpp">::</span><span class="source-cpp">endl</span><span class="source-cpp punctuation-terminator-statement-cpp">;</span>
</pre>
<p>which prints:</p>
<pre class="source-lf language-text">42 usecs
1 msecs
3 secs</pre>
</div>
<div class="lf-py">
<p>Timers are specified exactly as in the <a href="/docs/handbook/time-and-timers">Time and Timers</a>. When working with time in the Python code body of a reaction, however, you will need to know a bit about its internal representation.</p>
<p>In the Python target, similar to the C target, the value of a time instant or
interval is an integer specifying a number of nanoseconds. An instant is the
number of nanoseconds that have elapsed since January 1, 1970. An interval is
the difference between two instants.</p>
<p>The functions for working with time and tags are:</p>
<ul>
<li><code>lf.tag() -> Tag</code>: Returns a Tag instance of the current tag at which this reaction has been invoked.</li>
<li><code>lf.tag_compare(Tag, Tag) -> int</code>: Compare two <code>Tag</code> instances, returning -1, 0, or 1 for less than, equal, and greater than. <code>Tag</code>s can also be compared using rich comparators (ex. <code>&#x3C;</code>, <code>></code>, <code>==</code>), which returns <code>True</code> or <code>False</code>.</li>
<li><code>lf.time.logical() -> int</code>: Get the current logical time (the first part of the current tag).</li>
<li><code>lf.time.logical_elapsed() -> int</code>: Get the logical time elapsed since program start.</li>
</ul>
<p><code>Tag</code>s can be initialized using <code>Tag(time=some_number, microstep=some_other_number)</code>.</p>
<p>There are also some useful functions for accessing physical time:</p>
<ul>
<li><code>lf.time.physical() -> int</code>: Get the current physical time.</li>
<li><code>lf.time.physical_elapsed() -> int</code>: Get the physical time elapsed since program start.</li>
<li><code>lf.time.start() -> int</code>: Get the starting physical and logical time.</li>
</ul>
<p>The last of these is both a physical and a logical time because, at the start of execution, the starting logical time is set equal to the current physical time as measured by a local clock.</p>
<p>A reaction can examine the current logical time (which is constant during the execution of the reaction). For example, consider the <a href="https://github.com/lf-lang/lingua-franca/blob/master/test/Python/src/GetTime.lf">GetTime.lf</a> example:</p>
<pre class="source-lf language-lf-py"><span class="source-lf storage-modifier-lflang">main</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">GetTime</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">timer</span><span class="source-lf"> t(</span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">, </span><span class="source-lf constant-numeric-int-lflang">1</span><span class="source-lf"> </span><span class="source-lf constant-numeric-lflang">sec</span><span class="source-lf">);</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(t) </span><span class="source-lf meta-embedded-block-py">{=</span>
<span class="source-lf meta-embedded-block-py">        </span><span class="source-lf meta-embedded-block-py">logical</span><span class="source-lf meta-embedded-block-py"> </span><span class="source-lf meta-embedded-block-py keyword-operator-assignment-python">=</span><span class="source-lf meta-embedded-block-py"> </span><span class="source-lf meta-embedded-block-py">lf</span><span class="source-lf meta-embedded-block-py meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-attribute-python">time</span><span class="source-lf meta-embedded-block-py meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-generic-python">logical</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python punctuation-definition-arguments-begin-python">(</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python punctuation-definition-arguments-end-python">)</span>
<span class="source-lf meta-embedded-block-py">        </span><span class="source-lf meta-embedded-block-py meta-function-call-python support-function-builtin-python">print</span><span class="source-lf meta-embedded-block-py meta-function-call-python punctuation-definition-arguments-begin-python">(</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python string-quoted-single-python punctuation-definition-string-begin-python">&quot;</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python string-quoted-single-python">Logical time is </span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python string-quoted-single-python punctuation-definition-string-end-python">&quot;</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python punctuation-separator-arguments-python">,</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python"> </span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python">logical</span><span class="source-lf meta-embedded-block-py meta-function-call-python punctuation-definition-arguments-end-python">)</span>
<span class="source-lf meta-embedded-block-py">    </span><span class="source-lf meta-embedded-block-py">=}</span>
<span class="source-lf">}</span>
</pre>
<p>When executed, you will get something like this:</p>
<pre class="source-lf language-text">---- Start execution at time Thu Nov  5 08:51:02 2020
---- plus 864237900 nanoseconds.
Logical time is  1604587862864237900
Logical time is  1604587863864237900
Logical time is  1604587864864237900
...</pre>
<p>The first two lines give the current time-of-day provided by the execution platform at the start of execution. This is used to initialize logical time. Subsequent values of logical time are printed out in their raw form, rather than the friendlier form in the first two lines. If you look closely, you will see that each number is one second larger than the previous number, where one second is 1000000000 nanoseconds.</p>
<p>You can also obtain the <em>elapsed</em> logical time since the start of execution:</p>
<pre class="source-lf language-lf-py"><span class="source-lf storage-modifier-lflang">main</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">GetTime</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">timer</span><span class="source-lf"> t(</span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">, </span><span class="source-lf constant-numeric-int-lflang">1</span><span class="source-lf"> </span><span class="source-lf constant-numeric-lflang">sec</span><span class="source-lf">);</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(t) </span><span class="source-lf meta-embedded-block-py">{=</span>
<span class="source-lf meta-embedded-block-py">        </span><span class="source-lf meta-embedded-block-py">elapsed</span><span class="source-lf meta-embedded-block-py"> </span><span class="source-lf meta-embedded-block-py keyword-operator-assignment-python">=</span><span class="source-lf meta-embedded-block-py"> </span><span class="source-lf meta-embedded-block-py">lf</span><span class="source-lf meta-embedded-block-py meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-attribute-python">time</span><span class="source-lf meta-embedded-block-py meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-generic-python">logical_elapsed</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python punctuation-definition-arguments-begin-python">(</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python punctuation-definition-arguments-end-python">)</span>
<span class="source-lf meta-embedded-block-py">        </span><span class="source-lf meta-embedded-block-py meta-function-call-python support-function-builtin-python">print</span><span class="source-lf meta-embedded-block-py meta-function-call-python punctuation-definition-arguments-begin-python">(</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python string-quoted-single-python punctuation-definition-string-begin-python">&quot;</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python string-quoted-single-python">Elapsed logical time is </span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python string-quoted-single-python punctuation-definition-string-end-python">&quot;</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python punctuation-separator-arguments-python">,</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python"> </span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python">elapsed</span><span class="source-lf meta-embedded-block-py meta-function-call-python punctuation-definition-arguments-end-python">)</span>
<span class="source-lf meta-embedded-block-py">    </span><span class="source-lf meta-embedded-block-py">=}</span>
<span class="source-lf">}</span>
</pre>
<p>This will produce:</p>
<pre class="source-lf language-text">---- Start execution at time Thu Nov  5 08:51:02 2020
---- plus 864237900 nanoseconds.
Elapsed logical time is  0
Elapsed logical time is  1000000000
Elapsed logical time is  2000000000
...</pre>
<p>You can also get physical time, which comes from your platform’s real-time clock:</p>
<pre class="source-lf language-lf-py"><span class="source-lf storage-modifier-lflang">main</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">GetTime</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">timer</span><span class="source-lf"> t(</span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">, </span><span class="source-lf constant-numeric-int-lflang">1</span><span class="source-lf"> </span><span class="source-lf constant-numeric-lflang">sec</span><span class="source-lf">);</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(t) </span><span class="source-lf meta-embedded-block-py">{=</span>
<span class="source-lf meta-embedded-block-py">        </span><span class="source-lf meta-embedded-block-py">physical</span><span class="source-lf meta-embedded-block-py"> </span><span class="source-lf meta-embedded-block-py keyword-operator-assignment-python">=</span><span class="source-lf meta-embedded-block-py"> </span><span class="source-lf meta-embedded-block-py">lf</span><span class="source-lf meta-embedded-block-py meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-attribute-python">time</span><span class="source-lf meta-embedded-block-py meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-generic-python">physical</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python punctuation-definition-arguments-begin-python">(</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python punctuation-definition-arguments-end-python">)</span>
<span class="source-lf meta-embedded-block-py">        </span><span class="source-lf meta-embedded-block-py meta-function-call-python support-function-builtin-python">print</span><span class="source-lf meta-embedded-block-py meta-function-call-python punctuation-definition-arguments-begin-python">(</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python string-quoted-single-python punctuation-definition-string-begin-python">&quot;</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python string-quoted-single-python">Physical time is </span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python string-quoted-single-python punctuation-definition-string-end-python">&quot;</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python punctuation-separator-arguments-python">,</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python"> </span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python">physical</span><span class="source-lf meta-embedded-block-py meta-function-call-python punctuation-definition-arguments-end-python">)</span>
<span class="source-lf meta-embedded-block-py">    </span><span class="source-lf meta-embedded-block-py">=}</span>
<span class="source-lf">}</span>
</pre>
<p>This will produce something like this:</p>
<pre class="source-lf language-text">---- Start execution at time Thu Nov  5 08:51:02 2020
---- plus 864237900 nanoseconds.
Physical time is  1604587862864343500
Physical time is  1604587863864401900
Physical time is  1604587864864395200
...</pre>
<p>Finally, you can get elapsed physical time:</p>
<pre class="source-lf language-lf-py"><span class="source-lf storage-modifier-lflang">main</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">GetTime</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">timer</span><span class="source-lf"> t(</span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">, </span><span class="source-lf constant-numeric-int-lflang">1</span><span class="source-lf"> </span><span class="source-lf constant-numeric-lflang">sec</span><span class="source-lf">);</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(t) </span><span class="source-lf meta-embedded-block-py">{=</span>
<span class="source-lf meta-embedded-block-py">        </span><span class="source-lf meta-embedded-block-py">elapsed_physical</span><span class="source-lf meta-embedded-block-py"> </span><span class="source-lf meta-embedded-block-py keyword-operator-assignment-python">=</span><span class="source-lf meta-embedded-block-py"> </span><span class="source-lf meta-embedded-block-py">lf</span><span class="source-lf meta-embedded-block-py meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-attribute-python">time</span><span class="source-lf meta-embedded-block-py meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-generic-python">physical_elapsed</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python punctuation-definition-arguments-begin-python">(</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python punctuation-definition-arguments-end-python">)</span>
<span class="source-lf meta-embedded-block-py">        </span><span class="source-lf meta-embedded-block-py meta-function-call-python support-function-builtin-python">print</span><span class="source-lf meta-embedded-block-py meta-function-call-python punctuation-definition-arguments-begin-python">(</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python string-quoted-single-python punctuation-definition-string-begin-python">&quot;</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python string-quoted-single-python">Elapsed physical time is </span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python string-quoted-single-python punctuation-definition-string-end-python">&quot;</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python punctuation-separator-arguments-python">,</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python"> </span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python">elapsed_physical</span><span class="source-lf meta-embedded-block-py meta-function-call-python punctuation-definition-arguments-end-python">)</span>
<span class="source-lf meta-embedded-block-py">    </span><span class="source-lf meta-embedded-block-py">=}</span>
<span class="source-lf">}</span>
</pre>
<p>This will produce something like this:</p>
<pre class="source-lf language-text">---- Start execution at time Thu Nov  5 08:51:02 2020
---- plus 864237900 nanoseconds.
Elapsed physical time is  110200
Elapsed physical time is  1000185400
Elapsed physical time is  2000178600
...</pre>
<p>Notice that these numbers are increasing by roughly one second each time. If you set the <code>fast</code> target parameter to <code>true</code>, then logical time will elapse much faster than physical time.</p>
<p>Working with nanoseconds in the Python code can be tedious if you are interested in longer durations. For convenience, a set of functions are available to the Python programmer to convert time units into the required nanoseconds. For example, you can specify 200 msec in Python code as <code>MSEC(200)</code> or two weeks as <code>WEEKS(2)</code>. The provided functions are <code>NSEC</code>, <code>USEC</code> (for microseconds), <code>MSEC</code>, <code>SEC</code>, <code>MINUTE</code>, <code>HOUR</code>, <code>DAY</code>, and <code>WEEK</code>. You may also use the plural of any of these. Examples are given in the next section.</p>
</div>
<div class="lf-ts">
<p>See <a href="#summary-of-time-functions">Summary of Time Functions</a> and <a href="#utility-function-reference">Utility Function Reference</a> for a quick API reference.</p>
<p>Timers are specified exactly as in the <a href="/docs/handbook/time-and-timers">Time and Timers</a> section. When working with time in the TypeScript code body of a reaction, however, you will need to know a bit about its internal representation.</p>
<p>A <code>TimeValue</code> is an class defined in the TypeScript target library file <code>time.ts</code> to represent a time instant or interval. For your convenience <code>TimeValue</code> and other classes from the <code>time.ts</code> library mentioned in these instructions are automatically imported into scope of your reactions. An instant is the number of nanoseconds that have elapsed since January 1, 1970. An interval is the difference between two instants. When an LF program starts executing, logical time is (normally) set to the instant provided by the operating system. (On some embedded platforms without real-time clocks, it will be set instead to zero.)</p>
<p>Internally a <code>TimeValue</code> uses two numbers to represent the time. To prevent overflow (which would occur for time intervals spanning more than 0.29 years if a single JavaScript number, which has 2^53 bits of precision, were to be used), we use <em>two</em> numbers to store a time value. The first number denotes the number of whole seconds in the interval or instant; the second number denotes the remaining number of nanoseconds in the interval or instant. The first number represents the number of seconds, the second number represents the number of nanoseconds. These fields are not accessible to the programmer, instead <code>TimeValue</code>s may be manipulated by an <a href="#summary-of-time-functions">API</a> with functions for addition, subtraction, and comparison.</p>
<p>A reaction can examine the current logical time (which is constant during the execution of the reaction). For example, consider:</p>
<pre class="source-lf language-lf-ts"><span class="source-lf meta-targetspec-lflang keyword-control-lflang">target</span><span class="source-lf meta-targetspec-lflang"> </span><span class="source-lf meta-targetspec-lflang constant-language-lflang">TypeScript</span><span class="source-lf meta-targetspec-lflang">;</span>
<span class="source-lf storage-modifier-lflang">main</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">GetTime</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">timer</span><span class="source-lf"> t(</span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">, </span><span class="source-lf constant-numeric-int-lflang">1</span><span class="source-lf"> </span><span class="source-lf constant-numeric-lflang">sec</span><span class="source-lf">);</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(t) </span><span class="source-lf meta-embedded-block-ts">{=</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts storage-type-ts">let</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-definition-variable-ts variable-other-readwrite-ts">logical</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-type-annotation-ts keyword-operator-type-annotation-ts">:</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-type-annotation-ts entity-name-type-ts">TimeValue</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-type-annotation-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts keyword-operator-assignment-ts">=</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-function-call-ts variable-other-object-ts">util</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-function-call-ts punctuation-accessor-ts">.</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-function-call-ts entity-name-function-ts">getCurrentLogicalTime</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-brace-round-ts">)</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-function-call-ts support-class-console-ts">console</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts punctuation-accessor-ts">.</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts support-function-console-ts">log</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-begin-ts">&quot;</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts">Logical time is </span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-end-ts">&quot;</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-arithmetic-ts">+</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">logical</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-arithmetic-ts">+</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-begin-ts">&quot;</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts">.</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-end-ts">&quot;</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">)</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">    </span><span class="source-lf meta-embedded-block-ts">=}</span>
<span class="source-lf">}</span>
</pre>
<p>When executed, you will get something like this:</p>
<pre class="source-lf language-text">Logical time is (1584666585 secs; 805146880 nsecs).
Logical time is (1584666586 secs; 805146880 nsecs).
Logical time is (1584666587 secs; 805146880 nsecs).
...</pre>
<p>Subsequent values of logical time are printed out in their raw form, of seconds and nanoseconds. If you look closely, you will see that each number is one second larger than the previous number.</p>
<p>You can also obtain the <em>elapsed</em> logical time since the start of execution, rather than exact logical time:</p>
<pre class="source-lf language-lf-ts"><span class="source-lf storage-modifier-lflang">main</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">GetTime</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">timer</span><span class="source-lf"> t(</span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">, </span><span class="source-lf constant-numeric-int-lflang">1</span><span class="source-lf"> </span><span class="source-lf constant-numeric-lflang">sec</span><span class="source-lf">);</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(t) </span><span class="source-lf meta-embedded-block-ts">{=</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts storage-type-ts">let</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-definition-variable-ts variable-other-readwrite-ts">logical</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-type-annotation-ts keyword-operator-type-annotation-ts">:</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-type-annotation-ts entity-name-type-ts">TimeValue</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-type-annotation-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts keyword-operator-assignment-ts">=</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-function-call-ts variable-other-object-ts">util</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-function-call-ts punctuation-accessor-ts">.</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-function-call-ts entity-name-function-ts">getElapsedLogicalTime</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-brace-round-ts">)</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-function-call-ts support-class-console-ts">console</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts punctuation-accessor-ts">.</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts support-function-console-ts">log</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-begin-ts">&quot;</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts">Logical time is </span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-end-ts">&quot;</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-arithmetic-ts">+</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">logical</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-arithmetic-ts">+</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-begin-ts">&quot;</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts">.</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-end-ts">&quot;</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">)</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">    </span><span class="source-lf meta-embedded-block-ts">=}</span>
<span class="source-lf">}</span>
</pre>
<p>This will produce:</p>
<pre class="source-lf language-text">Logical time is (0 secs; 0 nsecs).
Logical time is (1 secs; 0 nsecs).
Logical time is (2 secs; 0 nsecs).
...</pre>
<p>You can get physical time, which comes from your platform’s real-time clock:</p>
<pre class="source-lf language-lf-ts"><span class="source-lf storage-modifier-lflang">main</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">GetTime</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">timer</span><span class="source-lf"> t(</span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">, </span><span class="source-lf constant-numeric-int-lflang">1</span><span class="source-lf"> </span><span class="source-lf constant-numeric-lflang">sec</span><span class="source-lf">);</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(t) </span><span class="source-lf meta-embedded-block-ts">{=</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts storage-type-ts">let</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-definition-variable-ts variable-other-readwrite-ts">physical</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-type-annotation-ts keyword-operator-type-annotation-ts">:</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-type-annotation-ts entity-name-type-ts">TimeValue</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-type-annotation-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts keyword-operator-assignment-ts">=</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-function-call-ts variable-other-object-ts">util</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-function-call-ts punctuation-accessor-ts">.</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-function-call-ts entity-name-function-ts">getCurrentPhysicalTime</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-brace-round-ts">)</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-function-call-ts support-class-console-ts">console</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts punctuation-accessor-ts">.</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts support-function-console-ts">log</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-begin-ts">&quot;</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts">Physical time is </span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-end-ts">&quot;</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-arithmetic-ts">+</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">physical</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-arithmetic-ts">+</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-begin-ts">&quot;</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts">.</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-end-ts">&quot;</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">)</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">    </span><span class="source-lf meta-embedded-block-ts">=}</span>
<span class="source-lf">}</span>
</pre>
<p>This will produce something like this:</p>
<pre class="source-lf language-text">Physical time is (1584666801 secs; 644171008 nsecs).
Physical time is (1584666802 secs; 642269952 nsecs).
Physical time is (1584666803 secs; 642278912 nsecs).
...</pre>
<p>Notice that these numbers are increasing by <em>roughly</em> one second each time.</p>
<p>You can also get <em>elapsed</em> physical time from the start of execution:</p>
<pre class="source-lf language-lf-ts"><span class="source-lf storage-modifier-lflang">main</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">GetTime</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">timer</span><span class="source-lf"> t(</span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">, </span><span class="source-lf constant-numeric-int-lflang">1</span><span class="source-lf"> </span><span class="source-lf constant-numeric-lflang">sec</span><span class="source-lf">);</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(t) </span><span class="source-lf meta-embedded-block-ts">{=</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts storage-type-ts">let</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-definition-variable-ts variable-other-readwrite-ts">physical</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-type-annotation-ts keyword-operator-type-annotation-ts">:</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-type-annotation-ts entity-name-type-ts">TimeValue</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-type-annotation-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts keyword-operator-assignment-ts">=</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-function-call-ts variable-other-object-ts">util</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-function-call-ts punctuation-accessor-ts">.</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-function-call-ts entity-name-function-ts">getElapsedPhysicalTime</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-brace-round-ts">)</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-function-call-ts support-class-console-ts">console</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts punctuation-accessor-ts">.</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts support-function-console-ts">log</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-begin-ts">&quot;</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts">Physical time is </span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-end-ts">&quot;</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-arithmetic-ts">+</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">physical</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-arithmetic-ts">+</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-begin-ts">&quot;</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts">.</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-end-ts">&quot;</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">)</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">    </span><span class="source-lf meta-embedded-block-ts">=}</span>
<span class="source-lf">}</span>
</pre>
<p>This will produce something like:</p>
<pre class="source-lf language-text">Physical time is (0 secs; 2260992 nsecs).
Physical time is (1 secs; 166912 nsecs).
Physical time is (2 secs; 136960 nsecs).
...</pre>
<p>You can create a <code>TimeValue</code> yourself with the <code>UnitBasedTimeValue</code> class. <code>UnitBasedTimeValue</code> is a subclass of <code>TimeValue</code> and can be used wherever you could also use a <code>TimeValue</code> directly obtained from one of the <code>util</code> functions. A <code>UnitBasedTimeValue</code> is constructed with a whole number and a <code>TimeUnit</code>. A <code>TimeUnit</code> is an enum from the <code>time.ts</code> library with convenient labels for common time units. These are nsec, usec, msec, sec (or secs), minute (or minutes), hour (or hours), day (or days), and week (or weeks).</p>
<p>This reactor has an example of a UnitBasedTimeValue.</p>
<pre class="source-lf language-lf-ts"><span class="source-lf storage-modifier-lflang">main</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">GetTime</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">timer</span><span class="source-lf"> t(</span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">, </span><span class="source-lf constant-numeric-int-lflang">1</span><span class="source-lf"> </span><span class="source-lf constant-numeric-lflang">sec</span><span class="source-lf">);</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(t) </span><span class="source-lf meta-embedded-block-ts">{=</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts storage-type-ts">let</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-definition-variable-ts variable-other-readwrite-ts">myTimeValue</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-type-annotation-ts keyword-operator-type-annotation-ts">:</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-type-annotation-ts entity-name-type-ts">TimeValue</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-type-annotation-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts keyword-operator-assignment-ts">=</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts new-expr-ts keyword-operator-new-ts">new</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts new-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts new-expr-ts meta-function-call-ts entity-name-function-ts">UnitBasedTimeValue</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts new-expr-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts new-expr-ts constant-numeric-decimal-ts">200</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts new-expr-ts punctuation-separator-comma-ts">,</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts new-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts new-expr-ts variable-other-object-ts">TimeUnit</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts new-expr-ts punctuation-accessor-ts">.</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts new-expr-ts variable-other-property-ts">msec</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts new-expr-ts meta-brace-round-ts">)</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts storage-type-ts">let</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-definition-variable-ts variable-other-readwrite-ts">logical</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-type-annotation-ts keyword-operator-type-annotation-ts">:</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-type-annotation-ts entity-name-type-ts">TimeValue</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-type-annotation-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts keyword-operator-assignment-ts">=</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-function-call-ts variable-other-object-ts">util</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-function-call-ts punctuation-accessor-ts">.</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-function-call-ts entity-name-function-ts">getCurrentLogicalTime</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-brace-round-ts">)</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-function-call-ts support-class-console-ts">console</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts punctuation-accessor-ts">.</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts support-function-console-ts">log</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-begin-ts">&quot;</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts">My custom time value is </span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-end-ts">&quot;</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-arithmetic-ts">+</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">myTimeValue</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-arithmetic-ts">+</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-begin-ts">&quot;</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts">.</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-end-ts">&quot;</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">)</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">    </span><span class="source-lf meta-embedded-block-ts">=}</span>
</pre>
<p>This will produce:</p>
<pre class="source-lf language-text">My custom time value is 200 msec.
My custom time value is 200 msec.
My custom time value is 200 msec.
...</pre>
<h3 id="tags" style="position:relative;"><a href="#tags" aria-label="tags permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Tags</h3>
<p>The TypeScript target provides a utility to get the current <code>Tag</code> of a reaction. Recall that time in Lingua Franca is superdense and each <code>TimeValue </code>is paired with an integer “microstep” index to track the number of iterations at a particular <code>TimeValue</code>. A <code>Tag</code> is this combination of a TimeValue and a “microstep”. The <code>time.ts</code> library provides functions for adding, subtracting, and comparing <code>Tag</code>s.</p>
<p>You can get the current <code>Tag</code> in your reactions. This example illustrates tags with a <a href="#zero-delay-actions">Zero-Delay Action</a>:</p>
<pre class="source-lf language-lf-ts"><span class="source-lf meta-targetspec-lflang keyword-control-lflang">target</span><span class="source-lf meta-targetspec-lflang"> </span><span class="source-lf meta-targetspec-lflang constant-language-lflang">TypeScript</span><span class="source-lf meta-targetspec-lflang">;</span>
<span class="source-lf storage-modifier-lflang">main</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">GetTime</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">timer</span><span class="source-lf"> t(</span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">, </span><span class="source-lf constant-numeric-int-lflang">1</span><span class="source-lf"> </span><span class="source-lf constant-numeric-lflang">sec</span><span class="source-lf">);</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">logical</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">action</span><span class="source-lf"> a;</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(t) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> a </span><span class="source-lf meta-embedded-block-ts">{=</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts storage-type-ts">let</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-definition-variable-ts variable-other-readwrite-ts">superdense</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-type-annotation-ts keyword-operator-type-annotation-ts">:</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-type-annotation-ts entity-name-type-ts">Tag</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-type-annotation-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts keyword-operator-assignment-ts">=</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-function-call-ts variable-other-object-ts">util</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-function-call-ts punctuation-accessor-ts">.</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-function-call-ts entity-name-function-ts">getCurrentTag</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-brace-round-ts">)</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-function-call-ts support-class-console-ts">console</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts punctuation-accessor-ts">.</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts support-function-console-ts">log</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-begin-ts">&quot;</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts">First iteration - the tag is: </span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-end-ts">&quot;</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-arithmetic-ts">+</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">superdense</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-arithmetic-ts">+</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-begin-ts">&quot;</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts">.</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-end-ts">&quot;</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">)</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-function-call-ts variable-other-object-ts">actions</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts punctuation-accessor-ts">.</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts variable-other-object-property-ts">a</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts punctuation-accessor-ts">.</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts entity-name-function-ts">schedule</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts constant-numeric-decimal-ts">0</span><span class="source-lf meta-embedded-block-ts punctuation-separator-comma-ts">,</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts constant-language-null-ts">null</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">)</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">    </span><span class="source-lf meta-embedded-block-ts">=}</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(a) </span><span class="source-lf meta-embedded-block-ts">{=</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts storage-type-ts">let</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-definition-variable-ts variable-other-readwrite-ts">superdense</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-type-annotation-ts keyword-operator-type-annotation-ts">:</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-type-annotation-ts entity-name-type-ts">Tag</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-type-annotation-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts keyword-operator-assignment-ts">=</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-function-call-ts variable-other-object-ts">util</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-function-call-ts punctuation-accessor-ts">.</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-function-call-ts entity-name-function-ts">getCurrentTag</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-brace-round-ts">)</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts storage-type-ts">let</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-definition-variable-ts variable-other-readwrite-ts">timePart</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-type-annotation-ts keyword-operator-type-annotation-ts">:</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-type-annotation-ts entity-name-type-ts">TimeValue</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-type-annotation-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts keyword-operator-assignment-ts">=</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts variable-other-object-ts">superdense</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts punctuation-accessor-ts">.</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts variable-other-property-ts">time</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts storage-type-ts">let</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-definition-variable-ts variable-other-readwrite-ts">microstepPart</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-type-annotation-ts keyword-operator-type-annotation-ts">:</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-type-annotation-ts support-type-primitive-ts">number</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-type-annotation-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts keyword-operator-assignment-ts">=</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts variable-other-object-ts">superdense</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts punctuation-accessor-ts">.</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts variable-other-property-ts">microstep</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-function-call-ts support-class-console-ts">console</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts punctuation-accessor-ts">.</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts support-function-console-ts">log</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-begin-ts">&quot;</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts">Second iteration - the time part of the tag is:  </span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-end-ts">&quot;</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-arithmetic-ts">+</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">timePart</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-arithmetic-ts">+</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-begin-ts">&quot;</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts">.</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-end-ts">&quot;</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">)</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-function-call-ts support-class-console-ts">console</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts punctuation-accessor-ts">.</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts support-function-console-ts">log</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-begin-ts">&quot;</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts">Second iteration - the microstep part of the tag is:  </span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-end-ts">&quot;</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-arithmetic-ts">+</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">microstepPart</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-arithmetic-ts">+</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-begin-ts">&quot;</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts">.</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-end-ts">&quot;</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">)</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">    </span><span class="source-lf meta-embedded-block-ts">=}</span>
<span class="source-lf">}</span>
</pre>
<p>This will produce:</p>
<pre class="source-lf language-text">First iteration - the tag is: ((1584669987 secs; 740464896 nsecs), 0).
Second iteration - the time part of the tag is:  (1584669987 secs; 740464896 nsecs).
Second iteration - the microstep part of the tag is:  1.
First iteration - the tag is: ((1584669988 secs; 740464896 nsecs), 0).
Second iteration - the time part of the tag is:  (1584669988 secs; 740464896 nsecs).
Second iteration - the microstep part of the tag is:  1.
First iteration - the tag is: ((1584669989 secs; 740464896 nsecs), 0).
Second iteration - the time part of the tag is:  (1584669989 secs; 740464896 nsecs).
Second iteration - the microstep part of the tag is:  1.
...</pre>
<p>The first reaction prints the “First iteration” part of the output at microstep 0. The second reaction occurs one microstep later (explained in <a href="#scheduling-delayed-reactions">Scheduling Delayed Reactions</a>) and illustrates how to split a <code>Tag</code> into its constituent <code>TimeValue</code> and microstep.</p>
<h3 id="summary-of-time-functions" style="position:relative;"><a href="#summary-of-time-functions" aria-label="summary of time functions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Summary of Time Functions</h3>
<p>See <a href="#timed-behavior">Time</a>. These time functions are defined in the <a href="https://github.com/lf-lang/reactor-ts/blob/master/src/core/time.ts">time.ts</a> library of <a href="https://github.com/lf-lang/reactor-ts">reactor-ts</a>.</p>
<p><code>UnitBasedTimeValue(value: number, unit:TimeUnit)</code> Constructor for <code>UnitBasedTimeValue</code>, a programmer-friendly subclass of TimeValue. Use a number and a <code>TimeUnit</code> enum.</p>
<pre class="source-lf language-ts"><span class="source-ts meta-enum-declaration-ts storage-type-enum-ts">enum</span><span class="source-ts meta-enum-declaration-ts"> </span><span class="source-ts meta-enum-declaration-ts entity-name-type-enum-ts">TimeUnit</span><span class="source-ts meta-enum-declaration-ts"> </span><span class="source-ts meta-enum-declaration-ts punctuation-definition-block-ts">{</span>
<span class="source-ts meta-enum-declaration-ts">  </span><span class="source-ts meta-enum-declaration-ts variable-other-enummember-ts">nsec</span><span class="source-ts meta-enum-declaration-ts punctuation-separator-comma-ts">,</span>
<span class="source-ts meta-enum-declaration-ts">  </span><span class="source-ts meta-enum-declaration-ts variable-other-enummember-ts">usec</span><span class="source-ts meta-enum-declaration-ts punctuation-separator-comma-ts">,</span>
<span class="source-ts meta-enum-declaration-ts">  </span><span class="source-ts meta-enum-declaration-ts variable-other-enummember-ts">msec</span><span class="source-ts meta-enum-declaration-ts punctuation-separator-comma-ts">,</span>
<span class="source-ts meta-enum-declaration-ts">  </span><span class="source-ts meta-enum-declaration-ts variable-other-enummember-ts">sec</span><span class="source-ts meta-enum-declaration-ts punctuation-separator-comma-ts">,</span>
<span class="source-ts meta-enum-declaration-ts">  </span><span class="source-ts meta-enum-declaration-ts variable-other-enummember-ts">secs</span><span class="source-ts meta-enum-declaration-ts punctuation-separator-comma-ts">,</span>
<span class="source-ts meta-enum-declaration-ts">  </span><span class="source-ts meta-enum-declaration-ts variable-other-enummember-ts">minute</span><span class="source-ts meta-enum-declaration-ts punctuation-separator-comma-ts">,</span>
<span class="source-ts meta-enum-declaration-ts">  </span><span class="source-ts meta-enum-declaration-ts variable-other-enummember-ts">minutes</span><span class="source-ts meta-enum-declaration-ts punctuation-separator-comma-ts">,</span>
<span class="source-ts meta-enum-declaration-ts">  </span><span class="source-ts meta-enum-declaration-ts variable-other-enummember-ts">hour</span><span class="source-ts meta-enum-declaration-ts punctuation-separator-comma-ts">,</span>
<span class="source-ts meta-enum-declaration-ts">  </span><span class="source-ts meta-enum-declaration-ts variable-other-enummember-ts">hours</span><span class="source-ts meta-enum-declaration-ts punctuation-separator-comma-ts">,</span>
<span class="source-ts meta-enum-declaration-ts">  </span><span class="source-ts meta-enum-declaration-ts variable-other-enummember-ts">day</span><span class="source-ts meta-enum-declaration-ts punctuation-separator-comma-ts">,</span>
<span class="source-ts meta-enum-declaration-ts">  </span><span class="source-ts meta-enum-declaration-ts variable-other-enummember-ts">days</span><span class="source-ts meta-enum-declaration-ts punctuation-separator-comma-ts">,</span>
<span class="source-ts meta-enum-declaration-ts">  </span><span class="source-ts meta-enum-declaration-ts variable-other-enummember-ts">week</span><span class="source-ts meta-enum-declaration-ts punctuation-separator-comma-ts">,</span>
<span class="source-ts meta-enum-declaration-ts">  </span><span class="source-ts meta-enum-declaration-ts variable-other-enummember-ts">weeks</span><span class="source-ts meta-enum-declaration-ts punctuation-separator-comma-ts">,</span>
<span class="source-ts meta-enum-declaration-ts punctuation-definition-block-ts">}</span>
</pre>
<p><code>TimeValue.add(other: TimeValue): TimeValue</code> Adds <code>this</code> to <code>other</code>.</p>
<p><code>TimeValue.subtract(other: TimeValue): TimeValue</code> Subtracts <code>other</code> from <code>this</code>. A negative result is an error.</p>
<p><code>TimeValue.difference(other: TimeValue): TimeValue</code> Obtain absolute value of <code>other</code> minus <code>this</code>.</p>
<p><code>TimeValue.isEqualTo(other: TimeValue): boolean</code> Returns true if <code>this</code> and <code>other</code> represents the same TimeValue. Otherwise false.</p>
<p><code>TimeValue.isZero(): boolean</code> Returns true if <code>this</code> represents a 0 TimeValue.</p>
<p><code>TimeValue.isEarlierThan(other: TimeValue): boolean</code> Returns true if <code>this</code> &#x3C; <code>other</code>. Otherwise false.</p>
<p><code>Tag.isSmallerThan(other: Tag): boolean</code> Returns true if <code>this</code> &#x3C; <code>other</code>. Otherwise false.</p>
<p><code>Tag.isSimultaneousWith(other: Tag): boolean</code> Returns true if <code>this</code> and <code>other</code> represents the same Tag. Otherwise false.</p>
<p><code>Tag.getLaterTag(delay: TimeValue): Tag</code> Returns a tag with the time part of this TimeValue incremented by delay.</p>
<p><code>Tag.getMicroStepLater(): Tag</code> Returns a tag with the microstep part of this TimeValue incremented by 1.</p>
<p><code>getTimeDifference(other: Tag): TimeValue</code> Returns a TimeValue that represents the absolute (i.e., positive) time difference between <code>this</code> and <code>other</code>.</p>
</div>
<div class="lf-rs">
<p><span class="warning">FIXME: details needed here on time in Rust.</span></p>
</div>
<h2 id="actions" style="position:relative;"><a href="#actions" aria-label="actions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Actions</h2>
<div class="lf-c">
<p>Actions are described in <a href="/docs/handbook/actions">Actions</a>. If an action is declared with a data type, then it can carry a <strong>value</strong>, a data value that becomes available to any reaction triggered by the action. This is particularly useful for physical actions that are externally triggered because it enables the action to convey information to the reactor. This could be, for example, the body of an incoming network message or a numerical reading from a sensor.</p>
<p>Recall from <a href="/docs/handbook/composing-reactors">Composing Reactors</a> that the <span class="lf_keywords">after</span> keyword on a connection between ports introduces a logical delay. This is actually implemented using a logical action. We illustrate how this is done using the <a href="https://github.com/lf-lang/lingua-franca/blob/master/test/C/src/DelayInt.lf">DelayInt</a> example:</p>
<pre class="source-lf language-lf-c"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">DelayInt</span><span class="source-lf">(delay:</span><span class="source-lf storage-type-lflang">time</span><span class="source-lf">(</span><span class="source-lf constant-numeric-int-lflang">100</span><span class="source-lf"> </span><span class="source-lf constant-numeric-lflang">msec</span><span class="source-lf">)) {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">input</span><span class="source-lf"> in:</span><span class="source-lf storage-type-primitive-cpp storage-type-built-in-primitive-cpp">int</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">output</span><span class="source-lf"> out:</span><span class="source-lf storage-type-primitive-cpp storage-type-built-in-primitive-cpp">int</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">logical</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">action</span><span class="source-lf"> d:</span><span class="source-lf storage-type-primitive-cpp storage-type-built-in-primitive-cpp">int</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(d) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> out </span><span class="source-lf meta-embedded-block-c">{=</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c entity-name-function-call-cpp">lf_set</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c">out</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c variable-other-object-access-cpp">d</span><span class="source-lf meta-embedded-block-c punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c variable-other-property-cpp">value</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">    </span><span class="source-lf meta-embedded-block-c">=}</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(in) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> d </span><span class="source-lf meta-embedded-block-c">{=</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c entity-name-function-call-cpp">lf_schedule_int</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c">d</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c variable-other-object-access-cpp">self</span><span class="source-lf meta-embedded-block-c punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c variable-other-property-cpp">delay</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c variable-other-object-access-cpp">in</span><span class="source-lf meta-embedded-block-c punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c variable-other-property-cpp">value</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">    </span><span class="source-lf meta-embedded-block-c">=}</span>
<span class="source-lf">}</span>
</pre>
<p>Using this reactor as follows</p>
<pre class="source-lf language-lf"><span class="source-lf">    </span><span class="source-lf variable-other-constant-reactorinstance-lflang">delay</span><span class="source-lf"> </span><span class="source-lf keyword-operator-lflang">=</span><span class="source-lf"> </span><span class="source-lf keyword-operator-new-lflang">new</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Delay</span><span class="source-lf">();</span>
<span class="source-lf">    </span><span class="source-lf variable-other-constant-reactorinstance-lflang">source</span><span class="source-lf keyword-operator-lflang">.</span><span class="source-lf variable-other-lflang">out</span><span class="source-lf"> </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> </span><span class="source-lf variable-other-constant-reactorinstance-lflang">delay</span><span class="source-lf keyword-operator-lflang">.</span><span class="source-lf variable-other-lflang">in</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf variable-other-constant-reactorinstance-lflang">delay</span><span class="source-lf keyword-operator-lflang">.</span><span class="source-lf variable-other-lflang">in</span><span class="source-lf"> </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> </span><span class="source-lf variable-other-constant-reactorinstance-lflang">sink</span><span class="source-lf keyword-operator-lflang">.</span><span class="source-lf variable-other-lflang">out</span>
</pre>
<p>is equivalent to</p>
<pre class="source-lf language-lf"><span class="source-lf">    </span><span class="source-lf variable-other-constant-reactorinstance-lflang">source</span><span class="source-lf keyword-operator-lflang">.</span><span class="source-lf variable-other-lflang">out</span><span class="source-lf"> </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> </span><span class="source-lf variable-other-constant-reactorinstance-lflang">sink</span><span class="source-lf keyword-operator-lflang">.</span><span class="source-lf variable-other-lflang">in</span><span class="source-lf"> </span><span class="source-lf keyword-control-lflang">after</span><span class="source-lf"> </span><span class="source-lf constant-numeric-int-lflang">100</span><span class="source-lf"> </span><span class="source-lf constant-numeric-lflang">msec</span>
</pre>
<p>(except that our <code>DelayInt</code> reactor will only work with data type <code>int</code>).</p>
<p>In the <code>Delay</code> reactor, the action <code>d</code> is specified with a type <code>int</code>. The reaction to the input <code>in</code> declares as its effect the action <code>d</code>. This declaration makes it possible for the reaction to schedule a future triggering of <code>d</code>. The reaction uses one of several variants of the <strong>lf_schedule</strong> function, namely <strong>lf_schedule_int</strong>, a convenience function provided because integer payloads on actions are very common. We will see below, however, that payloads can have any data type.</p>
<p>The first reaction declares that it is triggered by <code>d</code> and has effect <code>out</code>. To
read the value, it uses the <code>d->value</code> variable. Because this reaction is first,
the <code>out</code> at any logical time can be produced before the input <code>in</code> is even
known to be present. Hence, this reactor can be used in a feedback loop, where
<code>out</code> triggers a downstream reactor to send a message back to <code>in</code> of this same
reactor. If the reactions were given in the opposite order, there would be a
causality loop and compilation would fail.</p>
<p>If you are not sure whether an action carries a value, you can test for it as follows:</p>
<pre class="source-lf language-lf-c"><span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(d) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> out </span><span class="source-lf meta-embedded-block-c">{=</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c keyword-control-if-cpp">if</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-section-parens-begin-bracket-round-cpp">(</span><span class="source-lf meta-embedded-block-c meta-parens-cpp variable-other-object-access-cpp">d</span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c meta-parens-cpp variable-other-property-cpp">has_value</span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-section-parens-end-bracket-round-cpp">)</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-section-block-begin-bracket-curly-cpp">{</span>
<span class="source-lf meta-embedded-block-c meta-block-cpp">            </span><span class="source-lf meta-embedded-block-c meta-block-cpp entity-name-function-call-cpp">lf_set</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c meta-block-cpp">out</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c meta-block-cpp"> </span><span class="source-lf meta-embedded-block-c meta-block-cpp variable-other-object-access-cpp">d</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c meta-block-cpp variable-other-property-cpp">value</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c meta-block-cpp">        </span><span class="source-lf meta-embedded-block-c meta-block-cpp punctuation-section-block-end-bracket-curly-cpp">}</span>
<span class="source-lf meta-embedded-block-c">    </span><span class="source-lf meta-embedded-block-c">=}</span>
</pre>
<p>It is possible to both be triggered by and schedule an action in the same
reaction. For example, the
following <a href="https://github.com/lf-lang/lingua-franca/blob/master/test/C/src/CountSelf.lf">CountSelf</a>
reactor will produce a counting sequence after it is triggered the first time:</p>
<pre class="source-lf language-lf-c"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">CountSelf</span><span class="source-lf">(delay:</span><span class="source-lf storage-type-lflang">time</span><span class="source-lf">(</span><span class="source-lf constant-numeric-int-lflang">100</span><span class="source-lf"> </span><span class="source-lf constant-numeric-lflang">msec</span><span class="source-lf">)) {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">output</span><span class="source-lf"> out:</span><span class="source-lf storage-type-primitive-cpp storage-type-built-in-primitive-cpp">int</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">logical</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">action</span><span class="source-lf"> a:</span><span class="source-lf storage-type-primitive-cpp storage-type-built-in-primitive-cpp">int</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(</span><span class="source-lf support-variable-lflang">startup</span><span class="source-lf">) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> a, out </span><span class="source-lf meta-embedded-block-c">{=</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c entity-name-function-call-cpp">lf_set</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c">out</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c constant-numeric-decimal-cpp">0</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c entity-name-function-call-cpp">lf_schedule_int</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c">a</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c variable-other-object-access-cpp">self</span><span class="source-lf meta-embedded-block-c punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c variable-other-property-cpp">delay</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c constant-numeric-decimal-cpp">1</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">    </span><span class="source-lf meta-embedded-block-c">=}</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(a) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> a, out </span><span class="source-lf meta-embedded-block-c">{=</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c entity-name-function-call-cpp">lf_set</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c">out</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c variable-other-object-access-cpp">a</span><span class="source-lf meta-embedded-block-c punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c variable-other-property-cpp">value</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c entity-name-function-call-cpp">lf_schedule_int</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c">a</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c variable-other-object-access-cpp">self</span><span class="source-lf meta-embedded-block-c punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c variable-other-property-cpp">delay</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c variable-other-object-access-cpp">a</span><span class="source-lf meta-embedded-block-c punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c variable-other-property-cpp">value</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c keyword-operator-cpp">+</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c constant-numeric-decimal-cpp">1</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">    </span><span class="source-lf meta-embedded-block-c">=}</span>
<span class="source-lf">}</span>
</pre>
<p>Of course, to produce a counting sequence, it would be more efficient to use a state variable.</p>
</div>
<div class="lf-cpp">
<p>The C++ provides a simple interface for scheduling actions via a <code>schedule()</code> method. Actions are described in the <a href="/docs/handbook/actions">Actions</a> document. Consider the <a href="https://github.com/lf-lang/lingua-franca/blob/master/test/Cpp/src/Schedule.lf">Schedule</a> reactor:</p>
<pre class="source-lf language-lf-cpp"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Schedule</span><span class="source-lf"> {</span>
<span class="source-lf">	</span><span class="source-lf storage-modifier-lflang">input</span><span class="source-lf"> x:</span><span class="source-lf storage-type-primitive-cpp storage-type-built-in-primitive-cpp">int</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">logical</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">action</span><span class="source-lf"> a;</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(a) </span><span class="source-lf meta-embedded-block-cpp">{=</span>
<span class="source-lf meta-embedded-block-cpp">         </span><span class="source-lf meta-embedded-block-cpp storage-type-primitive-cpp storage-type-built-in-primitive-cpp">auto</span><span class="source-lf meta-embedded-block-cpp"> elapsed_time </span><span class="source-lf meta-embedded-block-cpp keyword-operator-assignment-cpp">=</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp entity-name-function-call-cpp">get_elapsed_logical_time</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-cpp">         </span><span class="source-lf meta-embedded-block-cpp entity-name-scope-resolution-cpp">std</span><span class="source-lf meta-embedded-block-cpp punctuation-separator-namespace-access-cpp punctuation-separator-scope-resolution-cpp">::</span><span class="source-lf meta-embedded-block-cpp">cout </span><span class="source-lf meta-embedded-block-cpp keyword-operator-bitwise-shift-cpp">&lt;&lt;</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp string-quoted-double-cpp punctuation-definition-string-begin-cpp">&quot;</span><span class="source-lf meta-embedded-block-cpp string-quoted-double-cpp">Action triggered at logical time </span><span class="source-lf meta-embedded-block-cpp string-quoted-double-cpp punctuation-definition-string-end-cpp">&quot;</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp keyword-operator-bitwise-shift-cpp">&lt;&lt;</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp variable-other-object-access-cpp">elapsed_time</span><span class="source-lf meta-embedded-block-cpp punctuation-separator-dot-access-cpp">.</span><span class="source-lf meta-embedded-block-cpp entity-name-function-member-cpp">count</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-begin-bracket-round-function-member-cpp">(</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-end-bracket-round-function-member-cpp">)</span>
<span class="source-lf meta-embedded-block-cpp">                  </span><span class="source-lf meta-embedded-block-cpp keyword-operator-bitwise-shift-cpp">&lt;&lt;</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp string-quoted-double-cpp punctuation-definition-string-begin-cpp">&quot;</span><span class="source-lf meta-embedded-block-cpp string-quoted-double-cpp"> after start</span><span class="source-lf meta-embedded-block-cpp string-quoted-double-cpp punctuation-definition-string-end-cpp">&quot;</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp keyword-operator-bitwise-shift-cpp">&lt;&lt;</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp entity-name-scope-resolution-cpp">std</span><span class="source-lf meta-embedded-block-cpp punctuation-separator-namespace-access-cpp punctuation-separator-scope-resolution-cpp">::</span><span class="source-lf meta-embedded-block-cpp">endl</span><span class="source-lf meta-embedded-block-cpp punctuation-terminator-statement-cpp">;</span><span class="source-lf meta-embedded-block-cpp"> elapsed_time)</span><span class="source-lf meta-embedded-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-cpp">    </span><span class="source-lf meta-embedded-block-cpp">=}</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(x) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> a </span><span class="source-lf meta-embedded-block-cpp">{=</span>
<span class="source-lf meta-embedded-block-cpp">        </span><span class="source-lf meta-embedded-block-cpp variable-other-object-access-cpp">a</span><span class="source-lf meta-embedded-block-cpp punctuation-separator-dot-access-cpp">.</span><span class="source-lf meta-embedded-block-cpp entity-name-function-member-cpp">schedule</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-begin-bracket-round-function-member-cpp">(</span><span class="source-lf meta-embedded-block-cpp constant-numeric-decimal-cpp">200</span><span class="source-lf meta-embedded-block-cpp keyword-other-unit-user-defined-cpp">ms</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-end-bracket-round-function-member-cpp">)</span><span class="source-lf meta-embedded-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-cpp">    </span><span class="source-lf meta-embedded-block-cpp">=}</span>
<span class="source-lf">}</span>
</pre>
<p>When this reactor receives an input <code>x</code>, it calls <code>schedule()</code> on the action <code>a</code>, specifying a logical time offset of 200 milliseconds. The action <code>a</code> will be triggered at a logical time 200 milliseconds after the arrival of input <code>x</code>. At that logical time, the second reaction will trigger and will use the <code>get_elapsed_logical_time()</code> function to determine how much logical time has elapsed since the start of execution.</p>
<p>Notice that after the logical time offset of 200 msec, there may be another input <code>x</code> simultaneous with the action <code>a</code>. Because the reaction to <code>a</code> is given first, it will execute first. This becomes important when such a reactor is put into a feedback loop (see below).</p>
<p>Physical actions work exactly as described in the <a href="/docs/handbook/actions#physical-actions">Physical Actions</a> section.</p>
<h3 id="zero-delay-actions" style="position:relative;"><a href="#zero-delay-actions" aria-label="zero delay actions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Zero-Delay Actions</h3>
<p>If the specified delay in a <code>schedule()</code> is omitted or is zero, then the action <code>a</code> will be triggered one <strong>microstep</strong> later in <strong>superdense time</strong> (see <a href="/docs/handbook/superdense-time">Superdense Time</a>). Hence, if the input <code>x</code> arrives at metric logical time <em>t</em>, and you call <code>schedule()</code> in one of the following ways:</p>
<pre class="source-lf language-cpp"><span class="source-cpp variable-other-object-access-cpp">a</span><span class="source-cpp punctuation-separator-dot-access-cpp">.</span><span class="source-cpp entity-name-function-member-cpp">schedule</span><span class="source-cpp punctuation-section-arguments-begin-bracket-round-function-member-cpp">(</span><span class="source-cpp punctuation-section-arguments-end-bracket-round-function-member-cpp">)</span><span class="source-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-cpp variable-other-object-access-cpp">a</span><span class="source-cpp punctuation-separator-dot-access-cpp">.</span><span class="source-cpp entity-name-function-member-cpp">schedule</span><span class="source-cpp punctuation-section-arguments-begin-bracket-round-function-member-cpp">(</span><span class="source-cpp constant-numeric-decimal-cpp">0</span><span class="source-cpp keyword-other-unit-user-defined-cpp">s</span><span class="source-cpp punctuation-section-arguments-end-bracket-round-function-member-cpp">)</span><span class="source-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-cpp variable-other-object-access-cpp">a</span><span class="source-cpp punctuation-separator-dot-access-cpp">.</span><span class="source-cpp entity-name-function-member-cpp">schedule</span><span class="source-cpp punctuation-section-arguments-begin-bracket-round-function-member-cpp">(</span><span class="source-cpp entity-name-scope-resolution-function-call-cpp">reactor</span><span class="source-cpp punctuation-separator-namespace-access-cpp punctuation-separator-scope-resolution-function-call-cpp">::</span><span class="source-cpp entity-name-scope-resolution-function-call-cpp">Duration</span><span class="source-cpp punctuation-separator-namespace-access-cpp punctuation-separator-scope-resolution-function-call-cpp">::</span><span class="source-cpp entity-name-function-call-cpp">zero</span><span class="source-cpp punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-cpp punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-cpp punctuation-section-arguments-end-bracket-round-function-member-cpp">)</span><span class="source-cpp punctuation-terminator-statement-cpp">;</span>
</pre>
<p>then when the reaction to <code>a</code> is triggered, the input <code>x</code> will be absent (it was present at the <em>previous</em> microstep). The reaction to <code>x</code> and the reaction to <code>a</code> occur at the same metric time <em>t</em>, but separated by one microstep, so these two reactions are <em>not</em> logically simultaneous.</p>
<p>As discussed above the he metric time is visible to the programmer and can be obtained in a reaction using either <code>get_elapsed_logical_time()</code> or <code>get_logical_time()</code>.</p>
<p>As described in the <a href="/docs/handbook/actions">Action</a> document, action declarations can have a <em>min_delay</em> parameter. This modifies the timestamp further. Also, the action declaration may be <strong>physical</strong> rather than <strong>logical</strong>, in which case, the assigned timestamp will depend on the physical clock of the executing platform.</p>
<h3 id="actions-with-values" style="position:relative;"><a href="#actions-with-values" aria-label="actions with values permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Actions With Values</h3>
<p>If an action is declared with a data type, then it can carry a <strong>value</strong>, a data value that becomes available to any reaction triggered by the action. This is particularly useful for physical actions that are externally triggered because it enables the action to convey information to the reactor. This could be, for example, the body of an incoming network message or a numerical reading from a sensor.</p>
<p>Recall from the <a href="/docs/handbook/composing-reactors#connections-with-logical-delays">Composing Reactors</a> section that the <strong>after</strong> keyword on a connection between ports introduces a logical delay. This is actually implemented using a logical action. We illustrate how this is done using the <a href="https://github.com/tud-ccc/reactor-cpp/blob/master/include/reactor-cpp/logical_time.hh">DelayInt</a> example:</p>
<pre class="source-lf language-lf-cpp"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Delay</span><span class="source-lf">(delay:</span><span class="source-lf storage-type-lflang">time</span><span class="source-lf">(</span><span class="source-lf constant-numeric-int-lflang">100</span><span class="source-lf"> </span><span class="source-lf constant-numeric-lflang">msec</span><span class="source-lf">)) {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">input</span><span class="source-lf"> in:</span><span class="source-lf storage-type-primitive-cpp storage-type-built-in-primitive-cpp">int</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">output</span><span class="source-lf"> out:</span><span class="source-lf storage-type-primitive-cpp storage-type-built-in-primitive-cpp">int</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">logical</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">action</span><span class="source-lf"> d:</span><span class="source-lf storage-type-primitive-cpp storage-type-built-in-primitive-cpp">int</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(in) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> d </span><span class="source-lf meta-embedded-block-cpp">{=</span>
<span class="source-lf meta-embedded-block-cpp">        </span><span class="source-lf meta-embedded-block-cpp variable-other-object-access-cpp">d</span><span class="source-lf meta-embedded-block-cpp punctuation-separator-dot-access-cpp">.</span><span class="source-lf meta-embedded-block-cpp entity-name-function-member-cpp">schedule</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-begin-bracket-round-function-member-cpp">(</span><span class="source-lf meta-embedded-block-cpp variable-other-object-access-cpp">in</span><span class="source-lf meta-embedded-block-cpp punctuation-separator-dot-access-cpp">.</span><span class="source-lf meta-embedded-block-cpp entity-name-function-member-cpp">get</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-begin-bracket-round-function-member-cpp">(</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-end-bracket-round-function-member-cpp">)</span><span class="source-lf meta-embedded-block-cpp punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-cpp"> delay</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-end-bracket-round-function-member-cpp">)</span><span class="source-lf meta-embedded-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-cpp">    </span><span class="source-lf meta-embedded-block-cpp">=}</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(d) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> out </span><span class="source-lf meta-embedded-block-cpp">{=</span>
<span class="source-lf meta-embedded-block-cpp">        </span><span class="source-lf meta-embedded-block-cpp keyword-control-if-cpp">if</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp punctuation-section-parens-begin-bracket-round-cpp">(</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp variable-other-object-access-cpp">d</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp punctuation-separator-dot-access-cpp">.</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp entity-name-function-member-cpp">is_present</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp punctuation-section-arguments-begin-bracket-round-function-member-cpp">(</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp punctuation-section-arguments-end-bracket-round-function-member-cpp">)</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp punctuation-section-parens-end-bracket-round-cpp">)</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp meta-block-cpp punctuation-section-block-begin-bracket-curly-cpp">{</span>
<span class="source-lf meta-embedded-block-cpp meta-block-cpp">            </span><span class="source-lf meta-embedded-block-cpp meta-block-cpp variable-other-object-access-cpp">out</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp punctuation-separator-dot-access-cpp">.</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp entity-name-function-member-cpp">set</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp punctuation-section-arguments-begin-bracket-round-function-member-cpp">(</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp variable-other-object-access-cpp">d</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp punctuation-separator-dot-access-cpp">.</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp entity-name-function-member-cpp">get</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp punctuation-section-arguments-begin-bracket-round-function-member-cpp">(</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp punctuation-section-arguments-end-bracket-round-function-member-cpp">)</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp punctuation-section-arguments-end-bracket-round-function-member-cpp">)</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-cpp meta-block-cpp">        </span><span class="source-lf meta-embedded-block-cpp meta-block-cpp punctuation-section-block-end-bracket-curly-cpp">}</span>
<span class="source-lf meta-embedded-block-cpp">    </span><span class="source-lf meta-embedded-block-cpp">=}</span>
<span class="source-lf">}</span>
</pre>
<p>Using this reactor as follows</p>
<pre class="source-lf language-lf-cpp"><span class="source-lf variable-other-constant-reactorinstance-lflang">d</span><span class="source-lf"> </span><span class="source-lf keyword-operator-lflang">=</span><span class="source-lf"> </span><span class="source-lf keyword-operator-new-lflang">new</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Delay</span><span class="source-lf">();</span>
<span class="source-lf variable-other-constant-reactorinstance-lflang">source</span><span class="source-lf keyword-operator-lflang">.</span><span class="source-lf variable-other-lflang">out</span><span class="source-lf"> </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> </span><span class="source-lf variable-other-constant-reactorinstance-lflang">d</span><span class="source-lf keyword-operator-lflang">.</span><span class="source-lf variable-other-lflang">in</span><span class="source-lf">;</span>
<span class="source-lf variable-other-constant-reactorinstance-lflang">d</span><span class="source-lf keyword-operator-lflang">.</span><span class="source-lf variable-other-lflang">in</span><span class="source-lf"> </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> </span><span class="source-lf variable-other-constant-reactorinstance-lflang">sink</span><span class="source-lf keyword-operator-lflang">.</span><span class="source-lf variable-other-lflang">out</span>
</pre>
<p>is equivalent to</p>
<pre class="source-lf language-lf-cpp"><span class="source-lf variable-other-constant-reactorinstance-lflang">source</span><span class="source-lf keyword-operator-lflang">.</span><span class="source-lf variable-other-lflang">out</span><span class="source-lf"> </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> </span><span class="source-lf variable-other-constant-reactorinstance-lflang">sink</span><span class="source-lf keyword-operator-lflang">.</span><span class="source-lf variable-other-lflang">in</span><span class="source-lf"> </span><span class="source-lf keyword-control-lflang">after</span><span class="source-lf"> </span><span class="source-lf constant-numeric-int-lflang">100</span><span class="source-lf"> </span><span class="source-lf constant-numeric-lflang">msec</span>
</pre>
<p>(except that our <code>Delay</code> reactor will only work with data type <code>int</code>).</p>
<p>The action <code>d</code> is specified with a type <code>int</code>. The reaction to the input <code>in</code> declares as its effect the action <code>d</code>. This declaration makes it possible for the reaction to schedule a future triggering of <code>d</code>. In the C++ target, actions use the same mechanism for passing data via value pointers as do ports. In the example above, the <code>reactor::ImmutablValuePtr&#x3C;int></code> derived by the call to <code>in.get()</code> is passed directly to <code>schedule()</code>. Similarly, the value can later be retrieved from the action with <code>d.get()</code> and passed to the output port.</p>
<p>The first reaction declares that it is triggered by <code>d</code> and has effect <code>out</code>. Because this reaction is first, the <code>out</code> at any logical time can be produced before the input <code>in</code> is even known to be present. Hence, this reactor can be used in a feedback loop, where <code>out</code> triggers a downstream reactor to send a message back to <code>in</code> of this same reactor. If the reactions were given in the opposite order, there would be causality loop and compilation would fail.</p>
<p>If you are not sure whether an action carries a value, you can test for it using <code>is_present()</code>:</p>
<pre class="source-lf language-lf-cpp"><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(d) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> out </span><span class="source-lf meta-embedded-block-cpp">{=</span>
<span class="source-lf meta-embedded-block-cpp">    </span><span class="source-lf meta-embedded-block-cpp keyword-control-if-cpp">if</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp punctuation-section-parens-begin-bracket-round-cpp">(</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp variable-other-object-access-cpp">d</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp punctuation-separator-dot-access-cpp">.</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp entity-name-function-member-cpp">is_present</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp punctuation-section-arguments-begin-bracket-round-function-member-cpp">(</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp punctuation-section-arguments-end-bracket-round-function-member-cpp">)</span><span class="source-lf meta-embedded-block-cpp meta-parens-cpp punctuation-section-parens-end-bracket-round-cpp">)</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp meta-block-cpp punctuation-section-block-begin-bracket-curly-cpp">{</span>
<span class="source-lf meta-embedded-block-cpp meta-block-cpp">        </span><span class="source-lf meta-embedded-block-cpp meta-block-cpp variable-other-object-access-cpp">out</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp punctuation-separator-dot-access-cpp">.</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp entity-name-function-member-cpp">set</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp punctuation-section-arguments-begin-bracket-round-function-member-cpp">(</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp variable-other-object-access-cpp">d</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp punctuation-separator-dot-access-cpp">.</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp entity-name-function-member-cpp">get</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp punctuation-section-arguments-begin-bracket-round-function-member-cpp">(</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp punctuation-section-arguments-end-bracket-round-function-member-cpp">)</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp punctuation-section-arguments-end-bracket-round-function-member-cpp">)</span><span class="source-lf meta-embedded-block-cpp meta-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-cpp meta-block-cpp">    </span><span class="source-lf meta-embedded-block-cpp meta-block-cpp punctuation-section-block-end-bracket-curly-cpp">}</span>
<span class="source-lf meta-embedded-block-cpp">=}</span>
</pre>
<p>It is possible to both be triggered by and schedule an action the same reaction. For example, this reactor will produce a counting sequence after it is triggered the first time:</p>
<pre class="source-lf language-lf-cpp"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">CountSelf</span><span class="source-lf">(delay:</span><span class="source-lf storage-type-lflang">time</span><span class="source-lf">(</span><span class="source-lf constant-numeric-int-lflang">100</span><span class="source-lf"> </span><span class="source-lf constant-numeric-lflang">msec</span><span class="source-lf">)) {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">output</span><span class="source-lf"> out:</span><span class="source-lf storage-type-primitive-cpp storage-type-built-in-primitive-cpp">int</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">logical</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">action</span><span class="source-lf"> a:</span><span class="source-lf storage-type-primitive-cpp storage-type-built-in-primitive-cpp">int</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(</span><span class="source-lf support-variable-lflang">startup</span><span class="source-lf">) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> a, out </span><span class="source-lf meta-embedded-block-cpp">{=</span>
<span class="source-lf meta-embedded-block-cpp">        </span><span class="source-lf meta-embedded-block-cpp variable-other-object-access-cpp">out</span><span class="source-lf meta-embedded-block-cpp punctuation-separator-dot-access-cpp">.</span><span class="source-lf meta-embedded-block-cpp entity-name-function-member-cpp">set</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-begin-bracket-round-function-member-cpp">(</span><span class="source-lf meta-embedded-block-cpp constant-numeric-decimal-cpp">0</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-end-bracket-round-function-member-cpp">)</span><span class="source-lf meta-embedded-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-cpp">        </span><span class="source-lf meta-embedded-block-cpp variable-other-object-access-cpp">a</span><span class="source-lf meta-embedded-block-cpp punctuation-separator-dot-access-cpp">.</span><span class="source-lf meta-embedded-block-cpp entity-name-function-member-cpp">schedule_int</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-begin-bracket-round-function-member-cpp">(</span><span class="source-lf meta-embedded-block-cpp constant-numeric-decimal-cpp">1</span><span class="source-lf meta-embedded-block-cpp punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-cpp"> delay</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-end-bracket-round-function-member-cpp">)</span><span class="source-lf meta-embedded-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-cpp">    </span><span class="source-lf meta-embedded-block-cpp">=}</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(a) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> a, out </span><span class="source-lf meta-embedded-block-cpp">{=</span>
<span class="source-lf meta-embedded-block-cpp">        </span><span class="source-lf meta-embedded-block-cpp variable-other-object-access-cpp">out</span><span class="source-lf meta-embedded-block-cpp punctuation-separator-dot-access-cpp">.</span><span class="source-lf meta-embedded-block-cpp entity-name-function-member-cpp">set</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-begin-bracket-round-function-member-cpp">(</span><span class="source-lf meta-embedded-block-cpp variable-other-object-access-cpp">a</span><span class="source-lf meta-embedded-block-cpp punctuation-separator-dot-access-cpp">.</span><span class="source-lf meta-embedded-block-cpp entity-name-function-member-cpp">get</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-begin-bracket-round-function-member-cpp">(</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-end-bracket-round-function-member-cpp">)</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-end-bracket-round-function-member-cpp">)</span><span class="source-lf meta-embedded-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-cpp">        </span><span class="source-lf meta-embedded-block-cpp variable-other-object-access-cpp">a</span><span class="source-lf meta-embedded-block-cpp punctuation-separator-dot-access-cpp">.</span><span class="source-lf meta-embedded-block-cpp entity-name-function-member-cpp">schedule_int</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-begin-bracket-round-function-member-cpp">(</span><span class="source-lf meta-embedded-block-cpp keyword-operator-cpp">*</span><span class="source-lf meta-embedded-block-cpp variable-other-object-access-cpp">a</span><span class="source-lf meta-embedded-block-cpp punctuation-separator-dot-access-cpp">.</span><span class="source-lf meta-embedded-block-cpp entity-name-function-member-cpp">get</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-begin-bracket-round-function-member-cpp">(</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-end-bracket-round-function-member-cpp">)</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp keyword-operator-cpp">+</span><span class="source-lf meta-embedded-block-cpp"> </span><span class="source-lf meta-embedded-block-cpp constant-numeric-decimal-cpp">1</span><span class="source-lf meta-embedded-block-cpp punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-cpp"> delay</span><span class="source-lf meta-embedded-block-cpp punctuation-section-arguments-end-bracket-round-function-member-cpp">)</span><span class="source-lf meta-embedded-block-cpp punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-cpp">    </span><span class="source-lf meta-embedded-block-cpp">=}</span>
<span class="source-lf">}</span>
</pre>
<p>Of course, to produce a counting sequence, it would be more efficient to use a state variable.</p>
</div>
<div class="lf-py">
<p>Actions are described <a href="/docs/handbook/actions">here</a>. Actions can carry a
<strong>value</strong>, a Python object that becomes available to any reaction triggered by
the action. This is particularly useful for physical actions that are externally
triggered because it enables the action to convey information to the reactor.
This could be, for example, the body of an incoming network message or a
numerical reading from a sensor. Note that actions do not have a data
type in the Python target, even when they carry a value.</p>
<p>Recall from <a href="/docs/handbook/composing-reactors">Composing Reactors</a> that the
<span class="lf_keywords">after</span> keyword on a connection between ports introduces a logical delay. This
is actually implemented using a logical action. We illustrate how this is done
using the
<code>Delay</code> reactor in the <a href="https://github.com/lf-lang/lingua-franca/blob/master/test/Python/src/DelayInt.lf">DelayInt</a>
example:</p>
<pre class="source-lf language-lf-py"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Delay</span><span class="source-lf">(delay(</span><span class="source-lf constant-numeric-int-lflang">100</span><span class="source-lf"> </span><span class="source-lf constant-numeric-lflang">msec</span><span class="source-lf">)) {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">input</span><span class="source-lf"> _in;</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">output</span><span class="source-lf"> out;</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">logical</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">action</span><span class="source-lf"> a;</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(a) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> out </span><span class="source-lf meta-embedded-block-py">{=</span>
<span class="source-lf meta-embedded-block-py">        </span><span class="source-lf meta-embedded-block-py keyword-control-flow-python">if</span><span class="source-lf meta-embedded-block-py"> </span><span class="source-lf meta-embedded-block-py punctuation-parenthesis-begin-python">(</span><span class="source-lf meta-embedded-block-py">a</span><span class="source-lf meta-embedded-block-py meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-attribute-python">value</span><span class="source-lf meta-embedded-block-py"> </span><span class="source-lf meta-embedded-block-py keyword-operator-logical-python">is</span><span class="source-lf meta-embedded-block-py"> </span><span class="source-lf meta-embedded-block-py keyword-operator-logical-python">not</span><span class="source-lf meta-embedded-block-py"> </span><span class="source-lf meta-embedded-block-py constant-language-python">None</span><span class="source-lf meta-embedded-block-py punctuation-parenthesis-end-python">)</span><span class="source-lf meta-embedded-block-py"> </span><span class="source-lf meta-embedded-block-py keyword-operator-logical-python">and</span><span class="source-lf meta-embedded-block-py"> </span><span class="source-lf meta-embedded-block-py">a</span><span class="source-lf meta-embedded-block-py meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-attribute-python">is_present</span><span class="source-lf meta-embedded-block-py punctuation-separator-colon-python">:</span>
<span class="source-lf meta-embedded-block-py">            </span><span class="source-lf meta-embedded-block-py">out</span><span class="source-lf meta-embedded-block-py meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-generic-python">set</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python punctuation-definition-arguments-begin-python">(</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python">a</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-attribute-python">value</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python punctuation-definition-arguments-end-python">)</span>
<span class="source-lf meta-embedded-block-py">    </span><span class="source-lf meta-embedded-block-py">=}</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(_in) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> a </span><span class="source-lf meta-embedded-block-py">{=</span>
<span class="source-lf meta-embedded-block-py">        </span><span class="source-lf meta-embedded-block-py">a</span><span class="source-lf meta-embedded-block-py meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-generic-python">schedule</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python punctuation-definition-arguments-begin-python">(</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python variable-language-special-self-python">self</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-attribute-python">delay</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python punctuation-separator-arguments-python">,</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python"> </span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python">_in</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-attribute-python">value</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python punctuation-definition-arguments-end-python">)</span>
<span class="source-lf meta-embedded-block-py">    </span><span class="source-lf meta-embedded-block-py">=}</span>
<span class="source-lf">}</span>
</pre>
<p>Using this reactor as follows</p>
<pre class="source-lf language-lf"><span class="source-lf">    </span><span class="source-lf variable-other-constant-reactorinstance-lflang">delay</span><span class="source-lf"> </span><span class="source-lf keyword-operator-lflang">=</span><span class="source-lf"> </span><span class="source-lf keyword-operator-new-lflang">new</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Delay</span><span class="source-lf">()</span>
<span class="source-lf">    &lt;source_port_reference&gt; </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> </span><span class="source-lf variable-other-constant-reactorinstance-lflang">delay</span><span class="source-lf keyword-operator-lflang">.</span><span class="source-lf variable-other-lflang">_in</span>
<span class="source-lf">    </span><span class="source-lf variable-other-constant-reactorinstance-lflang">delay</span><span class="source-lf keyword-operator-lflang">.</span><span class="source-lf variable-other-lflang">_in</span><span class="source-lf"> </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> &lt;destination_port_reference&gt;</span>
</pre>
<p>is equivalent to</p>
<pre class="source-lf language-lf"><span class="source-lf">    &lt;source_port_reference&gt; </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> &lt;destination_port_reference&gt; </span><span class="source-lf keyword-control-lflang">after</span><span class="source-lf"> </span><span class="source-lf constant-numeric-int-lflang">100</span><span class="source-lf"> </span><span class="source-lf constant-numeric-lflang">msec</span>
</pre>
<p>In the <code>Delay</code> reactor, the reaction to the input <code>_in</code> declares as its effect
the action <code>a</code>. This declaration makes it possible for the reaction to schedule
a future triggering of <code>a</code> using the
<a href="/docs/handbook/target-language-details#schedule-functions"><code>a.schedule()</code></a>
method.</p>
<p>The first reaction declares that it is triggered by <code>a</code> and has effect <code>out</code>. To
read the value, it uses the <code>a.value</code> syntax. Because this reaction is first,
the <code>out</code> at any logical time can be produced before the input <code>_in</code> is even
known to be present. Hence, this reactor can be used in a feedback loop, where
<code>out</code> triggers a downstream reactor to send a message back to <code>_in</code> of this same
reactor. If the reactions were given in the opposite order, there would be a
causality loop and compilation would fail.</p>
<p>If you are not sure whether an action carries a value, you can test for it as follows:</p>
<pre class="source-lf language-lf-py"><span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(a) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> out </span><span class="source-lf meta-embedded-block-py">{=</span>
<span class="source-lf meta-embedded-block-py">        </span><span class="source-lf meta-embedded-block-py keyword-control-flow-python">if</span><span class="source-lf meta-embedded-block-py"> </span><span class="source-lf meta-embedded-block-py punctuation-parenthesis-begin-python">(</span><span class="source-lf meta-embedded-block-py">a</span><span class="source-lf meta-embedded-block-py meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-attribute-python">value</span><span class="source-lf meta-embedded-block-py"> </span><span class="source-lf meta-embedded-block-py keyword-operator-logical-python">is</span><span class="source-lf meta-embedded-block-py"> </span><span class="source-lf meta-embedded-block-py keyword-operator-logical-python">not</span><span class="source-lf meta-embedded-block-py"> </span><span class="source-lf meta-embedded-block-py constant-language-python">None</span><span class="source-lf meta-embedded-block-py punctuation-parenthesis-end-python">)</span><span class="source-lf meta-embedded-block-py punctuation-separator-colon-python">:</span>
<span class="source-lf meta-embedded-block-py">            </span><span class="source-lf meta-embedded-block-py">out</span><span class="source-lf meta-embedded-block-py meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-generic-python">set</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python punctuation-definition-arguments-begin-python">(</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python">a</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-attribute-python">value</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python punctuation-definition-arguments-end-python">)</span>
<span class="source-lf meta-embedded-block-py">    </span><span class="source-lf meta-embedded-block-py">=}</span>
</pre>
<p>It is possible to both be triggered by and schedule an action in the same
reaction. For example, the
following <a href="https://github.com/lf-lang/lingua-franca/blob/master/test/Python/src/CountSelf.lf">CountSelf</a>
reactor will produce a counting sequence after it is triggered the first time:</p>
<pre class="source-lf language-lf-py"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">CountSelf2</span><span class="source-lf">(delay(</span><span class="source-lf constant-numeric-int-lflang">100</span><span class="source-lf"> </span><span class="source-lf constant-numeric-lflang">msec</span><span class="source-lf">)) {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">output</span><span class="source-lf"> out;</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">logical</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">action</span><span class="source-lf"> a;</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(</span><span class="source-lf support-variable-lflang">startup</span><span class="source-lf">) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> a, out </span><span class="source-lf meta-embedded-block-py">{=</span>
<span class="source-lf meta-embedded-block-py">        </span><span class="source-lf meta-embedded-block-py">out</span><span class="source-lf meta-embedded-block-py meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-generic-python">set</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python punctuation-definition-arguments-begin-python">(</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python constant-numeric-dec-python">0</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python punctuation-definition-arguments-end-python">)</span>
<span class="source-lf meta-embedded-block-py">        </span><span class="source-lf meta-embedded-block-py">a</span><span class="source-lf meta-embedded-block-py meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-generic-python">schedule</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python punctuation-definition-arguments-begin-python">(</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python variable-language-special-self-python">self</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-attribute-python">delay</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python punctuation-separator-arguments-python">,</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python"> </span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python constant-numeric-dec-python">1</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python punctuation-definition-arguments-end-python">)</span>
<span class="source-lf meta-embedded-block-py">    </span><span class="source-lf meta-embedded-block-py">=}</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(a) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> a, out </span><span class="source-lf meta-embedded-block-py">{=</span>
<span class="source-lf meta-embedded-block-py">        </span><span class="source-lf meta-embedded-block-py">out</span><span class="source-lf meta-embedded-block-py meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-generic-python">set</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python punctuation-definition-arguments-begin-python">(</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python">a</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-attribute-python">value</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python punctuation-definition-arguments-end-python">)</span>
<span class="source-lf meta-embedded-block-py">        </span><span class="source-lf meta-embedded-block-py">a</span><span class="source-lf meta-embedded-block-py meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-generic-python">schedule</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python punctuation-definition-arguments-begin-python">(</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python variable-language-special-self-python">self</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-attribute-python">delay</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python punctuation-separator-arguments-python">,</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python"> </span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python">a</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-attribute-python">value</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python"> </span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python keyword-operator-arithmetic-python">+</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python"> </span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python constant-numeric-dec-python">1</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python punctuation-definition-arguments-end-python">)</span>
<span class="source-lf meta-embedded-block-py">    </span><span class="source-lf meta-embedded-block-py">=}</span>
<span class="source-lf">}</span>
</pre>
<p>Of course, to produce a counting sequence, it would be more efficient to use a state variable.</p>
</div>
<div class="lf-ts">
<p>Each action listed as an <strong>effect</strong> for a reaction is available as a schedulable object in the reaction body via the <code>actions</code> object. The TypeScript target provides a special <code>actions</code> object with a property for each schedulable action. Schedulable actions (of type <code>t</code>) have the object method:</p>
<pre class="source-lf language-lf-ts"><span class="source-lf">schedule: (extraDelay: TimeValue | </span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">, value?: T) </span><span class="source-lf keyword-operator-lflang">=</span><span class="source-lf">&gt; void;</span>
</pre>
<p>The first argument can either be the literal 0 (shorthand for 0 seconds) or a <code>TimeValue</code>/<code>UnitBasedTimeValue</code>. The second argument is the value for the action. Consider the following reactor:</p>
<pre class="source-lf language-lf-ts"><span class="source-lf meta-targetspec-lflang keyword-control-lflang">target</span><span class="source-lf meta-targetspec-lflang"> </span><span class="source-lf meta-targetspec-lflang constant-language-lflang">TypeScript</span><span class="source-lf meta-targetspec-lflang">;</span>
<span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Schedule</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">input</span><span class="source-lf"> x:</span><span class="source-lf storage-type-lflang">number</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">logical</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">action</span><span class="source-lf"> a;</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(x) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> a </span><span class="source-lf meta-embedded-block-ts">{=</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-function-call-ts variable-other-object-ts">actions</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts punctuation-accessor-ts">.</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts variable-other-object-property-ts">a</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts punctuation-accessor-ts">.</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts entity-name-function-ts">schedule</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts new-expr-ts keyword-operator-new-ts">new</span><span class="source-lf meta-embedded-block-ts new-expr-ts"> </span><span class="source-lf meta-embedded-block-ts new-expr-ts meta-function-call-ts entity-name-function-ts">UnitBasedTimeValue</span><span class="source-lf meta-embedded-block-ts new-expr-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts new-expr-ts constant-numeric-decimal-ts">200</span><span class="source-lf meta-embedded-block-ts new-expr-ts punctuation-separator-comma-ts">,</span><span class="source-lf meta-embedded-block-ts new-expr-ts"> </span><span class="source-lf meta-embedded-block-ts new-expr-ts variable-other-object-ts">TimeUnit</span><span class="source-lf meta-embedded-block-ts new-expr-ts punctuation-accessor-ts">.</span><span class="source-lf meta-embedded-block-ts new-expr-ts variable-other-property-ts">msec</span><span class="source-lf meta-embedded-block-ts new-expr-ts meta-brace-round-ts">)</span><span class="source-lf meta-embedded-block-ts punctuation-separator-comma-ts">,</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts constant-language-null-ts">null</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">)</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">    </span><span class="source-lf meta-embedded-block-ts">=}</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(a) </span><span class="source-lf meta-embedded-block-ts">{=</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts storage-type-ts">let</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-definition-variable-ts variable-other-readwrite-ts">elapsedTime</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts keyword-operator-assignment-ts">=</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-function-call-ts variable-other-object-ts">util</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-function-call-ts punctuation-accessor-ts">.</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-function-call-ts entity-name-function-ts">getElapsedLogicalTime</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-brace-round-ts">)</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-function-call-ts support-class-console-ts">console</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts punctuation-accessor-ts">.</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts support-function-console-ts">log</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-begin-ts">&quot;</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts">Action triggered at logical time </span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-end-ts">&quot;</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-arithmetic-ts">+</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">elapsedTime</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-arithmetic-ts">+</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-begin-ts">&quot;</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts"> after start.</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-end-ts">&quot;</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">)</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">    </span><span class="source-lf meta-embedded-block-ts">=}</span>
<span class="source-lf">}</span>
</pre>
<p>When this reactor receives an input <code>x</code>, it calls <code>schedule()</code> on the action <code>a</code>, so it will be triggered at the logical time offset (200 msec) with a null value. The action <code>a</code> will be triggered at a logical time 200 milliseconds after the arrival of input <code>x</code>. This will trigger the second reaction, which will use the <code>util.getElapsedLogicalTime()</code> function to determine how much logical time has elapsed since the start of execution. The third argument to the <code>schedule()</code> function is a <strong>value</strong>, data that can be carried by the action, which is explained below. In the above example, there is no value.</p>
<h3 id="zero-delay-actions-1" style="position:relative;"><a href="#zero-delay-actions-1" aria-label="zero delay actions 1 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Zero-Delay Actions</h3>
<p>If the specified delay in a <code>schedule()</code> call is zero, then the action <code>a</code> will be triggered one <strong>microstep</strong> later in <strong>superdense time</strong> (see <a href="/docs/handbook/superdense-time">Superdense Time</a>). Hence, if the input <code>x</code> arrives at metric logical time <em>t</em>, and you call <code>schedule()</code> as follows:</p>
<pre class="source-lf language-lf-ts"><span class="source-lf variable-other-constant-reactorinstance-lflang">actions</span><span class="source-lf keyword-operator-lflang">.</span><span class="source-lf variable-other-constant-reactorinstance-lflang">a</span><span class="source-lf keyword-operator-lflang">.</span><span class="source-lf variable-other-lflang">schedule</span><span class="source-lf">(</span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">);</span>
</pre>
<p>then when a reaction to <code>a</code> is triggered, the input <code>x</code> will be absent (it was present at the <em>previous</em> microstep). The reaction to <code>x</code> and the reaction to <code>a</code> occur at the same metric time <em>t</em>, but separated by one microstep, so these two reactions are <em>not</em> logically simultaneous. These reactions execute with different <a href="#tags">Tags</a>.</p>
<h3 id="actions-with-values-1" style="position:relative;"><a href="#actions-with-values-1" aria-label="actions with values 1 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Actions With Values</h3>
<p>If an action is declared with a data type, then it can carry a <strong>value</strong>, a data value that becomes available to any reaction triggered by the action. The most common use of this is to implement a logical delay, where a value provided at an input is produced on an output with a larger logical timestamp. To accomplish that, it is much easier to use the <strong>after</strong> keyword on a connection between reactors. Nevertheless, in this section, we explain how to directly use actions with value. In fact, the <strong>after</strong> keyword is implemented as described below.</p>
<p>If you are familiar with other targets (like C) you may notice it is much easier to schedule actions with values in TypeScript because of TypeScript/JavaScript’s garbage collected memory management. The following example implements a logical delay using an action with a value.</p>
<pre class="source-lf language-lf-ts"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Delay</span><span class="source-lf">(delay:</span><span class="source-lf storage-type-lflang">time</span><span class="source-lf">(</span><span class="source-lf constant-numeric-int-lflang">100</span><span class="source-lf"> </span><span class="source-lf constant-numeric-lflang">msec</span><span class="source-lf">)) {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">input</span><span class="source-lf"> x:</span><span class="source-lf storage-type-lflang">number</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">output</span><span class="source-lf"> out:</span><span class="source-lf storage-type-lflang">number</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">logical</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">action</span><span class="source-lf"> a:</span><span class="source-lf storage-type-lflang">number</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(x) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> a </span><span class="source-lf meta-embedded-block-ts">{=</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-function-call-ts variable-other-object-ts">actions</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts punctuation-accessor-ts">.</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts variable-other-object-property-ts">a</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts punctuation-accessor-ts">.</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts entity-name-function-ts">schedule</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">delay</span><span class="source-lf meta-embedded-block-ts punctuation-separator-comma-ts">,</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">x</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-control-as-ts">as</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts support-type-primitive-ts">number</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">)</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">    </span><span class="source-lf meta-embedded-block-ts">=}</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(a) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> out </span><span class="source-lf meta-embedded-block-ts">{=</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts keyword-control-conditional-ts">if</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">a</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-comparison-ts">!==</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts constant-language-null-ts">null</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">)</span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-definition-block-ts">{</span>
<span class="source-lf meta-embedded-block-ts meta-block-ts">            </span><span class="source-lf meta-embedded-block-ts meta-block-ts variable-other-readwrite-ts">out</span><span class="source-lf meta-embedded-block-ts meta-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts keyword-operator-assignment-ts">=</span><span class="source-lf meta-embedded-block-ts meta-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts variable-other-readwrite-ts">a</span><span class="source-lf meta-embedded-block-ts meta-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts keyword-control-as-ts">as</span><span class="source-lf meta-embedded-block-ts meta-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts support-type-primitive-ts">number</span>
<span class="source-lf meta-embedded-block-ts meta-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-definition-block-ts">}</span>
<span class="source-lf meta-embedded-block-ts">    </span><span class="source-lf meta-embedded-block-ts">=}</span>
<span class="source-lf">}</span>
</pre>
<p>The action <code>a</code> is specified with a type <code>number</code>. The first reaction declares <code>a</code> as its effect. This declaration makes it possible for the reaction to schedule a future triggering of <code>a</code>. It’s necessary to explicitly annotate the type of <code>x</code> as a number in the schedule function because TypeScript doesn’t know the only trigger of a reaction must be present in that reaction.</p>
<p>The second reaction declares that it is triggered by <code>a</code> and has effect <code>out</code>. When a reaction triggers or uses an action the value of that action is made available within the reaction as a local variable with the name of the action. This variable will take on the value of the action and it will have the value <code>undefined</code> if that action is absent because it was not scheduled for this reaction.</p>
<p>The local variable cannot be used directly to schedule an action. As described above, an action <code>a</code> can only be scheduled in a reaction when it is 1) declared as an effect and 2) referenced through a property of the <code>actions</code> object. The reason for this implementation is that <code>actions.a</code> refers to the <strong>action</strong>, not its value, and it is possible to use both the action and the value in the same reaction. For example, the following reaction will produce a counting sequence after it is triggered the first time:</p>
<pre class="source-lf language-lf-ts"><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(a) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> out, a </span><span class="source-lf meta-embedded-block-ts">{=</span>
<span class="source-lf meta-embedded-block-ts">    </span><span class="source-lf meta-embedded-block-ts keyword-control-conditional-ts">if</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts variable-other-readwrite-ts">a</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts keyword-operator-comparison-ts">!==</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts constant-language-null-ts">null</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">)</span><span class="source-lf meta-embedded-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-definition-block-ts">{</span>
<span class="source-lf meta-embedded-block-ts meta-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-block-ts variable-other-readwrite-ts">a</span><span class="source-lf meta-embedded-block-ts meta-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts keyword-operator-assignment-ts">=</span><span class="source-lf meta-embedded-block-ts meta-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts variable-other-readwrite-ts">a</span><span class="source-lf meta-embedded-block-ts meta-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts keyword-control-as-ts">as</span><span class="source-lf meta-embedded-block-ts meta-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts support-type-primitive-ts">number</span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts meta-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-block-ts variable-other-readwrite-ts">out</span><span class="source-lf meta-embedded-block-ts meta-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts keyword-operator-assignment-ts">=</span><span class="source-lf meta-embedded-block-ts meta-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts variable-other-readwrite-ts">a</span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts meta-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-block-ts meta-var-expr-ts storage-type-ts">let</span><span class="source-lf meta-embedded-block-ts meta-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-definition-variable-ts variable-other-readwrite-ts">newValue</span><span class="source-lf meta-embedded-block-ts meta-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts meta-var-expr-ts keyword-operator-assignment-ts">=</span><span class="source-lf meta-embedded-block-ts meta-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts meta-var-expr-ts variable-other-readwrite-ts">a</span><span class="source-lf meta-embedded-block-ts meta-block-ts meta-var-expr-ts keyword-operator-increment-ts">++</span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts meta-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-block-ts meta-function-call-ts variable-other-object-ts">actions</span><span class="source-lf meta-embedded-block-ts meta-block-ts meta-function-call-ts punctuation-accessor-ts">.</span><span class="source-lf meta-embedded-block-ts meta-block-ts meta-function-call-ts variable-other-object-property-ts">a</span><span class="source-lf meta-embedded-block-ts meta-block-ts meta-function-call-ts punctuation-accessor-ts">.</span><span class="source-lf meta-embedded-block-ts meta-block-ts meta-function-call-ts entity-name-function-ts">schedule</span><span class="source-lf meta-embedded-block-ts meta-block-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts meta-block-ts variable-other-readwrite-ts">delay</span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-separator-comma-ts">,</span><span class="source-lf meta-embedded-block-ts meta-block-ts"> </span><span class="source-lf meta-embedded-block-ts meta-block-ts variable-other-readwrite-ts">newValue</span><span class="source-lf meta-embedded-block-ts meta-block-ts meta-brace-round-ts">)</span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts meta-block-ts">    </span><span class="source-lf meta-embedded-block-ts meta-block-ts punctuation-definition-block-ts">}</span>
<span class="source-lf meta-embedded-block-ts">=}</span>
</pre>
</div>
<div class="lf-rs">
<p>Actions may carry values if they mention a data type, for instance:</p>
<pre class="source-lf language-lf-rust"><span class="source-lf storage-modifier-lflang">logical</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">action</span><span class="source-lf"> act: </span><span class="source-lf entity-name-type-lflang">u32</span><span class="source-lf">;</span>
</pre>
<p>Within a reaction, you can schedule that action with a value like so</p>
<pre class="source-lf language-rust"><span class="source-rust">ctx.</span><span class="source-rust entity-name-function-rust">schedule_with_v</span><span class="source-rust">(</span><span class="source-rust">act, Asap, </span><span class="source-rust constant-numeric-integer-decimal-rust">30</span><span class="source-rust">);</span>
</pre>
<p>you can get the value from another reaction like so:</p>
<pre class="source-lf language-rust"><span class="source-rust keyword-control-rust">if</span><span class="source-rust"> </span><span class="source-rust keyword-other-rust">let</span><span class="source-rust"> </span><span class="source-rust support-constant-core-rust">Some</span><span class="source-rust">(value) </span><span class="source-rust keyword-operator-assignment-rust">=</span><span class="source-rust"> ctx.</span><span class="source-rust entity-name-function-rust">get_action</span><span class="source-rust">(</span><span class="source-rust">act) {</span>
<span class="source-rust">  </span><span class="source-rust comment-line-double-slash-rust">//</span><span class="source-rust comment-line-double-slash-rust"> a value is present at this tag</span>
<span class="source-rust">} </span><span class="source-rust keyword-control-rust">else</span><span class="source-rust"> {</span>
<span class="source-rust">  </span><span class="source-rust comment-line-double-slash-rust">//</span><span class="source-rust comment-line-double-slash-rust"> value was not specified</span>
<span class="source-rust">}</span>
</pre>
<p>If an action does not mention a data type, the type defaults to <code>()</code>.</p>
</div>
<h3 id="schedule-functions" style="position:relative;"><a href="#schedule-functions" aria-label="schedule functions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Schedule Functions</h3>
<div class="lf-c">
<p>Actions with values can be rather tricky to use because the value must usually be carried in dynamically allocated memory. It will not work for value to refer to a state variable of the reactor because that state variable will likely have changed value by the time the reactions to the action are invoked. Several variants of the <code>lf_schedule</code> function are provided to make it easier to pass values across time in varying circumstances.</p>
<blockquote>
<p><code>lf_schedule(&#x3C;action>, &#x3C;offset>);</code></p>
</blockquote>
<p>This is the simplest version as it carries no value. The action need not have a data type.</p>
<blockquote>
<p><code>lf_schedule_int(&#x3C;action>, &#x3C;offset>, &#x3C;value>);</code></p>
</blockquote>
<p>This version carries an <code>int</code> value. The data type of the action is required to be <code>int</code>.</p>
<blockquote>
<p><code>lf_schedule_token(&#x3C;action>, &#x3C;offset>, &#x3C;value>);</code></p>
</blockquote>
<p>This version carries a <strong>token</strong>, which has type <code>token_t</code> and points to the value, which can have any type. There is a <code>create_token()</code> function that can be used to create a token, but programmers will rarely need to use this. Instead, you can use <code>lf_schedule_value()</code> (see below), which will automatically create a token. Alternatively, for inputs with types ending in <code>*</code> or <code>[]</code>, the value is wrapped in a token, and the token can be obtained using the syntax <code>inputname->token</code> in a reaction and then forwarded using <code>lf_schedule_token()</code> (see <a href="#Dynamically-Allocated-Structs">Dynamically Allocated Structs</a> above). If the input is mutable, the reaction can then even modify the value pointed to by the token and/or use <code>lf_schedule_token()</code> to send the token to a future logical time. For example, the <a href="https://github.com/lf-lang/lingua-franca/blob/master/test/C/src/DelayPointer.lf">DelayPointer</a> reactor realizes a logical delay for any data type carried by a token:</p>
<pre class="source-lf language-lf-c"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">DelayPointer</span><span class="source-lf">(delay:</span><span class="source-lf storage-type-lflang">time</span><span class="source-lf">(</span><span class="source-lf constant-numeric-int-lflang">100</span><span class="source-lf"> </span><span class="source-lf constant-numeric-lflang">msec</span><span class="source-lf">)) {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">input</span><span class="source-lf"> in:</span><span class="source-lf storage-type-primitive-cpp storage-type-built-in-primitive-cpp">void</span><span class="source-lf keyword-operator-cpp">*</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">output</span><span class="source-lf"> out:</span><span class="source-lf storage-type-primitive-cpp storage-type-built-in-primitive-cpp">void</span><span class="source-lf keyword-operator-cpp">*</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">logical</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">action</span><span class="source-lf"> a:</span><span class="source-lf storage-type-primitive-cpp storage-type-built-in-primitive-cpp">void</span><span class="source-lf keyword-operator-cpp">*</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(a) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> out </span><span class="source-lf meta-embedded-block-c">{=</span>
<span class="source-lf meta-embedded-block-c comment-line-double-slash-cpp">        </span><span class="source-lf meta-embedded-block-c comment-line-double-slash-cpp punctuation-definition-comment-cpp">//</span><span class="source-lf meta-embedded-block-c comment-line-double-slash-cpp"> Using lf_set_token delegates responsibility for</span>
<span class="source-lf meta-embedded-block-c comment-line-double-slash-cpp">        </span><span class="source-lf meta-embedded-block-c comment-line-double-slash-cpp punctuation-definition-comment-cpp">//</span><span class="source-lf meta-embedded-block-c comment-line-double-slash-cpp"> freeing the allocated memory downstream.</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c entity-name-function-call-cpp">lf_set_token</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c">out</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c variable-other-object-access-cpp">a</span><span class="source-lf meta-embedded-block-c punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c variable-other-property-cpp">token</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">    </span><span class="source-lf meta-embedded-block-c">=}</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(in) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> a </span><span class="source-lf meta-embedded-block-c">{=</span>
<span class="source-lf meta-embedded-block-c comment-line-double-slash-cpp">        </span><span class="source-lf meta-embedded-block-c comment-line-double-slash-cpp punctuation-definition-comment-cpp">//</span><span class="source-lf meta-embedded-block-c comment-line-double-slash-cpp"> Schedule the actual token from the input rather than</span>
<span class="source-lf meta-embedded-block-c comment-line-double-slash-cpp">        </span><span class="source-lf meta-embedded-block-c comment-line-double-slash-cpp punctuation-definition-comment-cpp">//</span><span class="source-lf meta-embedded-block-c comment-line-double-slash-cpp"> a new token with a copy of the input value.</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c entity-name-function-call-cpp">lf_schedule_token</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c">a</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c variable-other-object-access-cpp">self</span><span class="source-lf meta-embedded-block-c punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c variable-other-property-cpp">delay</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c variable-other-object-access-cpp">in</span><span class="source-lf meta-embedded-block-c punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c variable-other-property-cpp">token</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">    </span><span class="source-lf meta-embedded-block-c">=}</span>
<span class="source-lf">}</span>
</pre>
<blockquote>
<p><code>lf_schedule_value(&#x3C;action>, &#x3C;offset>, &#x3C;value>, &#x3C;length>);</code></p>
</blockquote>
<p>This version is used to send into the future a value that has been dynamically allocated malloc. It will be automatically freed when it is no longer needed. The <em>value</em> argument is a pointer to the memory containing the value. The <em>length</em> argument should be 1 if it is a not an array and the array length otherwise. This length will be needed downstream to interpret the data correctly. See <a href="https://github.com/lf-lang/lingua-franca/blob/master/test/C/src/ScheduleValue.lf">ScheduleValue.lf</a>.</p>
<blockquote>
<p><code>lf_schedule_copy(&#x3C;action>, &#x3C;offset>, &#x3C;value>, &#x3C;length>);</code></p>
</blockquote>
<p>This version is for sending a copy of some data pointed to by the <code>&#x3C;value></code> argument. The data is assumed to be a scalar or array of type matching the <code>&#x3C;action></code> type. The <code>&#x3C;length></code> argument should be 1 if it is a not an array and the array length otherwise. This length will be needed downstream to interpret the data correctly.</p>
<p>Occasionally, an action payload may not be dynamically allocated nor freed. For example, it could be a pointer to a statically allocated string. If you know this to be the case, the <a href="https://github.com/lf-lang/lingua-franca/blob/master/test/C/src/DelayString.lf">DelayString</a> reactor will realize a logical time delay on such a string:</p>
<pre class="source-lf language-lf-c"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">DelayString</span><span class="source-lf">(delay:</span><span class="source-lf storage-type-lflang">time</span><span class="source-lf">(</span><span class="source-lf constant-numeric-int-lflang">100</span><span class="source-lf"> </span><span class="source-lf constant-numeric-lflang">msec</span><span class="source-lf">)) {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">input</span><span class="source-lf"> in:</span><span class="source-lf storage-type-lflang">string</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">output</span><span class="source-lf"> out:</span><span class="source-lf storage-type-lflang">string</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">logical</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">action</span><span class="source-lf"> a:</span><span class="source-lf storage-type-lflang">string</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(a) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> out </span><span class="source-lf meta-embedded-block-c">{=</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c entity-name-function-call-cpp">lf_set</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c">out</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c variable-other-object-access-cpp">a</span><span class="source-lf meta-embedded-block-c punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c variable-other-property-cpp">value</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">    </span><span class="source-lf meta-embedded-block-c">=}</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(in) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> a </span><span class="source-lf meta-embedded-block-c">{=</span>
<span class="source-lf meta-embedded-block-c comment-line-double-slash-cpp">        </span><span class="source-lf meta-embedded-block-c comment-line-double-slash-cpp punctuation-definition-comment-cpp">//</span><span class="source-lf meta-embedded-block-c comment-line-double-slash-cpp"> The following copies the char*, not the string.</span>
<span class="source-lf meta-embedded-block-c">        </span><span class="source-lf meta-embedded-block-c entity-name-function-call-cpp">lf_schedule_copy</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-lf meta-embedded-block-c">a</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c variable-other-object-access-cpp">self</span><span class="source-lf meta-embedded-block-c punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c variable-other-property-cpp">delay</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c keyword-operator-cpp">&amp;</span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-section-parens-begin-bracket-round-cpp">(</span><span class="source-lf meta-embedded-block-c meta-parens-cpp variable-other-object-access-cpp">in</span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-separator-pointer-access-cpp">-&gt;</span><span class="source-lf meta-embedded-block-c meta-parens-cpp variable-other-property-cpp">value</span><span class="source-lf meta-embedded-block-c meta-parens-cpp punctuation-section-parens-end-bracket-round-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-separator-delimiter-comma-cpp">,</span><span class="source-lf meta-embedded-block-c"> </span><span class="source-lf meta-embedded-block-c constant-numeric-decimal-cpp">1</span><span class="source-lf meta-embedded-block-c punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-lf meta-embedded-block-c punctuation-terminator-statement-cpp">;</span>
<span class="source-lf meta-embedded-block-c">    </span><span class="source-lf meta-embedded-block-c">=}</span>
<span class="source-lf">}</span>
</pre>
<p>The data type <code>string</code> is an alias for <code>char*</code>, but Lingua Franca does not know this, so it creates a token that contains a copy of the pointer to the string rather than a copy of the string itself.</p>
</div>
<div class="lf-cpp">
<p><span class="warning">FIXME: Give a list of schedule() functions with descriptions.</span></p>
</div>
<div class="lf-py">
<p>The Python reactor target provides a <code>.schedule()</code> method to trigger an action at a
future logical time. The <code>.schedule()</code> method also optionally allows for a value
to be sent into the future. For example, take the
<a href="https://github.com/lf-lang/lingua-franca/blob/master/test/Python/src/ScheduleValue.lf">ScheduleValue.lf</a>:</p>
<pre class="source-lf language-lf-py"><span class="source-lf storage-modifier-lflang">main</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">ScheduleValue</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">logical</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">action</span><span class="source-lf"> a;</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(</span><span class="source-lf support-variable-lflang">startup</span><span class="source-lf">) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> a </span><span class="source-lf meta-embedded-block-py">{=</span>
<span class="source-lf meta-embedded-block-py">        </span><span class="source-lf meta-embedded-block-py">value</span><span class="source-lf meta-embedded-block-py"> </span><span class="source-lf meta-embedded-block-py keyword-operator-assignment-python">=</span><span class="source-lf meta-embedded-block-py"> </span><span class="source-lf meta-embedded-block-py string-quoted-single-python punctuation-definition-string-begin-python">&quot;</span><span class="source-lf meta-embedded-block-py string-quoted-single-python">Hello</span><span class="source-lf meta-embedded-block-py string-quoted-single-python punctuation-definition-string-end-python">&quot;</span>
<span class="source-lf meta-embedded-block-py">        </span><span class="source-lf meta-embedded-block-py">a</span><span class="source-lf meta-embedded-block-py meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-generic-python">schedule</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python punctuation-definition-arguments-begin-python">(</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python constant-numeric-dec-python">0</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python punctuation-separator-arguments-python">,</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python"> </span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python">value</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python punctuation-definition-arguments-end-python">)</span>
<span class="source-lf meta-embedded-block-py">    </span><span class="source-lf meta-embedded-block-py">=}</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(a) </span><span class="source-lf meta-embedded-block-py">{=</span>
<span class="source-lf meta-embedded-block-py">        </span><span class="source-lf meta-embedded-block-py meta-function-call-python support-function-builtin-python">print</span><span class="source-lf meta-embedded-block-py meta-function-call-python punctuation-definition-arguments-begin-python">(</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python string-quoted-single-python punctuation-definition-string-begin-python">&quot;</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python string-quoted-single-python">Received: </span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python string-quoted-single-python punctuation-definition-string-end-python">&quot;</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python punctuation-separator-arguments-python">,</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python"> </span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python">a</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python meta-member-access-python meta-attribute-python">value</span><span class="source-lf meta-embedded-block-py meta-function-call-python punctuation-definition-arguments-end-python">)</span>
<span class="source-lf meta-embedded-block-py">        </span><span class="source-lf meta-embedded-block-py keyword-control-flow-python">if</span><span class="source-lf meta-embedded-block-py"> </span><span class="source-lf meta-embedded-block-py">a</span><span class="source-lf meta-embedded-block-py meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-attribute-python">value</span><span class="source-lf meta-embedded-block-py"> </span><span class="source-lf meta-embedded-block-py keyword-operator-comparison-python">!=</span><span class="source-lf meta-embedded-block-py"> </span><span class="source-lf meta-embedded-block-py string-quoted-single-python punctuation-definition-string-begin-python">&quot;</span><span class="source-lf meta-embedded-block-py string-quoted-single-python">Hello</span><span class="source-lf meta-embedded-block-py string-quoted-single-python punctuation-definition-string-end-python">&quot;</span><span class="source-lf meta-embedded-block-py punctuation-separator-colon-python">:</span>
<span class="source-lf meta-embedded-block-py">            </span><span class="source-lf meta-embedded-block-py">sys</span><span class="source-lf meta-embedded-block-py meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-attribute-python">stderr</span><span class="source-lf meta-embedded-block-py meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-generic-python">write</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python punctuation-definition-arguments-begin-python">(</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python string-quoted-single-python punctuation-definition-string-begin-python">&quot;</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python string-quoted-single-python">FAILURE: Should have received &#039;Hello&#039;</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python string-quoted-single-python constant-character-escape-python">\n</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-arguments-python string-quoted-single-python punctuation-definition-string-end-python">&quot;</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python punctuation-definition-arguments-end-python">)</span>
<span class="source-lf meta-embedded-block-py">            </span><span class="source-lf meta-embedded-block-py meta-function-call-python support-function-builtin-python">exit</span><span class="source-lf meta-embedded-block-py meta-function-call-python punctuation-definition-arguments-begin-python">(</span><span class="source-lf meta-embedded-block-py meta-function-call-python meta-function-call-arguments-python constant-numeric-dec-python">1</span><span class="source-lf meta-embedded-block-py meta-function-call-python punctuation-definition-arguments-end-python">)</span>
<span class="source-lf meta-embedded-block-py">    </span><span class="source-lf meta-embedded-block-py">=}</span>
<span class="source-lf">}</span>
</pre>
<p>In this example, the logical action <code>a</code> is scheduled one
<a href="/docs/handbook/superdense-time">microstep</a> in the future with a string <code>value</code>
containing <code>"Hello"</code>.</p>
</div>
<div class="lf-ts">
<p><span class="warning">FIXME: List them here</span></p>
</div>
<div class="lf-rs">
<p>Within a reaction, actions may be scheduled using the <a href="https://lf-lang.github.io/reactor-rust/reactor_rt/struct.ReactionCtx.html#method.schedule"><code>schedule</code></a> function:</p>
<pre class="source-lf language-rust"><span class="source-rust comment-line-double-slash-rust">//</span><span class="source-rust comment-line-double-slash-rust"> schedule without additional delay</span>
<span class="source-rust">ctx.</span><span class="source-rust entity-name-function-rust">schedule</span><span class="source-rust">(</span><span class="source-rust">act, Asap);</span>
<span class="source-rust comment-line-double-slash-rust">//</span><span class="source-rust comment-line-double-slash-rust"> schedule with an additional delay</span>
<span class="source-rust">ctx.</span><span class="source-rust entity-name-function-rust">schedule</span><span class="source-rust">(</span><span class="source-rust">act, </span><span class="source-rust entity-name-function-macro-rust">after!</span><span class="source-rust">(</span><span class="source-rust constant-numeric-integer-decimal-rust">20</span><span class="source-rust"> ms));</span>
<span class="source-rust comment-line-double-slash-rust">//</span><span class="source-rust comment-line-double-slash-rust"> that&#039;s shorthand for</span>
<span class="source-rust">ctx.</span><span class="source-rust entity-name-function-rust">schedule</span><span class="source-rust">(</span><span class="source-rust">act, </span><span class="source-rust entity-name-function-rust">After</span><span class="source-rust">(</span><span class="source-rust">Duration.</span><span class="source-rust entity-name-function-rust">of_millis</span><span class="source-rust">(</span><span class="source-rust constant-numeric-integer-decimal-rust">20</span><span class="source-rust">)));</span>
</pre>
</div>
<h2 id="stopping-execution" style="position:relative;"><a href="#stopping-execution" aria-label="stopping execution permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Stopping Execution</h2>
<div class="lf-c">
<p>A reaction may request that the execution stop after all events with the current timestamp have been processed by calling the built-in method <code>request_stop()</code>, which takes no arguments. In a non-federated execution, the actual last tag of the program will be one microstep later than the tag at which <code>request_stop()</code> was called. For example, if the current tag is <code>(2 seconds, 0)</code>, the last (stop) tag will be <code>(2 seconds, 1)</code>. In a federated execution, however, the stop time will likely be larger than the current logical time. All federates are assured of stopping at the same logical time.</p>
<blockquote>
<p>The <a href="/docs/handbook/termination#timeout">timeout</a> target property will take precedence over this function. For example, if a program has a timeout of <code>2 seconds</code> and <code>request_stop()</code> is called at the <code>(2 seconds, 0)</code> tag, the last tag will still be <code>(2 seconds, 0)</code>.</p>
</blockquote>
</div>
<div class="lf-py">
<p>A reaction may request that the execution stop after all events with the current timestamp have been processed by calling the built-in method <code>lf.request_stop()</code>, which takes no arguments. In a non-federated execution, the actual last tag of the program will be one microstep later than the tag at which <code>lf.request_stop()</code> was called. For example, if the current tag is <code>(2 seconds, 0)</code>, the last (stop) tag will be <code>(2 seconds, 1)</code>. In a federated execution, however, the stop time will likely be larger than the current logical time. All federates are assured of stopping at the same logical time.</p>
<blockquote>
<p>The <a href="/docs/handbook/termination#timeout">timeout</a> target property will take precedence over this function. For example, if a program has a timeout of <code>2 seconds</code> and <code>request_stop()</code> is called at the <code>(2 seconds, 0)</code> tag, the last tag will still be <code>(2 seconds, 0)</code>.</p>
</blockquote>
</div>
<div class="lf-cpp">
<p>A reaction may request that the execution stops after all events with the current timestamp have been processed by calling <code>environment()->sync_shutdown()</code>. There is also a method <code>environment()->async_shutdown()</code>
which may be invoked from outside an reaction, like an external thread.</p>
</div>
<div class="lf-ts">
<p>A reaction may request that the execution stop by calling the function <code>util.requestShutdown()</code> which takes no arguments. Execution will not stop immediately when this function is called; all events with the current tag will finish processing and execution will continue for one more microstep to give shutdown triggers a chance to execute. After this additional step, execution will terminate.</p>
</div>
<div class="lf-rs">
<p><span class="warning">FIXME: Details needed here.</span></p>
</div>
<h2 id="log-and-debug-information" style="position:relative;"><a href="#log-and-debug-information" aria-label="log and debug information permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Log and Debug Information</h2>
<div class="lf-c">
<p>A suite of useful functions is provided in <a href="https://github.com/lf-lang/reactor-c/blob/main/core/utils/util.h">util.h</a> for producing messages to be made visible when the generated program is run. Of course, you can always use <code>printf</code>, but this is not a good choice for logging or debug information, and it is not a good choice when output needs to be redirected to a window or some other user interface (see for example the <a href="https://github.com/lf-lang/reactor-c/blob/main/util/sensor_simulator.h">sensor simulator</a>). Also, in federated execution, these functions identify which federate is producing the message. The functions are listed below. The arguments for all of these are identical to <code>printf</code> with the exception that a trailing newline is automatically added and therefore need not be included in the format string.</p>
<ul>
<li>
<p><code>LF_PRINT_DEBUG(format, ...)</code>: Use this for verbose messages that are only needed during debugging. Nothing is printed unless the <a href="/docs/handbook/target-declaration#logging">target</a> parameter <code>logging</code> is set to <code>debug</code>. THe overhead is minimized when nothing is to be printed.</p>
</li>
<li>
<p><code>LF_PRINT_LOG(format, ...)</code>: Use this for messages that are useful logs of the execution. Nothing is printed unless the <a href="/docs/handbook/target-declaration#logging">target parameter <code>logging</code></a> is set to <code>log</code> or <code>debug</code>. This is a macro so that overhead is minimized when nothing is to be printed.</p>
</li>
<li>
<p><code>lf_print(format, ...)</code>: Use this for messages that should normally be printed but may need to be redirected to a user interface such as a window or terminal (see <code>register_print_function</code> below). These messages can be suppressed by setting the <a href="/docs/handbook/target-declaration#logging">logging target property</a> to <code>warn</code> or <code>error</code>.</p>
</li>
<li>
<p><code>lf_print_warning(format, ...)</code>: Use this for warning messages. These messages can be suppressed by setting the <a href="/docs/handbook/target-declaration#logging">logging target property</a> to <code>error</code>.</p>
</li>
<li>
<p><code>lf_print_error(format, ...)</code>: Use this for error messages. These messages are not suppressed by any <a href="/docs/handbook/target-declaration#logging">logging target property</a>.</p>
</li>
<li>
<p><code>lf_print_error_and_exit(format, ...)</code>: Use this for catastrophic errors.</p>
</li>
</ul>
<p>In addition, a utility function is provided to register a function to redirect printed outputs:</p>
<ul>
<li><code>lf_register_print_function(function)</code>: Register a function that will be used instead of <code>printf</code> to print messages generated by any of the above functions. The function should accept the same arguments as <code>printf</code>.</li>
</ul>
</div>
<div class="lf-cpp">
<p>The reactor-cpp library provides logging utilities in <a href="https://github.com/tud-ccc/reactor-cpp/blob/master/include/reactor-cpp/logging.hh">logging.hh</a> for producing messages to be made visible when the generated program is run. Of course <code>std::cout</code> or <code>printf</code> can be used for the same purpose, but the logging mechanism provided by reactor-cpp is thread-safe ensuring that messages produced in parallel reactions are not interleaved with each other and provides common way for turning messages of a certain severity on and off.</p>
<p>In particular, reactor-cpp provides the following logging interfaces:</p>
<ul>
<li><code>reactor::Debug()</code>: for verbose debug messages</li>
<li><code>reactor::Info()</code>: for info messages of general interest, info is the default severity level</li>
<li><code>reactor::Warning()</code>: for warning messages</li>
<li><code>reactor::Error()</code>: for errors</li>
</ul>
<p>These utilities can be used analogues to <code>std::cout</code>. For instance:</p>
<pre class="source-lf language-cpp"><span class="source-cpp entity-name-scope-resolution-function-call-cpp">reactor</span><span class="source-cpp punctuation-separator-namespace-access-cpp punctuation-separator-scope-resolution-function-call-cpp">::</span><span class="source-cpp entity-name-function-call-cpp">Info</span><span class="source-cpp punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-cpp punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-cpp"> </span><span class="source-cpp keyword-operator-bitwise-shift-cpp">&lt;&lt;</span><span class="source-cpp"> </span><span class="source-cpp string-quoted-double-cpp punctuation-definition-string-begin-cpp">&quot;</span><span class="source-cpp string-quoted-double-cpp">Hello World! It is </span><span class="source-cpp string-quoted-double-cpp punctuation-definition-string-end-cpp">&quot;</span><span class="source-cpp"> </span><span class="source-cpp keyword-operator-bitwise-shift-cpp">&lt;&lt;</span><span class="source-cpp"> </span><span class="source-cpp entity-name-function-call-cpp">get_physical_time</span><span class="source-cpp punctuation-section-arguments-begin-bracket-round-function-call-cpp">(</span><span class="source-cpp punctuation-section-arguments-end-bracket-round-function-call-cpp">)</span><span class="source-cpp punctuation-terminator-statement-cpp">;</span>
</pre>
<p>Note that unlike <code>std::cout</code> the new line delimiter is automatically added to the end of the message.</p>
<p>Which type of messages are actually produced by the compiled program can be controlled with the <code>log-level</code> target property.</p>
</div>
<div class="lf-py">
<p>The Python supports the <a href="/docs/handbook/target-declaration#logging">logging</a> target specification. This will cause the runtime to produce more or less information about the execution. However, user-facing functions for different logging levels are not yet implemented (see issue <a href="https://github.com/lf-lang/lingua-franca/issues/619">#619</a>).</p>
</div>
<div class="lf-ts">
<p><span class="warning">FIXME: Details needed here.</span></p>
</div>
<div class="lf-rs">
<p>The executable reacts to the environment variable <code>RUST_LOG</code>, which sets the logging level of the application. Possible values are
<code>off</code>, <code>error</code>, <code>warn</code>, <code>info</code>, <code>debug</code>, <code>trace</code></p>
<p>Error and warning logs are on by default. Enabling a level enables all greater levels (i.e., <code>RUST_LOG=info</code> also enables <code>warn</code> and <code>error</code>, but not <code>trace</code> or <code>debug</code>).</p>
<p>Logging can also be turned on with the <code>--log-level</code> CLI option, if the application features a <a href="/docs/handbook/target-declaration#command-line-arguments">CLI</a>.</p>
<p>Note that the <code>logging</code> target property is ignored, as its levels do not match the Rust standard levels we use (those of the <a href="https://docs.rs/log/"><code>log</code> crate</a>).</p>
<p>Note that when building with a release profile (i.e., target property <code>build-type</code> is not <code>Debug</code>), all log statements with level <code>debug</code> and <code>trace</code> are removed from the executable, and cannot be turned on at runtime. A warning is produced by the executable if you try to use these levels explicitly.</p>
</div>
<div class="lf-c lf-py">
<h2 id="scheduler-target-property" style="position:relative;"><a href="#scheduler-target-property" aria-label="scheduler target property permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Scheduler Target Property</h2>
<p>The <code>scheduler</code> target property is used to select the scheduler used by the C runtime. This scheduler determines the exact order in which reactions are processed, as long as the order complies with the deterministic semantics of Lingua Franca. It also assigns reactions to user-level threads and can thereby influence the assignment of reactions to processors.</p>
<p>Because the C runtime scheduler operates at a higher level of abstraction than the OS, none of the scheduling policies that we currently support allow preemption; furthermore, they do not control migration of threads between processors.</p>
<p>Another limitation of these schedulers is that they are constrained to process the reaction graph breadth-first. We define the <em>level</em> of a reaction <em>r</em> to be the length of the longest chain of causally dependent reactions that are all (causally) upstream of <em>r</em>. Current LF schedulers process one level of reactions at a time, but this constraint is more restrictive than necessary to implement Lingua Franca’s semantics and is notable only for its effect on execution times.</p>
<p>The following schedulers are available:</p>
<ul>
<li><code>GEDF_NP</code> (global earliest-deadline-first): This scheduler is the default scheduler for programs that have deadlines. When the semantics of Lingua Franca allows for concurrent execution of two or more ready reactions with the same level at a particular tag, this scheduler will prioritize the reaction with the earliest deadline to run first (but with the limitation that reaction executions are non-preemptive). Reactions with no explicit deadline implicitly have an infinitely late deadline.</li>
<li><code>NP</code> (non-preemptive): This scheduler is the default scheduler for programs that have no deadlines. It makes minimal guarantees about its behavior, and this allows it to include optimizations that can result in lower execution times than the GEDF_NP scheduler.</li>
<li><code>adaptive</code>: This scheduler behaves similarly to the <code>NP</code> scheduler, with the additional limitation that it is designed for applications that can tolerate potentially wide variability in physical execution times. It performs experiments and measures execution times at runtime to determine the degree of exploitable parallelism in various parts of the program. This lets it automate judgments which are made more naively by the other schedulers and which are typically made by the programmer in general-purpose languages.</li>
<li><code>GEDF_NP_CI</code> (global earliest-deadline-first, with chain ID): This scheduler implements the same policy as <code>GEDF_NP</code>, but it is designed for an optimization called chain ID that is described on page 92 <a href="https://www2.eecs.berkeley.edu/Pubs/TechRpts/2020/EECS-2020-235.pdf">here</a>. This optimization is currently disabled because it is not yet fully developed, so we advise against the use of this scheduler in practical applications.</li>
</ul>
</div>
<h2 id="target-implementation-details" style="position:relative;"><a href="#target-implementation-details" aria-label="target implementation details permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Target Implementation Details</h2>
<div class="lf-c">
<h3 id="included-libraries" style="position:relative;"><a href="#included-libraries" aria-label="included libraries permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Included Libraries</h3>
<p>The generated code includes the following standard C libraries, so there is no need for a reactor definition to explicitly include them if they are needed:</p>
<ul>
<li>stdio.h</li>
<li>stdlib.h</li>
<li>string.h</li>
<li>time.h</li>
<li>errno.h</li>
</ul>
<p>In addition, the multithreaded implementation uses</p>
<ul>
<li>pthread.h</li>
</ul>
<h3 id="single-threaded-implementation" style="position:relative;"><a href="#single-threaded-implementation" aria-label="single threaded implementation permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Single Threaded Implementation</h3>
<p>The runtime library for the single-threaded implementation is in the following files:</p>
<ul>
<li>reactor.c</li>
<li>reactor_common.c (included in the above using #include)</li>
<li>pqueue.c</li>
</ul>
<p>Three header files provide the interfaces:</p>
<ul>
<li>reactor.h</li>
<li>ctarget.h</li>
<li>pqueue.h</li>
</ul>
<p>The strategy is to have two queues of pending accessor invocations, one that is sorted by timestamp (the <strong>event queue</strong>) and one that is sorted by priority (the <strong>reaction queue</strong>). Execution proceeds as follows:</p>
<ol>
<li>
<p>At initialization, an event for each timer is put on the event queue and logical time is initialized to the current time, represented as the number of nanoseconds elapsed since January 1, 1970.</p>
</li>
<li>
<p>At each logical time, pull all events from event queue that have the same earliest time stamp, find the reactions that these events trigger, and put them on the reaction queue. If there are no events on the event queue, then exit the program (unless the <code>--keepalive true</code> command-line argument is given).</p>
</li>
<li>
<p>Wait until physical time matches or exceeds that earliest timestamp (unless the <code>--fast true</code> command-line argument is given). Then advance logical time to match that earliest timestamp.</p>
</li>
<li>
<p>Execute reactions in order of priority from the reaction queue. These reactions may produce outputs, which results in more events getting put on the reaction queue. Those reactions are assured of having lower priority than the reaction that is executing. If a reaction calls <code>lf_schedule()</code>, an event will be put on the event queue, not the reaction queue.</p>
</li>
<li>
<p>When the reaction queue is empty, go to 2.</p>
</li>
</ol>
<h3 id="multithreaded-implementation" style="position:relative;"><a href="#multithreaded-implementation" aria-label="multithreaded implementation permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Multithreaded Implementation</h3>
<p>The runtime library for the multithreaded implementation is in the following files:</p>
<ul>
<li>reactor_threaded.c</li>
<li>reactor_common.c (included in the above using #include)</li>
<li>pqueue.c</li>
</ul>
<p>The same two header files provide the interfaces:</p>
<ul>
<li>reactor.h</li>
<li>pqueue.h</li>
</ul>
<p>The default number of worker threads is given by the <code>workers</code> argument in the <a href="/docs/handbook/target-declaration#threading">target</a> statement.
This can be overridden with the <code>--workers</code> <a href="#command-line-arguments">command-line argument</a>.
By default, the number of workers will match the number of cores on the execution platform.</p>
<p>Upon initialization, the main thread will create the specified number of worker threads.
A good choice is for this number to match the number of available cores.
Execution proceeds in a manner similar to the <a href="#single-threaded-implementation">single threaded implementation</a>
except that the worker threads concurrently draw reactions from the reaction queue.
The execution algorithm ensures that no reaction executes until all reactions that it depends on that are also
on the reaction queue have executed at the current logical time.</p>
</div>
<div class="lf-cpp">
<p>Unlike the C target, the Cpp target implements more of the analysis and setup of a Lingua Franca in the runtime system. The runtime system is define in the <a href="https://github.com/lf-lang/reactor-cpp">reactor-cpp</a> repository on GitHub. See that repo for details.</p>
</div>
<div class="lf-py">
<p>The Python target is built on top of the C runtime to enable maximum efficiency where possible. It uses the single-threaded C runtime by default but will switch to the multi-threaded C runtime if a physical action is detected. The <a href="/docs/handbook/target-declaration#threading">threading</a> target property can be used to override this behavior.</p>
<p>Running <a href="/docs/handbook/command-line-tools">lfc</a> on a <code>XXX.lf</code> program that uses the Python target specification on a
Linux machine will create the following files (other operating systems will have
a slightly different structure and/or files):</p>
<pre class="source-lf language-shell"><span class="source-shell">├── src</span>
<span class="source-shell">│   └── XXX.lf</span>
<span class="source-shell">└── src-gen</span>
<span class="source-shell">    └── XXX</span>
<span class="source-shell punctuation-whitespace-comment-leading-shell">        </span><span class="source-shell comment-line-number-sign-shell punctuation-definition-comment-shell">#</span><span class="source-shell comment-line-number-sign-shell">##### Files related to the Python C extension module for XXX ######</span>
<span class="source-shell">        ├── build               </span><span class="source-shell comment-line-number-sign-shell punctuation-definition-comment-shell">#</span><span class="source-shell comment-line-number-sign-shell"> Temporary files for setuptools</span>
<span class="source-shell">        ├── core                </span><span class="source-shell comment-line-number-sign-shell punctuation-definition-comment-shell">#</span><span class="source-shell comment-line-number-sign-shell"> Core C runtime files</span>
<span class="source-shell">        ├── ctarget.c           </span><span class="source-shell comment-line-number-sign-shell punctuation-definition-comment-shell">#</span><span class="source-shell comment-line-number-sign-shell"> C target API implementations</span>
<span class="source-shell">        ├── ctarget.h           </span><span class="source-shell comment-line-number-sign-shell punctuation-definition-comment-shell">#</span><span class="source-shell comment-line-number-sign-shell"> C target API definitions</span>
<span class="source-shell">        ├── LinguaFrancaXXX</span><span class="source-shell keyword-operator-glob-shell">*</span><span class="source-shell">.so </span><span class="source-shell comment-line-number-sign-shell punctuation-definition-comment-shell">#</span><span class="source-shell comment-line-number-sign-shell"> The Python C extension module for XXX</span>
<span class="source-shell">        ├── pythontarget.c      </span><span class="source-shell comment-line-number-sign-shell punctuation-definition-comment-shell">#</span><span class="source-shell comment-line-number-sign-shell"> Python target API implementations</span>
<span class="source-shell">        ├── pythontarget.h      </span><span class="source-shell comment-line-number-sign-shell punctuation-definition-comment-shell">#</span><span class="source-shell comment-line-number-sign-shell"> Python target API definitions</span>
<span class="source-shell">        ├── setup.py            </span><span class="source-shell comment-line-number-sign-shell punctuation-definition-comment-shell">#</span><span class="source-shell comment-line-number-sign-shell"> Setup file used to build the Python C extension</span>
<span class="source-shell">        ├── XXX.c               </span><span class="source-shell comment-line-number-sign-shell punctuation-definition-comment-shell">#</span><span class="source-shell comment-line-number-sign-shell"> Source code of the Python C extension</span>
<span class="source-shell punctuation-whitespace-comment-leading-shell">        </span><span class="source-shell comment-line-number-sign-shell punctuation-definition-comment-shell">#</span><span class="source-shell comment-line-number-sign-shell">##### Files containing the Python code ######</span>
<span class="source-shell">        └── XXX.py              </span><span class="source-shell comment-line-number-sign-shell punctuation-definition-comment-shell">#</span><span class="source-shell comment-line-number-sign-shell"> Python file containing reactors and reaction code</span>
</pre>
<p>There are two major components in the <code>src-gen/XXX</code> directory that together enable the execution of a Python target application:</p>
<ul>
<li>An <a href="#the-xxxpy-file-containing-user-code">XXX.py</a> file containing the user code (e.g., reactor definitions and reactions).</li>
<li>The source code for a <a href="#the-generated-linguafrancaxxx-python-module-a-c-extension-module">Python C extension module</a> called <code>LinguaFrancaXXX</code> containing the C runtime, as well as hooks to execute the user-defined reactions.</li>
</ul>
<p>The interactions between the <code>src-gen/XXX/XXX.py</code> file and the <code>LinguaFrancaXXX</code> module are explained <a href="#interactions-between-xxxpy-and-linguafrancaxxx">below</a>.</p>
<h3 id="the-xxxpy-file-containing-user-code" style="position:relative;"><a href="#the-xxxpy-file-containing-user-code" aria-label="the xxxpy file containing user code permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The <code>XXX.py</code> file containing user code</h3>
<p>The <code>XXX.py</code> file contains all the reactor definitions in the form of Python classes. The contents of a reactor are converted as follows:</p>
<ul>
<li>Each <strong>Reaction</strong> in a reactor definition will be converted to a class method.</li>
<li>Each <strong>Parameter</strong> will be converted to a class <a href="https://docs.python.org/3/library/functions.html?highlight=property#property">property</a> to make it read-only.</li>
<li>Each <strong>State</strong> variable will be converted to an <a href="https://docs.python.org/3/tutorial/classes.html#class-and-instance-variables">instance variable</a>.</li>
<li>Each trigger and effect will be converted to an object passed as a method function argument to reaction methods, allowing the body of the reaction to access them.</li>
<li>Each reactor <strong>Preamble</strong> will be put in the class definition verbatim.</li>
</ul>
<p>Finally, each reactor class instantiation will be converted to a Python object class instantiation.</p>
<p>For example, imagine the following program:</p>
<pre class="source-lf language-lf-py"><span class="source-lf comment-line-double-dash-lflang"># src/XXX.lf</span>
<span class="source-lf meta-targetspec-lflang keyword-control-lflang">target</span><span class="source-lf meta-targetspec-lflang"> </span><span class="source-lf meta-targetspec-lflang constant-language-lflang">Python</span><span class="source-lf meta-targetspec-lflang">;</span>
<span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Foo</span><span class="source-lf">(bar(</span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">)) {</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">preamble</span><span class="source-lf"> </span><span class="source-lf meta-embedded-block-py">{=</span>
<span class="source-lf meta-embedded-block-py">        </span><span class="source-lf meta-embedded-block-py keyword-control-import-python">import</span><span class="source-lf meta-embedded-block-py"> </span><span class="source-lf meta-embedded-block-py">random</span>
<span class="source-lf meta-embedded-block-py">    </span><span class="source-lf meta-embedded-block-py">=}</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">state</span><span class="source-lf"> baz</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">input</span><span class="source-lf"> _in</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">logical</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">action</span><span class="source-lf"> act</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(_in, act) </span><span class="source-lf meta-embedded-block-py">{=</span>
<span class="source-lf meta-embedded-block-py">        </span><span class="source-lf meta-embedded-block-py comment-line-number-sign-python punctuation-definition-comment-python">#</span><span class="source-lf meta-embedded-block-py comment-line-number-sign-python"> Body of the reaction</span>
<span class="source-lf meta-embedded-block-py">        </span><span class="source-lf meta-embedded-block-py variable-language-special-self-python">self</span><span class="source-lf meta-embedded-block-py meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-attribute-python">random</span><span class="source-lf meta-embedded-block-py meta-member-access-python punctuation-separator-period-python">.</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python meta-function-call-generic-python">seed</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python punctuation-definition-arguments-begin-python">(</span><span class="source-lf meta-embedded-block-py meta-member-access-python meta-function-call-python punctuation-definition-arguments-end-python">)</span><span class="source-lf meta-embedded-block-py"> </span><span class="source-lf meta-embedded-block-py comment-line-number-sign-python punctuation-definition-comment-python">#</span><span class="source-lf meta-embedded-block-py comment-line-number-sign-python"> Note the use of self</span>
<span class="source-lf meta-embedded-block-py">    </span><span class="source-lf meta-embedded-block-py">=}</span>
<span class="source-lf">}</span>
<span class="source-lf storage-modifier-lflang">main</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf variable-other-constant-reactorinstance-lflang">foo</span><span class="source-lf"> </span><span class="source-lf keyword-operator-lflang">=</span><span class="source-lf"> </span><span class="source-lf keyword-operator-new-lflang">new</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Foo</span><span class="source-lf">()</span>
<span class="source-lf">}</span>
</pre>
<p>Th reactor <code>Foo</code> and its instance, <code>foo</code>, will be converted to</p>
<pre class="source-lf language-python"><span class="source-python comment-line-number-sign-python punctuation-definition-comment-python">#</span><span class="source-python comment-line-number-sign-python"> src-gen/</span><span class="source-python comment-line-number-sign-python keyword-codetag-notation-python">XXX</span><span class="source-python comment-line-number-sign-python">/</span><span class="source-python comment-line-number-sign-python keyword-codetag-notation-python">XXX</span><span class="source-python comment-line-number-sign-python">.py</span>
<span class="source-python constant-other-ellipsis-python">...</span>
<span class="source-python comment-line-number-sign-python punctuation-definition-comment-python">#</span><span class="source-python comment-line-number-sign-python"> Python class for reactor Foo</span>
<span class="source-python meta-class-python storage-type-class-python">class</span><span class="source-python meta-class-python"> </span><span class="source-python meta-class-python entity-name-type-class-python">_Foo</span><span class="source-python meta-class-python punctuation-section-class-begin-python">:</span>
<span class="source-python"></span>
<span class="source-python">    </span><span class="source-python comment-line-number-sign-python punctuation-definition-comment-python">#</span><span class="source-python comment-line-number-sign-python"> From the preamble, verbatim:</span>
<span class="source-python">    </span><span class="source-python keyword-control-import-python">import</span><span class="source-python"> </span><span class="source-python">random</span>
<span class="source-python meta-function-python">    </span><span class="source-python meta-function-python storage-type-function-python">def</span><span class="source-python meta-function-python"> </span><span class="source-python meta-function-python support-function-magic-python">__init__</span><span class="source-python meta-function-python meta-function-parameters-python punctuation-definition-parameters-begin-python">(</span><span class="source-python meta-function-python meta-function-parameters-python variable-parameter-function-language-python variable-parameter-function-language-special-self-python">self</span><span class="source-python meta-function-python meta-function-parameters-python punctuation-separator-parameters-python">,</span><span class="source-python meta-function-python meta-function-parameters-python"> </span><span class="source-python meta-function-python meta-function-parameters-python keyword-operator-unpacking-parameter-python">**</span><span class="source-python meta-function-python meta-function-parameters-python variable-parameter-function-language-python">kwargs</span><span class="source-python meta-function-python meta-function-parameters-python punctuation-definition-parameters-end-python">)</span><span class="source-python meta-function-python punctuation-section-function-begin-python">:</span>
<span class="source-python">        </span><span class="source-python comment-line-number-sign-python punctuation-definition-comment-python">#</span><span class="source-python comment-line-number-sign-python">Define parameters and their default values</span>
<span class="source-python">        </span><span class="source-python variable-language-special-self-python">self</span><span class="source-python meta-member-access-python punctuation-separator-period-python">.</span><span class="source-python meta-member-access-python meta-attribute-python">_bar</span><span class="source-python"> </span><span class="source-python keyword-operator-assignment-python">=</span><span class="source-python"> </span><span class="source-python constant-numeric-dec-python">0</span>
<span class="source-python">        </span><span class="source-python comment-line-number-sign-python punctuation-definition-comment-python">#</span><span class="source-python comment-line-number-sign-python"> Handle parameters that are set in instantiation</span>
<span class="source-python">        </span><span class="source-python variable-language-special-self-python">self</span><span class="source-python meta-member-access-python punctuation-separator-period-python">.</span><span class="source-python meta-member-access-python support-variable-magic-python">__dict__</span><span class="source-python meta-member-access-python punctuation-separator-period-python">.</span><span class="source-python meta-member-access-python meta-function-call-python meta-function-call-generic-python">update</span><span class="source-python meta-member-access-python meta-function-call-python punctuation-definition-arguments-begin-python">(</span><span class="source-python meta-member-access-python meta-function-call-python meta-function-call-arguments-python">kwargs</span><span class="source-python meta-member-access-python meta-function-call-python punctuation-definition-arguments-end-python">)</span>
<span class="source-python"></span>
<span class="source-python">        </span><span class="source-python comment-line-number-sign-python punctuation-definition-comment-python">#</span><span class="source-python comment-line-number-sign-python"> Define state variables</span>
<span class="source-python">        </span><span class="source-python variable-language-special-self-python">self</span><span class="source-python meta-member-access-python punctuation-separator-period-python">.</span><span class="source-python meta-member-access-python meta-attribute-python">baz</span><span class="source-python"> </span><span class="source-python keyword-operator-assignment-python">=</span><span class="source-python"> </span><span class="source-python constant-language-python">None</span>
<span class="source-python"></span>
<span class="source-python meta-function-decorator-python">    </span><span class="source-python meta-function-decorator-python entity-name-function-decorator-python punctuation-definition-decorator-python">@</span><span class="source-python meta-function-decorator-python support-type-python">property</span>
<span class="source-python meta-function-python">    </span><span class="source-python meta-function-python storage-type-function-python">def</span><span class="source-python meta-function-python"> </span><span class="source-python meta-function-python entity-name-function-python">bar</span><span class="source-python meta-function-python meta-function-parameters-python punctuation-definition-parameters-begin-python">(</span><span class="source-python meta-function-python meta-function-parameters-python variable-parameter-function-language-python variable-parameter-function-language-special-self-python">self</span><span class="source-python meta-function-python meta-function-parameters-python punctuation-definition-parameters-end-python">)</span><span class="source-python meta-function-python punctuation-section-function-begin-python">:</span>
<span class="source-python">        </span><span class="source-python keyword-control-flow-python">return</span><span class="source-python"> </span><span class="source-python variable-language-special-self-python">self</span><span class="source-python meta-member-access-python punctuation-separator-period-python">.</span><span class="source-python meta-member-access-python meta-attribute-python">_bar</span>
<span class="source-python"></span>
<span class="source-python meta-function-python">    </span><span class="source-python meta-function-python storage-type-function-python">def</span><span class="source-python meta-function-python"> </span><span class="source-python meta-function-python entity-name-function-python">reaction_function_0</span><span class="source-python meta-function-python meta-function-parameters-python punctuation-definition-parameters-begin-python">(</span><span class="source-python meta-function-python meta-function-parameters-python variable-parameter-function-language-python variable-parameter-function-language-special-self-python">self</span><span class="source-python meta-function-python meta-function-parameters-python"> </span><span class="source-python meta-function-python meta-function-parameters-python punctuation-separator-parameters-python">,</span><span class="source-python meta-function-python meta-function-parameters-python"> </span><span class="source-python meta-function-python meta-function-parameters-python variable-parameter-function-language-python">_in</span><span class="source-python meta-function-python meta-function-parameters-python punctuation-separator-parameters-python">,</span><span class="source-python meta-function-python meta-function-parameters-python"> </span><span class="source-python meta-function-python meta-function-parameters-python variable-parameter-function-language-python">act</span><span class="source-python meta-function-python meta-function-parameters-python punctuation-definition-parameters-end-python">)</span><span class="source-python meta-function-python punctuation-section-function-begin-python">:</span>
<span class="source-python">        </span><span class="source-python comment-line-number-sign-python punctuation-definition-comment-python">#</span><span class="source-python comment-line-number-sign-python"> Body of the reaction</span>
<span class="source-python">        </span><span class="source-python variable-language-special-self-python">self</span><span class="source-python meta-member-access-python punctuation-separator-period-python">.</span><span class="source-python meta-member-access-python meta-attribute-python">random</span><span class="source-python meta-member-access-python punctuation-separator-period-python">.</span><span class="source-python meta-member-access-python meta-function-call-python meta-function-call-generic-python">seed</span><span class="source-python meta-member-access-python meta-function-call-python punctuation-definition-arguments-begin-python">(</span><span class="source-python meta-member-access-python meta-function-call-python punctuation-definition-arguments-end-python">)</span><span class="source-python"> </span><span class="source-python comment-line-number-sign-python punctuation-definition-comment-python">#</span><span class="source-python comment-line-number-sign-python"> Note the use of self</span>
<span class="source-python">        </span><span class="source-python keyword-control-flow-python">return</span><span class="source-python"> </span><span class="source-python constant-numeric-dec-python">0</span>
<span class="source-python"></span>
<span class="source-python"></span>
<span class="source-python comment-line-number-sign-python punctuation-definition-comment-python">#</span><span class="source-python comment-line-number-sign-python"> Instantiate classes</span>
<span class="source-python">xxx_lf</span><span class="source-python"> </span><span class="source-python keyword-operator-assignment-python">=</span><span class="source-python"> </span><span class="source-python punctuation-definition-list-begin-python">[</span><span class="source-python constant-language-python">None</span><span class="source-python punctuation-definition-list-end-python">]</span><span class="source-python"> </span><span class="source-python keyword-operator-arithmetic-python">*</span><span class="source-python"> </span><span class="source-python constant-numeric-dec-python">1</span>
<span class="source-python">xxx_foo_lf</span><span class="source-python"> </span><span class="source-python keyword-operator-assignment-python">=</span><span class="source-python"> </span><span class="source-python punctuation-definition-list-begin-python">[</span><span class="source-python constant-language-python">None</span><span class="source-python punctuation-definition-list-end-python">]</span><span class="source-python"> </span><span class="source-python keyword-operator-arithmetic-python">*</span><span class="source-python"> </span><span class="source-python constant-numeric-dec-python">1</span>
<span class="source-python comment-line-number-sign-python punctuation-definition-comment-python">#</span><span class="source-python comment-line-number-sign-python"> Start initializing </span><span class="source-python comment-line-number-sign-python keyword-codetag-notation-python">XXX</span><span class="source-python comment-line-number-sign-python"> of class </span><span class="source-python comment-line-number-sign-python keyword-codetag-notation-python">XXX</span>
<span class="source-python keyword-control-flow-python">for</span><span class="source-python"> </span><span class="source-python">xxx_i</span><span class="source-python"> </span><span class="source-python keyword-control-flow-python">in</span><span class="source-python"> </span><span class="source-python meta-function-call-python support-function-builtin-python">range</span><span class="source-python meta-function-call-python punctuation-definition-arguments-begin-python">(</span><span class="source-python meta-function-call-python meta-function-call-arguments-python constant-numeric-dec-python">1</span><span class="source-python meta-function-call-python punctuation-definition-arguments-end-python">)</span><span class="source-python punctuation-separator-colon-python">:</span>
<span class="source-python">    </span><span class="source-python">bank_index</span><span class="source-python"> </span><span class="source-python keyword-operator-assignment-python">=</span><span class="source-python"> </span><span class="source-python">xxx_i</span>
<span class="source-python">    </span><span class="source-python meta-item-access-python meta-indexed-name-python">xxx_lf</span><span class="source-python meta-item-access-python punctuation-definition-arguments-begin-python">[</span><span class="source-python meta-item-access-python meta-item-access-arguments-python constant-numeric-dec-python">0</span><span class="source-python meta-item-access-python punctuation-definition-arguments-end-python">]</span><span class="source-python"> </span><span class="source-python keyword-operator-assignment-python">=</span><span class="source-python"> </span><span class="source-python meta-function-call-python meta-function-call-generic-python">_XXX</span><span class="source-python meta-function-call-python punctuation-definition-arguments-begin-python">(</span>
<span class="source-python meta-function-call-python meta-function-call-arguments-python">        </span><span class="source-python meta-function-call-python meta-function-call-arguments-python variable-parameter-function-call-python">_bank_index</span><span class="source-python meta-function-call-python meta-function-call-arguments-python"> </span><span class="source-python meta-function-call-python meta-function-call-arguments-python keyword-operator-assignment-python">=</span><span class="source-python meta-function-call-python meta-function-call-arguments-python"> </span><span class="source-python meta-function-call-python meta-function-call-arguments-python constant-numeric-dec-python">0</span><span class="source-python meta-function-call-python meta-function-call-arguments-python punctuation-separator-arguments-python">,</span>
<span class="source-python meta-function-call-python meta-function-call-arguments-python">    </span><span class="source-python meta-function-call-python punctuation-definition-arguments-end-python">)</span>
<span class="source-python">    </span><span class="source-python comment-line-number-sign-python punctuation-definition-comment-python">#</span><span class="source-python comment-line-number-sign-python"> Start initializing </span><span class="source-python comment-line-number-sign-python keyword-codetag-notation-python">XXX</span><span class="source-python comment-line-number-sign-python">.foo of class Foo</span>
<span class="source-python">    </span><span class="source-python keyword-control-flow-python">for</span><span class="source-python"> </span><span class="source-python">xxx_foo_i</span><span class="source-python"> </span><span class="source-python keyword-control-flow-python">in</span><span class="source-python"> </span><span class="source-python meta-function-call-python support-function-builtin-python">range</span><span class="source-python meta-function-call-python punctuation-definition-arguments-begin-python">(</span><span class="source-python meta-function-call-python meta-function-call-arguments-python constant-numeric-dec-python">1</span><span class="source-python meta-function-call-python punctuation-definition-arguments-end-python">)</span><span class="source-python punctuation-separator-colon-python">:</span>
<span class="source-python">        </span><span class="source-python">bank_index</span><span class="source-python"> </span><span class="source-python keyword-operator-assignment-python">=</span><span class="source-python"> </span><span class="source-python">xxx_foo_i</span>
<span class="source-python">        </span><span class="source-python meta-item-access-python meta-indexed-name-python">xxx_foo_lf</span><span class="source-python meta-item-access-python punctuation-definition-arguments-begin-python">[</span><span class="source-python meta-item-access-python meta-item-access-arguments-python constant-numeric-dec-python">0</span><span class="source-python meta-item-access-python punctuation-definition-arguments-end-python">]</span><span class="source-python"> </span><span class="source-python keyword-operator-assignment-python">=</span><span class="source-python"> </span><span class="source-python meta-function-call-python meta-function-call-generic-python">_Foo</span><span class="source-python meta-function-call-python punctuation-definition-arguments-begin-python">(</span>
<span class="source-python meta-function-call-python meta-function-call-arguments-python">            </span><span class="source-python meta-function-call-python meta-function-call-arguments-python variable-parameter-function-call-python">_bank_index</span><span class="source-python meta-function-call-python meta-function-call-arguments-python"> </span><span class="source-python meta-function-call-python meta-function-call-arguments-python keyword-operator-assignment-python">=</span><span class="source-python meta-function-call-python meta-function-call-arguments-python"> </span><span class="source-python meta-function-call-python meta-function-call-arguments-python constant-numeric-dec-python">0</span><span class="source-python meta-function-call-python meta-function-call-arguments-python punctuation-separator-arguments-python">,</span>
<span class="source-python meta-function-call-python meta-function-call-arguments-python">            </span><span class="source-python meta-function-call-python meta-function-call-arguments-python variable-parameter-function-call-python">_bar</span><span class="source-python meta-function-call-python meta-function-call-arguments-python keyword-operator-assignment-python">=</span><span class="source-python meta-function-call-python meta-function-call-arguments-python constant-numeric-dec-python">0</span><span class="source-python meta-function-call-python meta-function-call-arguments-python punctuation-separator-arguments-python">,</span>
<span class="source-python meta-function-call-python meta-function-call-arguments-python">        </span><span class="source-python meta-function-call-python punctuation-definition-arguments-end-python">)</span>
<span class="source-python constant-other-ellipsis-python">...</span>
</pre>
<h3 id="the-generated-linguafrancaxxx-python-module-a-c-extension-module" style="position:relative;"><a href="#the-generated-linguafrancaxxx-python-module-a-c-extension-module" aria-label="the generated linguafrancaxxx python module a c extension module permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The generated LinguaFrancaXXX Python module (a C extension module)</h3>
<p>The rest of the files in <code>src-gen/XXX</code> form a <a href="https://docs.python.org/3/extending/building.html#building-c-and-c-extensions">Python C extension
module</a>
called <code>LinguaFrancaXXX</code> that can be built by executing <code>python3 setup.py build_ext --inplace</code> in the <code>src-gen/XXX/</code> folder. In this case, Python will
read the instructions in the <code>src-gen/XXX/setup.py</code> file and build a
<code>LinguaFrancaXXX</code> module in <code>src-gen/XXX/</code>. The <code>--inplace</code> flag puts the
compiled extension (the <code>LinguaFrancaXXX*.so</code> in the example above) in the
<code>src-gen</code> directory alongside the <code>XXX.py</code> file.</p>
<p>As mentioned before, the LinguaFrancaXXX module is separate from
<code>src-gen/XXX/XXX.py</code> but interacts with it. Next, we explain this interaction.</p>
<h3 id="interactions-between-xxxpy-and-linguafrancaxxx" style="position:relative;"><a href="#interactions-between-xxxpy-and-linguafrancaxxx" aria-label="interactions between xxxpy and linguafrancaxxx permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Interactions between XXX.py and LinguaFrancaXXX</h3>
<p>The LinguaFrancaXXX module is imported in <code>src-gen/XXX/XXX.py</code>:</p>
<pre class="source-lf language-python"><span class="source-python keyword-control-import-python">from</span><span class="source-python"> </span><span class="source-python">LinguaFrancaXXX</span><span class="source-python"> </span><span class="source-python keyword-control-import-python">import</span><span class="source-python"> </span><span class="source-python keyword-operator-arithmetic-python">*</span>
</pre>
<p>This is done to enable the main function in <code>src-gen/XXX/XXX.py</code> to make a call to the <code>start()</code> function, which is part of the generated (and installed) <code>LinguaFrancaXXX</code> module. This function will start the main event handling loop of the C runtime.</p>
<p>From then on, <code>LinguaFrancaXXX</code> will call reactions that are defined in <code>src-gen/XXX/XXX.py</code> when needed.</p>
<h3 id="the-linguafrancabase-package" style="position:relative;"><a href="#the-linguafrancabase-package" aria-label="the linguafrancabase package permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The LinguaFrancaBase package</h3>
<p><a href="https://pypi.org/project/LinguaFrancaBase/">LinguaFrancaBase</a> is a package that contains several helper methods and definitions that are necessary for the Python target to work. This module is installable via <code>python3 -m pip install LinguaFrancaBase</code> but is automatically installed if needed during the installation of <code>LinguaFrancaXXX</code>. The source code of this package can be found <a href="https://github.com/lf-lang/reactor-c-py">on GitHub</a>.</p>
<p>This package’s modules are imported in the <code>XXX.py</code> program:</p>
<pre class="source-lf language-python"><span class="source-python keyword-control-import-python">from</span><span class="source-python"> </span><span class="source-python">LinguaFrancaBase</span><span class="source-python punctuation-separator-period-python">.</span><span class="source-python">constants</span><span class="source-python"> </span><span class="source-python keyword-control-import-python">import</span><span class="source-python"> </span><span class="source-python keyword-operator-arithmetic-python">*</span><span class="source-python"> </span><span class="source-python comment-line-number-sign-python punctuation-definition-comment-python">#</span><span class="source-python comment-line-number-sign-python">Useful constants</span>
<span class="source-python keyword-control-import-python">from</span><span class="source-python"> </span><span class="source-python">LinguaFrancaBase</span><span class="source-python punctuation-separator-period-python">.</span><span class="source-python">functions</span><span class="source-python"> </span><span class="source-python keyword-control-import-python">import</span><span class="source-python"> </span><span class="source-python keyword-operator-arithmetic-python">*</span><span class="source-python"> </span><span class="source-python comment-line-number-sign-python punctuation-definition-comment-python">#</span><span class="source-python comment-line-number-sign-python">Useful helper functions</span>
<span class="source-python keyword-control-import-python">from</span><span class="source-python"> </span><span class="source-python">LinguaFrancaBase</span><span class="source-python punctuation-separator-period-python">.</span><span class="source-python">classes</span><span class="source-python"> </span><span class="source-python keyword-control-import-python">import</span><span class="source-python"> </span><span class="source-python keyword-operator-arithmetic-python">*</span><span class="source-python"> </span><span class="source-python comment-line-number-sign-python punctuation-definition-comment-python">#</span><span class="source-python comment-line-number-sign-python">Useful classes</span>
</pre>
<h3 id="already-imported-python-modules" style="position:relative;"><a href="#already-imported-python-modules" aria-label="already imported python modules permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Already imported Python modules</h3>
<p>The following packages are already imported and thus do not need to be re-imported by the user:</p>
<pre class="source-lf language-python"><span class="source-python keyword-control-import-python">import</span><span class="source-python"> </span><span class="source-python">os</span>
<span class="source-python keyword-control-import-python">import</span><span class="source-python"> </span><span class="source-python">sys</span>
<span class="source-python keyword-control-import-python">import</span><span class="source-python"> </span><span class="source-python">copy</span>
</pre>
</div>
<div class="lf-ts">
<p>When a TypeScript reactor is compiled, the generated code is placed inside a project directory. This is because there are two steps of compilation. First, the Lingua Franca compiler generates a TypeScript project from the TypeScript reactor code. Second, the Lingua Franca compiler runs a TypeScript compiler on the generated TypeScript project to produce executable JavaScript. This is illustrated below:</p>
<pre class="source-lf language-lf-ts"><span class="source-lf">Lingua Franca (</span><span class="source-lf keyword-operator-lflang">.</span><span class="source-lf">lf) </span><span class="source-lf keyword-operator-lflang">=</span><span class="source-lf keyword-operator-lflang">=</span><span class="source-lf">&gt; TypeScript (</span><span class="source-lf keyword-operator-lflang">.</span><span class="source-lf">ts) </span><span class="source-lf keyword-operator-lflang">=</span><span class="source-lf keyword-operator-lflang">=</span><span class="source-lf">&gt; JavaScript (</span><span class="source-lf keyword-operator-lflang">.</span><span class="source-lf">js)</span>
</pre>
<p>Assuming the directory containing our Lingua Franca file <code>Foo.lf</code> is named <code>TS</code>, the compiler will generate the following:</p>
<ol>
<li>TS/package.json</li>
<li>TS/node_modules</li>
<li>TS/Foo/tsconfig.json</li>
<li>TS/Foo/babel.config.js</li>
<li>TS/Foo/src/</li>
<li>TS/Foo/dist/</li>
</ol>
<p>Items 1, 3, and 4 are configuration files for the generated project. Item 2 is a node_modules directory with contents specified by item 1. Item 5 is the directory for generated TypeScript code. Item 6 is the directory for compiled JavaScript code. In addition to the generated code for your Lingua Franca program, items 5 and 6 include libraries from the <a href="https://github.com/lf-lang/reactor-ts">reactor-ts</a> submodule.</p>
<p>The Lingua Franca compiler automatically invokes other programs as it compiles a Lingua Franca (.lf) file to a Node.js executable JavaScript (.js) file. The files package.json, babel.config.js, and tsconfig.json are used to configure the behavior of those other programs. Whenever you compile a .lf file for the first time, the Lingua Franca compiler will copy default versions of these configuration files into the new project so the other programs can run. <strong>The Lingua Franca compiler will only copy a default configuration file into a project if that file is not already present in the generated project.</strong> This means you, the reactor programmer, may safely modify these configuration files to control the finer points of compilation. Beware, other generated files in the project’s src and dist directories may be overwritten by the compiler.</p>
<h3 id="packagejson" style="position:relative;"><a href="#packagejson" aria-label="packagejson permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>package.json</h3>
<p>Node.js uses a <a href="https://nodejs.org/en/knowledge/getting-started/npm/what-is-the-file-package-json/">package.json</a> file to describe metadata relevant to a Node project. This includes a list of project dependencies (i.e. modules) used by the project. When the Lingua Franca compiler copies a default package.json file into a Lingua Franca project that doesn’t already have a package.json, the compiler runs the command <code>npm install</code> to create a node_modules directory. The default package.json only lists dependencies for the <a href="https://github.com/lf-lang/reactor-ts">reactor-ts</a> submodule. <a href="#using-node-modules">Follow these instructions</a> to modify package.json if you want to use other Node modules in your reactors.</p>
<h3 id="tsconfigjson" style="position:relative;"><a href="#tsconfigjson" aria-label="tsconfigjson permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>tsconfig.json</h3>
<p>After generating a TypeScript program from a .lf file, the Lingua Franca compiler uses the TypeScript compiler <code>tsc</code> to run a type check. The behavior of <code>tsc</code> is configured by the <a href="https://www.typescriptlang.org/docs/handbook/tsconfig-json.html">tsconfig.json</a> file. You probably won’t need to modify tsconfig.json, but you can if you know what you’re doing.</p>
<h3 id="babelconfigjs" style="position:relative;"><a href="#babelconfigjs" aria-label="babelconfigjs permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>babel.config.js</h3>
<p>If the <code>tsc</code> type check was successful, the Lingua Franca compiler uses <code>babel</code> to compile the generated TypeScript code into JavaScript. (This <a href="https://iamturns.com/typescript-babel/">blog post</a> articulates the advantages of using <code>babel</code> over <code>tsc</code> to generate JavaScript.) There are many different flavors of JavaScript and the <a href="https://babeljs.io/docs/en/configuration">babel.config.js</a> file specifies exactly what <code>babel</code> should generate. This is the file to edit if you want the Lingua Franca compiler to produce a different version of JavaScript as its final output.</p>
<h3 id="debugging-type-errors" style="position:relative;"><a href="#debugging-type-errors" aria-label="debugging type errors permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Debugging Type Errors</h3>
<p>Let’s take the <a href="#a-minimal-example">minimal reactor example</a>, and intentionally break it by adding a type error into the reaction.</p>
<pre class="source-lf language-lf-ts"><span class="source-lf meta-targetspec-lflang keyword-control-lflang">target</span><span class="source-lf meta-targetspec-lflang"> </span><span class="source-lf meta-targetspec-lflang constant-language-lflang">TypeScript</span><span class="source-lf meta-targetspec-lflang">;</span>
<span class="source-lf storage-modifier-lflang">main</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">ReactionTypeError</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">timer</span><span class="source-lf"> t;</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(t) </span><span class="source-lf meta-embedded-block-ts">{=</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts storage-type-ts">let</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-definition-variable-ts variable-other-readwrite-ts">foo</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-type-annotation-ts keyword-operator-type-annotation-ts">:</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-type-annotation-ts support-type-primitive-ts">number</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts meta-var-single-variable-expr-ts meta-type-annotation-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts keyword-operator-assignment-ts">=</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts"> </span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts string-quoted-double-ts punctuation-definition-string-begin-ts">&quot;</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts string-quoted-double-ts">THIS IS NOT A NUMBER</span><span class="source-lf meta-embedded-block-ts meta-var-expr-ts string-quoted-double-ts punctuation-definition-string-end-ts">&quot;</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">        </span><span class="source-lf meta-embedded-block-ts meta-function-call-ts support-class-console-ts">console</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts punctuation-accessor-ts">.</span><span class="source-lf meta-embedded-block-ts meta-function-call-ts support-function-console-ts">log</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">(</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-begin-ts">&quot;</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts">Hello World.</span><span class="source-lf meta-embedded-block-ts string-quoted-double-ts punctuation-definition-string-end-ts">&quot;</span><span class="source-lf meta-embedded-block-ts meta-brace-round-ts">)</span><span class="source-lf meta-embedded-block-ts punctuation-terminator-statement-ts">;</span>
<span class="source-lf meta-embedded-block-ts">    </span><span class="source-lf meta-embedded-block-ts">=}</span>
<span class="source-lf">}</span>
</pre>
<p>This reactor will not compile, and should you attempt to compile it you will get an output from the compiler which looks something like this:</p>
<pre class="source-lf language-text">--- Standard output from command:
src/ReactionTypeError.ts(23,25): error TS2322: Type &#039;&quot;THIS IS NOT A NUMBER&quot;&#039; is not assignable to type &#039;number&#039;.

--- End of standard output.</pre>
<p>In particular the output</p>
<pre class="source-lf language-text">src/ReactionTypeError.ts(23,25): error TS2322: Type &#039;&quot;THIS IS NOT A NUMBER&quot;&#039; is not assignable to type &#039;number&#039;.</pre>
<p>identifies the problem: surprisingly, the string <code>"THIS IS NOT A NUMBER"</code> is not a number. However the line information <code>(23,25)</code> is a little confusing because it points to the location of the type error <strong>in the generated</strong> .ts file <code>ReactionTypeError/src/ReactionTypeError.ts</code> not in the original .lf file <code>ReactionTypeError.lf</code>. The .ts files produced by the TypeScript code generator are quite readable if you are familiar with the <a href="https://github.com/lf-lang/reactor-ts">reactor-ts</a> submodule, but even if you aren’t familiar it is not too difficult to track down the problem. Just open <code>ReactionTypeError/src/ReactionTypeError.ts</code> in your favorite text editor (we recommend <a href="https://code.visualstudio.com/docs/languages/typescript">Visual Studio</a> for its excellent TypeScript integration) and look at line 23.</p>
<pre class="source-lf language-lf-ts"><span class="source-lf constant-numeric-int-lflang">14</span><span class="source-lf">        </span><span class="source-lf variable-other-constant-reactorinstance-lflang">this</span><span class="source-lf keyword-operator-lflang">.</span><span class="source-lf variable-other-lflang">addReaction</span><span class="source-lf">(</span>
<span class="source-lf constant-numeric-int-lflang">15</span><span class="source-lf">            </span><span class="source-lf keyword-operator-new-lflang">new</span><span class="source-lf"> Triggers(</span><span class="source-lf variable-other-constant-reactorinstance-lflang">this</span><span class="source-lf keyword-operator-lflang">.</span><span class="source-lf variable-other-lflang">t</span><span class="source-lf">),</span>
<span class="source-lf constant-numeric-int-lflang">16</span><span class="source-lf">            </span><span class="source-lf keyword-operator-new-lflang">new</span><span class="source-lf"> Args(</span><span class="source-lf variable-other-constant-reactorinstance-lflang">this</span><span class="source-lf keyword-operator-lflang">.</span><span class="source-lf variable-other-lflang">t</span><span class="source-lf">),</span>
<span class="source-lf constant-numeric-int-lflang">17</span><span class="source-lf">            function (this, __t: Readable&lt;Tag&gt;) {</span>
<span class="source-lf constant-numeric-int-lflang">18</span><span class="source-lf">                </span><span class="source-lf comment-line-double-dash-lflang">// =============== START react prologue</span>
<span class="source-lf constant-numeric-int-lflang">19</span><span class="source-lf">                </span><span class="source-lf storage-modifier-lflang">const</span><span class="source-lf"> util </span><span class="source-lf keyword-operator-lflang">=</span><span class="source-lf"> </span><span class="source-lf variable-other-constant-reactorinstance-lflang">this</span><span class="source-lf keyword-operator-lflang">.</span><span class="source-lf variable-other-lflang">util</span><span class="source-lf">;</span>
<span class="source-lf constant-numeric-int-lflang">20</span><span class="source-lf">                let t </span><span class="source-lf keyword-operator-lflang">=</span><span class="source-lf"> </span><span class="source-lf variable-other-constant-reactorinstance-lflang">__t</span><span class="source-lf keyword-operator-lflang">.</span><span class="source-lf variable-other-lflang">get</span><span class="source-lf">();</span>
<span class="source-lf constant-numeric-int-lflang">21</span><span class="source-lf">                </span><span class="source-lf comment-line-double-dash-lflang">// =============== END react prologue</span>
<span class="source-lf constant-numeric-int-lflang">22</span><span class="source-lf">                try {</span>
<span class="source-lf constant-numeric-int-lflang">23</span><span class="source-lf">                    let foo:number </span><span class="source-lf keyword-operator-lflang">=</span><span class="source-lf"> </span><span class="source-lf string-quoted-double-lflang">&quot;</span><span class="source-lf string-quoted-double-lflang">THIS IS NOT A NUMBER</span><span class="source-lf string-quoted-double-lflang">&quot;</span><span class="source-lf">;</span>
<span class="source-lf constant-numeric-int-lflang">24</span><span class="source-lf">                    </span><span class="source-lf variable-other-constant-reactorinstance-lflang">console</span><span class="source-lf keyword-operator-lflang">.</span><span class="source-lf variable-other-lflang">log</span><span class="source-lf">(</span><span class="source-lf string-quoted-double-lflang">&quot;</span><span class="source-lf string-quoted-double-lflang">Hello World.</span><span class="source-lf string-quoted-double-lflang">&quot;</span><span class="source-lf">);</span>
<span class="source-lf constant-numeric-int-lflang">25</span><span class="source-lf">                } finally {</span>
<span class="source-lf constant-numeric-int-lflang">26</span><span class="source-lf">                    </span><span class="source-lf comment-line-double-dash-lflang">// =============== START react epilogue</span>
<span class="source-lf constant-numeric-int-lflang">27</span>
<span class="source-lf constant-numeric-int-lflang">28</span><span class="source-lf">                    </span><span class="source-lf comment-line-double-dash-lflang">// =============== END react epilogue</span>
<span class="source-lf constant-numeric-int-lflang">29</span><span class="source-lf">                }</span>
<span class="source-lf constant-numeric-int-lflang">30</span><span class="source-lf">            }</span>
<span class="source-lf constant-numeric-int-lflang">31</span><span class="source-lf">        );</span>
</pre>
<p>There (inside the try block) we can find the problematic reaction code. <em>Reaction code is copied verbatim into generated .ts files</em>.</p>
<p>It can be a bit harder to interpret type errors outside of reaction code, but most type error messages are still relatively clear. For example if you attempt to connect a reactor output to an incompatibly typed input like:</p>
<pre class="source-lf language-lf-ts"><span class="source-lf meta-targetspec-lflang keyword-control-lflang">target</span><span class="source-lf meta-targetspec-lflang"> </span><span class="source-lf meta-targetspec-lflang constant-language-lflang">TypeScript</span><span class="source-lf meta-targetspec-lflang">;</span>
<span class="source-lf storage-modifier-lflang">main</span><span class="source-lf"> </span><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">ConnectionError</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf variable-other-constant-reactorinstance-lflang">s</span><span class="source-lf"> </span><span class="source-lf keyword-operator-lflang">=</span><span class="source-lf"> </span><span class="source-lf keyword-operator-new-lflang">new</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Sender</span><span class="source-lf">();</span>
<span class="source-lf">    </span><span class="source-lf variable-other-constant-reactorinstance-lflang">r</span><span class="source-lf"> </span><span class="source-lf keyword-operator-lflang">=</span><span class="source-lf"> </span><span class="source-lf keyword-operator-new-lflang">new</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Receiver</span><span class="source-lf">();</span>
<span class="source-lf">    </span><span class="source-lf variable-other-constant-reactorinstance-lflang">s</span><span class="source-lf keyword-operator-lflang">.</span><span class="source-lf variable-other-lflang">foo</span><span class="source-lf"> </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> </span><span class="source-lf variable-other-constant-reactorinstance-lflang">r</span><span class="source-lf keyword-operator-lflang">.</span><span class="source-lf variable-other-lflang">bar</span><span class="source-lf">;</span>
<span class="source-lf">}</span>
<span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Sender</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">output</span><span class="source-lf"> foo:</span><span class="source-lf storage-type-lflang">number</span><span class="source-lf">;</span>
<span class="source-lf">}</span>
<span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Receiver</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">input</span><span class="source-lf"> bar:</span><span class="source-lf storage-type-lflang">string</span><span class="source-lf">;</span>
<span class="source-lf">}</span>
</pre>
<p>you should get an error like</p>
<pre class="source-lf language-text">--- Standard output from command:
src/InputTypeError.ts(36,23): error TS2345: Argument of type &#039;OutPort&lt;number&gt;&#039; is not assignable to parameter of type &#039;Port&lt;string&gt;&#039;.
  Types of property &#039;value&#039; are incompatible.
    Type &#039;number | undefined&#039; is not assignable to type &#039;string | undefined&#039;.
      Type &#039;number&#039; is not assignable to type &#039;string | undefined&#039;.

--- End of standard output.</pre>
<p>The key message being <code>Argument of type 'OutPort&#x3C;number>' is not assignable to parameter of type 'Port&#x3C;string>'</code>.</p>
<p>One last tip: if you attempt to reference a port, action, timer etc. named <code>foo</code> that isn’t declared in the triggers, uses, or effects declaration of the reaction, you will get the error <code>Cannot find name 'foo'</code> in the reaction body.</p>
<h3 id="utility-function-reference" style="position:relative;"><a href="#utility-function-reference" aria-label="utility function reference permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Utility Function Reference</h3>
<p>These utility functions may be called within a TypeScript reaction:</p>
<p><code>util.requestShutdown(): void</code> Ends execution after one microstep. See <a href="#stopping-execution">Stopping Execution</a>.</p>
<p><code>util.getCurrentTag(): Tag</code> Gets the current (logical) tag. See <a href="#tags">Tags</a>.</p>
<p><code>util.getCurrentLogicalTime(): TimeValue</code> Gets the current logical TimeValue. See <a href="#timed-behavior">Time</a>.</p>
<p><code>util.getCurrentPhysicalTime(): TimeValue</code> Gets the current physical TimeValue. See <a href="#timed-behavior">Time</a>.</p>
<p><code>util.getElapsedLogicalTime(): TimeValue</code> Gets the elapsed logical TimeValue from execution start. See <a href="#timed-behavior">Time</a>.</p>
<p><code>util.getElapsedPhysicalTime(): TimeValue</code> Gets the elapsed physical TimeValue from execution start. See <a href="#timed-behavior">Time</a>.</p>
<p><code>util.success(): void</code> Invokes the <a href="https://github.com/lf-lang/reactor-ts">reactor-ts</a> App’s default success callback. FIXME: Currently doesn’t do anything in Lingua Franca.</p>
<p><code>util.failure(): void</code> Invokes the <a href="https://github.com/lf-lang/reactor-ts">reactor-ts</a> App’s default failure callback. Throws an error.</p>
<h3 id="building-reactor-ts-documentation" style="position:relative;"><a href="#building-reactor-ts-documentation" aria-label="building reactor ts documentation permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Building Reactor-ts Documentation</h3>
<p>To build and view proper documentation for <code>time.ts</code> (and other reactor-ts libraries), install <a href="https://typedoc.org/">typedoc</a> and run</p>
<pre class="source-lf language-sh"><span class="source-shell">typedoc --out docs src</span>
</pre>
<p>from the root of the <a href="https://github.com/lf-lang/reactor-ts">reactor-ts</a>. You probably already have the reactor-ts submodule at</p>
<pre class="source-lf language-text">lingua-franca/xtext/org.icyphy.linguafranca/src/lib/TS/reactor-ts/</pre>
<p>You should see an output like.</p>
<pre class="source-lf language-text">Using TypeScript 3.8.3 from /usr/local/lib/node_modules/typescript/lib
Rendering [========================================] 100%

Documentation generated at /Users/&lt;username&gt;/git/lingua-franca/xtext/org.icyphy.linguafranca/src/lib/TS/reactor-ts/docs</pre>
<p>Open that path in a browser with <code>/index.html</code> appended to the end like</p>
<pre class="source-lf language-text">/Users/&lt;username&gt;/git/lingua-franca/xtext/org.icyphy.linguafranca/src/lib/TS/reactor-ts/docs/index.html</pre>
<p>to navigate the docs.</p>
</div>
<div class="lf-rs">
<h3 id="target-properties" style="position:relative;"><a href="#target-properties" aria-label="target properties permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Target Properties</h3>
<p>Target properties may be mentioned like so:</p>
<pre class="source-lf language-lf-rust"><span class="source-lf meta-targetspec-lflang keyword-control-lflang">target</span><span class="source-lf meta-targetspec-lflang"> </span><span class="source-lf meta-targetspec-lflang constant-language-lflang">Rust</span><span class="source-lf meta-targetspec-lflang"> {</span>
<span class="source-lf meta-targetspec-lflang comment-line-double-dash-lflang">    </span><span class="source-lf meta-targetspec-lflang comment-line-double-dash-lflang">// enables single-file project layout</span>
<span class="source-lf meta-targetspec-lflang">    </span><span class="source-lf meta-targetspec-lflang variable-parameter-lflang">single-file-project</span><span class="source-lf meta-targetspec-lflang">: </span><span class="source-lf meta-targetspec-lflang constant-language-lflang">false</span><span class="source-lf meta-targetspec-lflang">,</span>
<span class="source-lf meta-targetspec-lflang comment-line-double-dash-lflang">    </span><span class="source-lf meta-targetspec-lflang comment-line-double-dash-lflang">// timeout for the execution. The program will shutdown at most after the specified duration.</span>
<span class="source-lf meta-targetspec-lflang">    </span><span class="source-lf meta-targetspec-lflang variable-parameter-lflang">timeout</span><span class="source-lf meta-targetspec-lflang">: </span><span class="source-lf meta-targetspec-lflang constant-numeric-int-lflang">3</span><span class="source-lf meta-targetspec-lflang"> </span><span class="source-lf meta-targetspec-lflang constant-numeric-lflang">sec</span><span class="source-lf meta-targetspec-lflang">,</span>
<span class="source-lf meta-targetspec-lflang"></span>
<span class="source-lf meta-targetspec-lflang">    </span><span class="source-lf meta-targetspec-lflang variable-parameter-lflang">cargo-features</span><span class="source-lf meta-targetspec-lflang">: [</span><span class="source-lf meta-targetspec-lflang string-quoted-double-lflang">&quot;</span><span class="source-lf meta-targetspec-lflang string-quoted-double-lflang">cli</span><span class="source-lf meta-targetspec-lflang string-quoted-double-lflang">&quot;</span><span class="source-lf meta-targetspec-lflang">]</span>
<span class="source-lf meta-targetspec-lflang">}</span>
</pre>
<p>See <a href="/docs/handbook/target-declaration">Target Declaration</a> for the full list of supported target properties.</p>
<h3 id="the-executable" style="position:relative;"><a href="#the-executable" aria-label="the executable permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The Executable</h3>
<p>The executable name is the name of the main reactor <em>transformed to snake_case</em>: <code>main reactor RustProgram</code> will generate <code>rust_program</code>. See <a href="/docs/handbook/target-declaration#command-line-arguments">Command-Line Arguments</a> for details.</p>
<h3 id="file-layout" style="position:relative;"><a href="#file-layout" aria-label="file layout permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>File layout</h3>
<p>The Rust code generator generates a Cargo project with a classical layout:</p>
<pre class="source-lf language-text">├── Cargo.lock
├── Cargo.toml
├── src
│   ├── main.rs
│   └── reactors
│       ├── mod.rs
|       ├── ...
|
└── target
    ├── ...</pre>
<p>The module structure is as follows:</p>
<ul>
<li>the crate has a module <code>reactors</code></li>
<li>each LF reactor has its own submodule of <code>reactors</code>. For instance, <code>Minimal.lf</code> will generate <code>minimal.rs</code>. The name is transformed to snake_case.</li>
</ul>
<p>This means that to refer to the contents of another reactor module, e.g. that of <code>Other.lf</code>, you have to write <code>super::other::Foo</code>. This is relevant to access <code>preamble</code> items.</p>
<h4 id="single-file-layout" style="position:relative;"><a href="#single-file-layout" aria-label="single file layout permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Single-file layout</h4>
<p>The Rust target supports an alternative file layout, where all reactors are generated into the <code>main.rs</code> file, making the project fit in a single file (excluding <code>Cargo.toml</code>). <em>The module structure is unchanged:</em> the file still contains a <code>mod reactors { ... }</code> within which each reactor has its <code>mod foo { ... }</code>. You can thus change the layout without having to update any LF code.</p>
<p>Set the target property <code>single-file-project: true</code> to use this layout.</p>
<p>Note: this alternative layout is provided for the purposes of making self-contained benchmark files. Generating actual runnable benchmarks from an LF file may be explored in the future.</p>
<h3 id="specifying-dependencies" style="position:relative;"><a href="#specifying-dependencies" aria-label="specifying dependencies permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Specifying dependencies</h3>
<p>The Rust code generator leverages Cargo to allow LF programs to profit from Rust’s large package ecosystem. The code generator may also link support files written in pure Rust into the generated crate. Target properties are used to achieve all this.</p>
<h4 id="adding-cargo-dependencies" style="position:relative;"><a href="#adding-cargo-dependencies" aria-label="adding cargo dependencies permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Adding cargo dependencies</h4>
<p>The <code>cargo-dependencies</code> target property may be used to specify dependencies on crates coming from <code>crates.io</code>. Here’s an example:</p>
<pre class="source-lf language-lf-rust"><span class="source-lf meta-targetspec-lflang keyword-control-lflang">target</span><span class="source-lf meta-targetspec-lflang"> </span><span class="source-lf meta-targetspec-lflang constant-language-lflang">Rust</span><span class="source-lf meta-targetspec-lflang"> {</span>
<span class="source-lf meta-targetspec-lflang">   </span><span class="source-lf meta-targetspec-lflang variable-parameter-lflang">cargo-dependencies</span><span class="source-lf meta-targetspec-lflang">: {</span>
<span class="source-lf meta-targetspec-lflang">      </span><span class="source-lf meta-targetspec-lflang variable-parameter-lflang">termcolor</span><span class="source-lf meta-targetspec-lflang">: </span><span class="source-lf meta-targetspec-lflang string-quoted-double-lflang">&quot;</span><span class="source-lf meta-targetspec-lflang string-quoted-double-lflang">0.8</span><span class="source-lf meta-targetspec-lflang string-quoted-double-lflang">&quot;</span>
<span class="source-lf meta-targetspec-lflang">   }</span>
<span class="source-lf">};</span>
</pre>
<p>The value of the <em>cargo-dependencies</em> property is a map of crate identifiers to a <em>dependency-spec</em>. An informal example follows:</p>
<pre class="source-lf language-json"><span class="source-json">cargo-dependencies: </span><span class="source-json meta-structure-dictionary-json punctuation-definition-dictionary-begin-json">{</span>
<span class="source-json meta-structure-dictionary-json">   </span><span class="source-json meta-structure-dictionary-json comment-line-double-slash-js punctuation-definition-comment-json">//</span><span class="source-json meta-structure-dictionary-json comment-line-double-slash-js"> Name-of-the-crate: &quot;version&quot;</span>
<span class="source-json meta-structure-dictionary-json">   </span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">r</span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">a</span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">n</span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">d</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json punctuation-separator-dictionary-key-value-json">:</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json"> </span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json string-quoted-double-json punctuation-definition-string-begin-json">&quot;</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json string-quoted-double-json">0.8</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json string-quoted-double-json punctuation-definition-string-end-json">&quot;</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json punctuation-separator-dictionary-pair-json">,</span>
<span class="source-json meta-structure-dictionary-json">   </span><span class="source-json meta-structure-dictionary-json comment-line-double-slash-js punctuation-definition-comment-json">//</span><span class="source-json meta-structure-dictionary-json comment-line-double-slash-js"> Equivalent to using an explicit map:</span>
<span class="source-json meta-structure-dictionary-json">   </span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">r</span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">a</span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">n</span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">d</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json punctuation-separator-dictionary-key-value-json">:</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json"> </span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json punctuation-definition-dictionary-begin-json">{</span>
<span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json">     </span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">v</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">e</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">r</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">s</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">i</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">o</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">n</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json punctuation-separator-dictionary-key-value-json">:</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json"> </span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json string-quoted-double-json punctuation-definition-string-begin-json">&quot;</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json string-quoted-double-json">0.8</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json string-quoted-double-json punctuation-definition-string-end-json">&quot;</span>
<span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json">   </span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json punctuation-definition-dictionary-end-json">}</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json punctuation-separator-dictionary-pair-json">,</span>
<span class="source-json meta-structure-dictionary-json">   </span><span class="source-json meta-structure-dictionary-json comment-line-double-slash-js punctuation-definition-comment-json">//</span><span class="source-json meta-structure-dictionary-json comment-line-double-slash-js"> The map allows specifying more details</span>
<span class="source-json meta-structure-dictionary-json">   </span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">r</span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">a</span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">n</span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">d</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json punctuation-separator-dictionary-key-value-json">:</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json"> </span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json punctuation-definition-dictionary-begin-json">{</span>
<span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json">     </span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json comment-line-double-slash-js punctuation-definition-comment-json">//</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json comment-line-double-slash-js"> A path to a local unpublished crate.</span>
<span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json">     </span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json comment-line-double-slash-js punctuation-definition-comment-json">//</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json comment-line-double-slash-js"> Note &#039;path&#039; is mutually exclusive with &#039;git&#039;.</span>
<span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json">     </span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">p</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">a</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">t</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">h</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json punctuation-separator-dictionary-key-value-json">:</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json"> </span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json string-quoted-double-json punctuation-definition-string-begin-json">&quot;</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json string-quoted-double-json">/home/me/Git/local-rand-clone</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json string-quoted-double-json punctuation-definition-string-end-json">&quot;</span>
<span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json">   </span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json punctuation-definition-dictionary-end-json">}</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json punctuation-separator-dictionary-pair-json">,</span>
<span class="source-json meta-structure-dictionary-json">   </span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">r</span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">a</span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">n</span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">d</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json punctuation-separator-dictionary-key-value-json">:</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json"> </span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json punctuation-definition-dictionary-begin-json">{</span>
<span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json">     </span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json comment-line-double-slash-js punctuation-definition-comment-json">//</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json comment-line-double-slash-js"> A URL to a git repo</span>
<span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json">     </span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">g</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">i</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">t</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json punctuation-separator-dictionary-key-value-json">:</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json"> </span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json string-quoted-double-json punctuation-definition-string-begin-json">&quot;</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json string-quoted-double-json">https://github.com/me/rand</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json string-quoted-double-json punctuation-definition-string-end-json">&quot;</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json punctuation-separator-dictionary-pair-json">,</span>
<span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json">     </span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json comment-line-double-slash-js punctuation-definition-comment-json">//</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json comment-line-double-slash-js"> Specify an explicit Git revision number</span>
<span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json">     </span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">r</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">e</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">v</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json punctuation-separator-dictionary-key-value-json">:</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json"> </span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json string-quoted-double-json punctuation-definition-string-begin-json">&quot;</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json string-quoted-double-json">abcdef1234</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json string-quoted-double-json punctuation-definition-string-end-json">&quot;</span>
<span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json">   </span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json punctuation-definition-dictionary-end-json">}</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json punctuation-separator-dictionary-pair-json">,</span>
<span class="source-json meta-structure-dictionary-json">   </span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">r</span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">a</span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">n</span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">d</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json punctuation-separator-dictionary-key-value-json">:</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json"> </span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json punctuation-definition-dictionary-begin-json">{</span>
<span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json">     </span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">v</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">e</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">r</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">s</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">i</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">o</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">n</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json punctuation-separator-dictionary-key-value-json">:</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json"> </span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json string-quoted-double-json punctuation-definition-string-begin-json">&quot;</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json string-quoted-double-json">0.8</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json string-quoted-double-json punctuation-definition-string-end-json">&quot;</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json punctuation-separator-dictionary-pair-json">,</span>
<span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json">     </span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json comment-line-double-slash-js punctuation-definition-comment-json">//</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json comment-line-double-slash-js"> you can specify cargo features</span>
<span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json">     </span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">f</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">e</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">a</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">t</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">u</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">r</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">e</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">s</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json punctuation-separator-dictionary-key-value-json">:</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json"> </span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-array-json punctuation-definition-array-begin-json">[</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-array-json string-quoted-double-json punctuation-definition-string-begin-json">&quot;</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-array-json string-quoted-double-json">some-cargo-feature</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-array-json string-quoted-double-json punctuation-definition-string-end-json">&quot;</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-array-json punctuation-separator-array-json">,</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-array-json punctuation-definition-array-end-json">]</span>
<span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json">   </span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json punctuation-definition-dictionary-end-json">}</span>
<span class="source-json meta-structure-dictionary-json punctuation-definition-dictionary-end-json">}</span>
</pre>
<p>When a <em>dependency-spec</em> is specified as an object, its key-value pairs correspond directly to those of a <a href="https://doc.rust-lang.org/cargo/reference/specifying-dependencies.html#specifying-dependencies-from-git-repositories">Cargo dependency specification</a>. For instance for the following dependency spec:</p>
<pre class="source-lf language-json"><span class="source-json">   rand: </span><span class="source-json meta-structure-dictionary-json punctuation-definition-dictionary-begin-json">{</span>
<span class="source-json meta-structure-dictionary-json">     </span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">v</span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">e</span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">r</span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">s</span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">i</span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">o</span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">n</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json punctuation-separator-dictionary-key-value-json">:</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json"> </span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json string-quoted-double-json punctuation-definition-string-begin-json">&quot;</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json string-quoted-double-json">0.8</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json string-quoted-double-json punctuation-definition-string-end-json">&quot;</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json punctuation-separator-dictionary-pair-json">,</span>
<span class="source-json meta-structure-dictionary-json">     </span><span class="source-json meta-structure-dictionary-json comment-line-double-slash-js punctuation-definition-comment-json">//</span><span class="source-json meta-structure-dictionary-json comment-line-double-slash-js"> you can specify cargo features</span>
<span class="source-json meta-structure-dictionary-json">     </span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">f</span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">e</span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">a</span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">t</span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">u</span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">r</span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">e</span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">s</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json punctuation-separator-dictionary-key-value-json">:</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json"> </span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-array-json punctuation-definition-array-begin-json">[</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-array-json string-quoted-double-json punctuation-definition-string-begin-json">&quot;</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-array-json string-quoted-double-json">some-cargo-feature</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-array-json string-quoted-double-json punctuation-definition-string-end-json">&quot;</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-array-json punctuation-separator-array-json">,</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-array-json punctuation-definition-array-end-json">]</span>
<span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json">   </span><span class="source-json meta-structure-dictionary-json punctuation-definition-dictionary-end-json">}</span>
</pre>
<p>we add the following to the generated <code>Cargo.toml</code>:</p>
<pre class="source-lf language-toml"><span class="source-toml meta-tag-table-toml punctuation-definition-table-toml">[</span><span class="source-toml meta-tag-table-toml entity-other-attribute-name-table-toml">dependencies</span><span class="source-toml meta-tag-table-toml">.</span><span class="source-toml meta-tag-table-toml entity-other-attribute-name-table-toml">rand</span><span class="source-toml meta-tag-table-toml punctuation-definition-table-toml">]</span>
<span class="source-toml keyword-key-toml">version</span><span class="source-toml"> </span><span class="source-toml punctuation-definition-keyValuePair-toml">=</span><span class="source-toml"> </span><span class="source-toml string-quoted-single-basic-line-toml">&quot;0.8&quot;</span>
<span class="source-toml keyword-key-toml">features</span><span class="source-toml"> </span><span class="source-toml punctuation-definition-keyValuePair-toml">=</span><span class="source-toml"> </span><span class="source-toml punctuation-definition-array-toml">[</span><span class="source-toml string-quoted-single-basic-line-toml">&quot;some-cargo-feature&quot;</span><span class="source-toml punctuation-definition-array-toml">]</span>
</pre>
<p>Not all keys are necessarily supported though, e.g. the <code>registry</code> key is not supported (yet).</p>
<h4 id="configuring-the-runtime" style="position:relative;"><a href="#configuring-the-runtime" aria-label="configuring the runtime permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Configuring the runtime</h4>
<p>The runtime crate can be configured just like other crates, using the <code>cargo-dependencies</code> target property, e.g.:</p>
<pre class="source-lf language-json"><span class="source-json">cargo-dependencies: </span><span class="source-json meta-structure-dictionary-json punctuation-definition-dictionary-begin-json">{</span>
<span class="source-json meta-structure-dictionary-json">   </span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">r</span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">e</span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">a</span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">c</span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">t</span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">o</span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">r</span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">_</span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">r</span><span class="source-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">t</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json punctuation-separator-dictionary-key-value-json">:</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json"> </span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json punctuation-definition-dictionary-begin-json">{</span>
<span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json">     </span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">f</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">e</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">a</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">t</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">u</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">r</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">e</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json invalid-illegal-expected-dictionary-separator-json">s</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json punctuation-separator-dictionary-key-value-json">:</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json"> </span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-array-json punctuation-definition-array-begin-json">[</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-array-json string-quoted-double-json punctuation-definition-string-begin-json">&quot;</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-array-json string-quoted-double-json">parallel-runtime</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-array-json string-quoted-double-json punctuation-definition-string-end-json">&quot;</span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-array-json punctuation-definition-array-end-json">]</span>
<span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json meta-structure-dictionary-value-json">   </span><span class="source-json meta-structure-dictionary-json meta-structure-dictionary-value-json meta-structure-dictionary-json punctuation-definition-dictionary-end-json">}</span>
<span class="source-json meta-structure-dictionary-json punctuation-definition-dictionary-end-json">}</span>
</pre>
<p>The dependency is always included, with defaults picked by LFC. The location information (<em>path</em>/<em>git</em>/<em>version</em> key) is optional.
See <a href="https://lf-lang.github.io/reactor-rust/reactor_rt/index.html">reactor_rt</a> for the supported features.</p>
<h4 id="linking-support-files" style="position:relative;"><a href="#linking-support-files" aria-label="linking support files permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Linking support files</h4>
<p>You can link-in additional rust modules using the <code>rust-include</code> target property:</p>
<pre class="source-lf language-lf-rust"><span class="source-lf meta-targetspec-lflang keyword-control-lflang">target</span><span class="source-lf meta-targetspec-lflang"> </span><span class="source-lf meta-targetspec-lflang constant-language-lflang">Rust</span><span class="source-lf meta-targetspec-lflang"> {</span>
<span class="source-lf meta-targetspec-lflang">  </span><span class="source-lf meta-targetspec-lflang variable-parameter-lflang">rust-include</span><span class="source-lf meta-targetspec-lflang">: [</span><span class="source-lf meta-targetspec-lflang string-quoted-double-lflang">&quot;</span><span class="source-lf meta-targetspec-lflang string-quoted-double-lflang">foo.rs</span><span class="source-lf meta-targetspec-lflang string-quoted-double-lflang">&quot;</span><span class="source-lf meta-targetspec-lflang">]</span>
<span class="source-lf meta-targetspec-lflang">}</span><span class="source-lf meta-targetspec-lflang">;</span>
</pre>
<p>The property is a list of paths (relative to the directory containing the <code>.lf</code> file). Each path should either point to a Rust file (<code>.rs</code>), or a directory that contains a <code>mod.rs</code> file. Each of those will be copied to the <code>src</code> directory of the generated Cargo project, and linked in to the <code>main.rs</code> file.</p>
<p>To refer to the included module, you can use e.g. <code>crate::foo</code> if your module is named <code>foo</code>.</p>
<h3 id="generation-scheme" style="position:relative;"><a href="#generation-scheme" aria-label="generation scheme permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Generation scheme</h3>
<p>Each reactor generates its own <code>struct</code> which contains state variables. For instance,</p>
<table>
<thead>
<tr>
<th>LF</th>
<th>Generated Rust</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<pre class="source-lf language-lf-rust"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">SomeReactor</span><span class="source-lf"> {</span>
<span class="source-lf">  </span><span class="source-lf storage-modifier-lflang">state</span><span class="source-lf"> field: </span><span class="source-lf entity-name-type-lflang">u32</span><span class="source-lf">(</span><span class="source-lf constant-numeric-int-lflang">0</span><span class="source-lf">)</span>
<span class="source-lf">}</span>
</pre>
</td>
<td>
<pre class="source-lf language-rust"><span class="source-rust storage-type-rust">struct</span><span class="source-rust"> </span><span class="source-rust entity-name-type-rust">SomeReactor</span><span class="source-rust"> </span><span class="source-rust">{</span>
<span class="source-rust">  field: </span><span class="source-rust support-type-primitive-rust">u32</span>
<span class="source-rust">}</span>
</pre>
</td>
</tr>
</tbody>
</table>
<p>In the following we refer to that struct as the <em>state struct</em>.</p>
<h4 id="reactions" style="position:relative;"><a href="#reactions" aria-label="reactions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Reactions</h4>
<p>Reactions are each generated in a separate method of the reactor struct. Reaction names are unspecified and may be mangled to prevent explicit calling. The parameters of that method are</p>
<ul>
<li><code>&#x26;mut self</code>: the state struct described above,</li>
<li><code>ctx: &#x26;mut ReactionCtx</code>: the context object for the reaction execution,</li>
<li>For each dependency, a parameter is generated.
<ul>
<li>If the dependency is a component of this reactor, the name of the parameter is just the name of the component</li>
<li>If the dependency is a port of a child reactor, the name of the parameter is <code>&#x3C;name of the child instance>__&#x3C;name of the port></code>, e.g. <code>child__out</code> for <code>child.out</code>.</li>
<li>The type of the parameter depends on the kind of dependency and of component:</li>
</ul>
<table>
<thead>
<tr>
<th>Component</th>
<th>Use/trigger dependency</th>
<th>Effect dependency</th>
</tr>
</thead>
<tbody>
<tr>
<td>
</li>
</ul>
<p>Port of type <code>T</code></p>
</td>
<td>
<p><code>&#x26;ReadablePort&#x3C;T></code></p>
</td>
<td>
<p><code>WritablePort&#x3C;T></code></p>
</td>
</tr>
<tr>
<td>
<p>Logical action of type <code>T</code></p>
</td>
<td>
<p><code>&#x26;LogicalAction&#x3C;T></code></p>
</td>
<td>
<p><code>&#x26;mut LogicalAction&#x3C;T></code></p>
</td>
</tr>
<tr>
<td>
<p>Physical action of type <code>T</code></p>
</td>
<td>
<p><code>&#x26;PhysicalActionRef&#x3C;T></code></p>
</td>
<td>
<p><code>&#x26;mut PhysicalActionRef&#x3C;T></code></p>
</td>
</tr>
<tr>
<td>Timer</td>
<td>
<p><code>&#x26;Timer</code></p>
</td>
<td>
<p>n/a</p>
</td>
</tr>
<tr>
<td>
<p>Port bank of type <code>T</code></p>
</td>
<td>
<p><code>&#x26;ReadablePortBank&#x3C;T></code></p>
</td>
<td>
<p><code>WritablePortBank&#x3C;T></code></p>
</td>
</tr>
</tbody>
</table>
<p>Undeclared dependencies, and dependencies on timers and <code>startup</code> or <code>shutdown</code>, do not generate a parameter.</p>
<p>The <a href="https://lf-lang.github.io/reactor-rust/reactor_rt/struct.ReactionCtx.html"><code>ReactionCtx</code></a> object is a mediator to manipulate all those dependency objects. It has methods to set ports, schedule actions, retrieve the current logical time, etc.</p>
<p>For instance:</p>
<pre class="source-lf language-lf-rust"><span class="source-lf storage-modifier-lflang">reactor</span><span class="source-lf"> </span><span class="source-lf entity-name-type-lflang">Source</span><span class="source-lf"> {</span>
<span class="source-lf">    </span><span class="source-lf storage-modifier-lflang">output</span><span class="source-lf"> out: </span><span class="source-lf entity-name-type-lflang">i32</span><span class="source-lf">;</span>
<span class="source-lf">    </span><span class="source-lf keyword-control-lflang">reaction</span><span class="source-lf">(</span><span class="source-lf support-variable-lflang">startup</span><span class="source-lf">) </span><span class="source-lf keyword-operator-lflang">-&gt;</span><span class="source-lf"> out </span><span class="source-lf meta-embedded-block-rs">{=</span>
<span class="source-lf meta-embedded-block-rs">        ctx.</span><span class="source-lf meta-embedded-block-rs entity-name-function-rust">set</span><span class="source-lf meta-embedded-block-rs">(</span><span class="source-lf meta-embedded-block-rs">out, </span><span class="source-lf meta-embedded-block-rs constant-numeric-integer-decimal-rust">76600</span><span class="source-lf meta-embedded-block-rs">)</span>
<span class="source-lf meta-embedded-block-rs">    </span><span class="source-lf meta-embedded-block-rs">=}</span>
<span class="source-lf">}</span>
</pre>
<p>In this example, the context object <code>ctx</code> is used to set a port to a value. The port is in scope as <code>out</code>.</p>
<blockquote>
<p>⚠ TODO when the runtime crate is public link to the docs, they should be the most exhaustive documentation.</p>
</blockquote>
</div></div></div><aside class="handbook-toc"><nav class=""><h5>On this page</h5><ul><li><a href="#overview">Overview</a></li><li><a href="#requirements">Requirements</a></li><li><a href="#limitations">Limitations</a></li><li><a href="#the-target-specification">The Target Specification</a></li><li><a href="#parameters-and-state-variables">Parameters and State Variables</a></li><li><a href="#inputs-and-outputs">Inputs and Outputs</a></li><li><a href="#time">Time</a></li><li><a href="#actions">Actions</a></li><li><a href="#stopping-execution">Stopping Execution</a></li><li><a href="#log-and-debug-information">Log and Debug Information</a></li><li><a href="#scheduler-target-property">Scheduler Target Property</a></li><li><a href="#target-implementation-details">Target Implementation Details</a></li></ul><div id="like-dislike-subnav"><h5>Is this page helpful?</h5><div><button title="Like this page" id="like-button"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.052 2.29429C10.3913 1.31699 11.6841 0.866721 12.4829 1.70385C12.6455 1.87427 12.8081 2.05843 12.9176 2.22265C13.2379 2.70316 13.3725 3.33595 13.4218 3.95232C13.4721 4.58045 13.438 5.25457 13.3738 5.86484C13.3093 6.47746 13.2129 7.03959 13.1328 7.44777C13.1294 7.46547 13.1259 7.48288 13.1225 7.5H14.006C15.8777 7.5 17.2924 9.19514 16.9576 11.0367L16.2737 14.7984C15.8017 17.3943 13.2078 19.0291 10.6622 18.3348L5.06251 16.8076C4.14894 16.5585 3.45455 15.8145 3.26885 14.886L2.91581 13.1208C2.63809 11.7322 3.69991 10.5624 4.82905 10.1161C5.15163 9.98861 5.44337 9.82679 5.66974 9.62597C7.37583 8.11245 7.99442 6.90287 9.05406 4.77695C9.4084 4.06605 9.77205 3.10054 10.052 2.29429ZM12.0165 7.87862L12.0169 7.87707L12.0187 7.86973L12.0262 7.83863C12.0328 7.81079 12.0426 7.76903 12.0549 7.71494C12.0793 7.60669 12.1135 7.4493 12.1515 7.25536C12.2277 6.86666 12.3188 6.33504 12.3793 5.76016C12.4401 5.18293 12.4685 4.5758 12.425 4.03206C12.3806 3.47655 12.2652 3.04684 12.0855 2.77735C12.0264 2.6887 11.9138 2.55604 11.7594 2.39421C11.5605 2.18576 11.1314 2.23428 10.9967 2.62228C10.7141 3.43609 10.3334 4.45194 9.94904 5.22305C8.88216 7.36349 8.19326 8.72408 6.33336 10.374C5.99304 10.6759 5.58878 10.8911 5.19665 11.0461C4.31631 11.3941 3.75035 12.1945 3.89639 12.9247L4.24943 14.6899C4.36085 15.247 4.77748 15.6934 5.32562 15.8428L10.9254 17.3701C12.9052 17.91 14.9227 16.6385 15.2898 14.6195L15.9738 10.8578C16.197 9.63009 15.2538 8.5 14.006 8.5H12.5015C12.3476 8.5 12.2022 8.42906 12.1074 8.30771C12.0127 8.18638 11.9792 8.02796 12.0165 7.87862C12.0165 7.87858 12.0165 7.87866 12.0165 7.87862Z"></path></svg> <!-- -->Yes</button><button title="Dislike this page" id="dislike-button"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.052 17.7057C10.3913 18.683 11.6841 19.1333 12.4829 18.2962C12.6455 18.1257 12.8081 17.9416 12.9176 17.7773C13.2379 17.2968 13.3725 16.664 13.4218 16.0477C13.4721 15.4195 13.438 14.7454 13.3738 14.1352C13.3093 13.5225 13.2129 12.9604 13.1328 12.5522C13.1294 12.5345 13.1259 12.5171 13.1225 12.5H14.006C15.8777 12.5 17.2924 10.8049 16.9576 8.96334L16.2737 5.20164C15.8017 2.60569 13.2078 0.970948 10.6622 1.66518L5.06251 3.19238C4.14894 3.44154 3.45455 4.18546 3.26885 5.11401L2.91581 6.87918C2.63809 8.26779 3.69991 9.43756 4.82905 9.88388C5.15163 10.0114 5.44337 10.1732 5.66974 10.374C7.37583 11.8875 7.99442 13.0971 9.05406 15.223C9.4084 15.9339 9.77205 16.8995 10.052 17.7057ZM12.0165 12.1214L12.0169 12.1229L12.0187 12.1303L12.0262 12.1614C12.0328 12.1892 12.0426 12.231 12.0549 12.2851C12.0793 12.3933 12.1135 12.5507 12.1515 12.7446C12.2277 13.1333 12.3188 13.665 12.3793 14.2398C12.4401 14.8171 12.4685 15.4242 12.425 15.9679C12.3806 16.5234 12.2652 16.9532 12.0855 17.2226C12.0264 17.3113 11.9138 17.444 11.7594 17.6058C11.5605 17.8142 11.1314 17.7657 10.9967 17.3777C10.7141 16.5639 10.3334 15.5481 9.94904 14.777C8.88216 12.6365 8.19326 11.2759 6.33336 9.62597C5.99304 9.32406 5.58878 9.1089 5.19665 8.9539C4.31631 8.60592 3.75035 7.80549 3.89639 7.0753L4.24943 5.31012C4.36085 4.753 4.77748 4.30664 5.32562 4.15715L10.9254 2.62995C12.9052 2.08999 14.9227 3.36145 15.2898 5.38052L15.9738 9.14222C16.197 10.3699 15.2538 11.5 14.006 11.5H12.5015C12.3476 11.5 12.2022 11.5709 12.1074 11.6923C12.0127 11.8136 11.9792 11.972 12.0165 12.1214C12.0165 12.1214 12.0165 12.1213 12.0165 12.1214Z"></path></svg> <!-- -->No</button></div></div></nav></aside></article><div class="whitespace-tight raised"><div class="justify-between row"><a class="navigation-link" rel="prev" href="/docs/handbook/expressions"><div class="prev-next prev row"><div class="arrow"><svg width="11" height="14" viewBox="0 0 11 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.5 0V14L0 7.5L10.5 0Z" fill="var(--link-color)"></path></svg></div><div class="nav-content"><header>Previous</header><h3>Expressions</h3><p>Expressions in Lingua Franca.</p></div></div></a><div class="hide-small vertical-line"></div><a class="navigation-link" rel="prev" href="/docs/handbook/target-declaration"><div class="prev-next next row"><div class="arrow"><svg width="11" height="14" viewBox="0 0 11 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.5 0V14L0 7.5L10.5 0Z" fill="var(--link-color)"></path></svg></div><div class="nav-content"><header>Next</header><h3>Target Declaration</h3><p>The target declaration and its parameters in Lingua Franca.</p></div></div></a></div></div><div class="whitespace-tight raised" style="padding:0"><div class="row justify-between small-columns"><div class="bottom-section-content"><p>Lingua Franca is an open source project. Help us improve these pages <a href="https://github.com/lf-lang/website-lingua-franca/tree/main/packages/documentation/copy/en/reference/Target Language Details.md">by sending a Pull Request</a> ❤</p></div><div class="hide-small vertical-line" style="margin-top:1.5rem"></div><div class="bottom-section-content">Contributors to this page:<br/><div><div class="circle-bg">E<img id="62d01fdbb6efd29b1150fa9893d08612" src="https://gravatar.com/avatar/62d01fdbb6efd29b1150fa9893d08612?s=32&amp;&amp;d=blank" alt="eal  (16)"/></div><div class="circle-bg">PD<img id="5c7c24558dc353289718fcff13190a79" src="https://gravatar.com/avatar/5c7c24558dc353289718fcff13190a79?s=32&amp;&amp;d=blank" alt="Peter Donovan  (11)"/></div><div class="circle-bg">SB<img id="6ff45c06752c5b4e0f3bd9fd78bee247" src="https://gravatar.com/avatar/6ff45c06752c5b4e0f3bd9fd78bee247?s=32&amp;&amp;d=blank" alt="Soroush Bateni  (10)"/></div><div class="circle-bg">S<img id="d09be04f36ef603b0dc923944a32943a" src="https://gravatar.com/avatar/d09be04f36ef603b0dc923944a32943a?s=32&amp;&amp;d=blank" alt="Steven  (4)"/></div></div></div><div class="hide-small vertical-line" style="margin-top:1.5rem"></div><div class="bottom-section-content"><p>Last updated: Aug 02, 2022<br/><br/><span id="page-loaded-time"> </span></p></div></div></div></div></section><div id="quickTipPopup" class="inline-popup popup-fade-in" style="opacity:0"><div class="inline-popup-container"><a class="inline-popup-extract"><div></div></a></div></div></main><footer id="site-footer" role="contentinfo"><section id="customize"><article><h3>Customize</h3><label><p>Color Mode<!-- -->:</p><div class="switch-wrap"><select name="colours"><option selected="" value="system">System</option><option value="force-light">Always Light</option><option value="force-dark">Always Dark</option></select></div></label><label><p>Code Font<!-- -->:</p><div class="switch-wrap"><select name="font"><option selected="" value="cascadia">Cascadia</option><option value="cascadia-ligatures">Cascadia (ligatures)</option><option value="consolas">Consolas</option><option value="dank-mono">Dank Mono</option><option value="fira-code">Fira Code</option><option value="jetbrains-mono">JetBrains Mono</option><option value="open-dyslexic">OpenDyslexic</option><option value="sf-mono">SF Mono</option><option value="source-code-pro">Source Code Pro</option></select></div></label></article></section><section id="community"><article id="logos"><a href=""><img id="lf-logo" width="195" height="75" src="/static/footer_logo-6712b352b6972d49da8ef6e29aefc4ae.svg" alt="Lingua Franca Logo"/></a><p>Made with ♥ in Berkeley, Dallas, Dresden, Kiel, and Seoul</p><p>© 2019-<!-- -->2022<!-- --> The Lingua Franca Team<br/></p></article><article id="using-lf"><h3>Using Lingua Franca</h3><ul><li><a href="/docs/handbook/overview">Get Started</a></li><li><a href="/download">Download</a></li><li><a href="/">Why Lingua Franca</a></li><li><a href="/publications-and-presentations">Publications</a></li></ul></article><article id="community-links"><h3>Community</h3><ul><li><a style="position:relative" href="/community">Get Help</a></li><li><a style="position:relative" href="https://github.com/lf-lang/lingua-franca"><span class="link-prefix"><svg fill="none" height="12" viewBox="0 0 12 12" width="12" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="m6.03927.165405c-3.27055 0-5.922909 2.652005-5.922909 5.923645 0 2.61709 1.697089 4.83705 4.050909 5.62035.29636.0546.40436-.1284.40436-.2854 0-.1408-.00509-.5131-.008-1.0073-1.64763.3578-1.99527-.7942-1.99527-.7942-.26946-.68436-.65782-.86654-.65782-.86654-.53782-.36727.04073-.36001.04073-.36001.59454.04182.90727.61055.90727.61055.52836.90509 1.38655.64364 1.724.492.05382-.38254.20691-.64363.376-.79163-1.31527-.14946-2.69818-.65782-2.69818-2.92764 0-.64654.23091-1.17564.60982-1.58946-.06109-.14981-.26437-.75236.05818-1.56763 0 0 .49709-.15927 1.62872.60727.47237-.13163.97928-.19709 1.48291-.19964.50328.00255 1.00982.06801 1.48291.19964 1.13091-.76654 1.62727-.60727 1.62727-.60727.32328.81527.12001 1.41782.05928 1.56763.37964.41382.60873.94292.60873 1.58946 0 2.27564-1.38509 2.77636-2.70437 2.92291.21237.18291.40182.54436.40182 1.09672 0 .79204-.00727 1.43094-.00727 1.62514 0 .1585.10691.3429.40727.2851 2.35197-.7851 4.04767-3.00369 4.04767-5.62005 0-3.27164-2.6524-5.923645-5.92403-5.923645z" fill="#ffffff" fill-rule="evenodd"></path></svg></span>GitHub Repo</a></li><li><a style="position:relative" href="https://twitter.com/thelflang"><span class="link-prefix"><svg fill="none" height="10" viewBox="0 0 13 10" width="13" xmlns="http://www.w3.org/2000/svg"><path d="m4.58519 10c4.62962 0 7.16291-3.83919 7.16291-7.16289 0-.10801 0-.21602-.0049-.32403.4909-.35348.918-.80024 1.2568-1.30591-.4517.20128-.9377.33384-1.4483.39766.5204-.30929.9181-.805148 1.1095-1.394284-.486.289658-1.026.495856-1.6004.608773-.4615-.490946-1.11448-.7953322-1.83617-.7953322-1.38938 0-2.51856 1.1291732-2.51856 2.5185532 0 .19638.02455.38785.06383.57441-2.09143-.1031-3.94721-1.10954-5.1893-2.631474-.21602.373119-.33876.805154-.33876 1.266644 0 .87388.44677 1.64467 1.11936 2.09634-.41239-.01473-.80024-.12765-1.13899-.31421v.03437c0 1.21754.86897 2.23871 2.01778 2.46946-.2111.05891-.43203.08837-.66277.08837-.16202 0-.31912-.01473-.47131-.04419.31911 1.00153 1.25191 1.72813 2.35163 1.74777-.86406.67751-1.94906 1.08008-3.12733 1.08008-.20128 0-.402571-.00982-.59895-.03436 1.10954.70696 2.43509 1.12425 3.85393 1.12425z" fill="#ffffff"></path></svg></span>@thelflang</a></li><li><a style="position:relative" href="https://github.com/lf-lang/website-lingua-franca"><span class="link-prefix"><svg fill="none" height="12" viewBox="0 0 12 12" width="12" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="m6.03927.165405c-3.27055 0-5.922909 2.652005-5.922909 5.923645 0 2.61709 1.697089 4.83705 4.050909 5.62035.29636.0546.40436-.1284.40436-.2854 0-.1408-.00509-.5131-.008-1.0073-1.64763.3578-1.99527-.7942-1.99527-.7942-.26946-.68436-.65782-.86654-.65782-.86654-.53782-.36727.04073-.36001.04073-.36001.59454.04182.90727.61055.90727.61055.52836.90509 1.38655.64364 1.724.492.05382-.38254.20691-.64363.376-.79163-1.31527-.14946-2.69818-.65782-2.69818-2.92764 0-.64654.23091-1.17564.60982-1.58946-.06109-.14981-.26437-.75236.05818-1.56763 0 0 .49709-.15927 1.62872.60727.47237-.13163.97928-.19709 1.48291-.19964.50328.00255 1.00982.06801 1.48291.19964 1.13091-.76654 1.62727-.60727 1.62727-.60727.32328.81527.12001 1.41782.05928 1.56763.37964.41382.60873.94292.60873 1.58946 0 2.27564-1.38509 2.77636-2.70437 2.92291.21237.18291.40182.54436.40182 1.09672 0 .79204-.00727 1.43094-.00727 1.62514 0 .1585.10691.3429.40727.2851 2.35197-.7851 4.04767-3.00369 4.04767-5.62005 0-3.27164-2.6524-5.923645-5.92403-5.923645z" fill="#ffffff" fill-rule="evenodd"></path></svg></span>Web Repo</a></li><li><a style="position:relative" href="https://join.slack.com/t/lf-community/shared_invite/zt-1b4egenxd-Dz~uG5Ps6ce71pgJG02cjw"><span class="link-prefix"><svg xmlns="http://www.w3.org/2000/svg" viewBox="-20 -3 54 54"><path d="M13,23.17a2.52,2.52,0,1,1-2.52-2.53H13Zm1.27,6.31a2.53,2.53,0,0,0,5,0V23.17a2.53,2.53,0,1,0-5,0Zm5-16.44V10.52A2.53,2.53,0,1,0,16.83,13Zm-8.84,1.27a2.53,2.53,0,0,0,0,5h6.31a2.53,2.53,0,1,0,0-5Zm16.44,5h2.52A2.53,2.53,0,1,0,27,16.83Zm-1.27-8.84a2.53,2.53,0,0,0-5.05,0v6.31a2.53,2.53,0,1,0,5.05,0ZM20.64,27v2.52A2.53,2.53,0,1,0,23.17,27Zm8.84-1.27a2.53,2.53,0,0,0,0-5.05H23.17a2.53,2.53,0,1,0,0,5.05Z" fill="#ffffff" class="color000 svgShape"></path></svg></span>Slack</a></li></ul></article></section></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/docs/handbook/target-language-details";window.___webpackCompilationHash="c9ef58b765f4738e4002";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-5e566f0aacf2ae55fea8.js"],"app":["/app-f5d3f54d76c0c1bb396a.js"],"component---src-templates-documentation-tsx":["/component---src-templates-documentation-tsx-cd3a671e1b036a15b1a5.js"],"component---src-templates-pages-community-tsx":["/component---src-templates-pages-community-tsx-288e99dba706b70e4a02.js"],"component---src-templates-pages-docs-handbook-index-tsx":["/component---src-templates-pages-docs-handbook-index-tsx-4f1a379df06090d61b99.js"],"component---src-templates-pages-docs-index-tsx":["/component---src-templates-pages-docs-index-tsx-e40215e3dddd739f7cc0.js"],"component---src-templates-pages-download-tsx":["/component---src-templates-pages-download-tsx-40c398bb2b61c0ece068.js"],"component---src-templates-pages-empty-tsx":["/component---src-templates-pages-empty-tsx-f8ee6f457f0f994c6937.js"],"component---src-templates-pages-index-tsx":["/component---src-templates-pages-index-tsx-452430be3ff8600cd0ab.js"],"component---src-templates-pages-publications-and-presentations-tsx":["/component---src-templates-pages-publications-and-presentations-tsx-5197064c2c6228581468.js"]};/*]]>*/</script><script src="/polyfill-5e566f0aacf2ae55fea8.js" nomodule=""></script><script src="/component---src-templates-documentation-tsx-cd3a671e1b036a15b1a5.js" async=""></script><script src="/commons-94cb126f169d90c7d2a1.js" async=""></script><script src="/app-f5d3f54d76c0c1bb396a.js" async=""></script><script src="/framework-6ec73ca9ca25442ccb50.js" async=""></script><script src="/webpack-runtime-b5d055b92630e3142f5e.js" async=""></script></body></html>