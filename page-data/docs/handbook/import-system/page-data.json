{
    "componentChunkName": "component---src-templates-documentation-tsx",
    "path": "/docs/handbook/import-system",
    "result": {"data":{"markdownRemark":{"id":"e06329b5-4f51-578f-8c8b-fc7b545e7b5f","excerpt":"The following topics are meant as collections of design ideas, with the purpose of refining them into concrete design proposals. Current Implementation of…","html":"<p><em>The following topics are meant as collections of design ideas, with the purpose of refining them into concrete design proposals.</em></p>\n<h1 id=\"current-implementation-of-imports\" style=\"position:relative;\"><a href=\"#current-implementation-of-imports\" aria-label=\"current implementation of imports permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Current Implementation of Imports</h1>\n<p>The import functionality in Lingua Franca is limited to:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import HelloWorld.lf</code></pre></div>\n<p>This can be useful if the <code class=\"language-text\">.lf</code> file is located in the same directory as the file containing the main reactor.</p>\n<p>However, several shortcomings exist in this current system which we shall discuss next.</p>\n<h2 id=\"duplicate-reactor-names\" style=\"position:relative;\"><a href=\"#duplicate-reactor-names\" aria-label=\"duplicate reactor names permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Duplicate Reactor Names</h2>\n<p>Reactors with the same name can cause issues. For example:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import CatsAndPuppies.lf // Contains a Puppy reactor\nimport MeanPuppies.lf   // Contains another Puppy reactor</code></pre></div>\n<p>There is no way for the LF program to distinguish between the two <code class=\"language-text\">Puppy</code> reactors.</p>\n<p><strong>Note.</strong> With a relatively trivial extension to the current LF import mechanism, it is possible to detect duplicates, but there is no way to circumvent them in the current LF program (i.e., the original names might have to be changed).</p>\n<h2 id=\"selective-importing\" style=\"position:relative;\"><a href=\"#selective-importing\" aria-label=\"selective importing permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Selective Importing</h2>\n<p>Selective importing is not possible. For example, using</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import CatsAndPuppies.lf</code></pre></div>\n<p>will import all the reactors contained in the <code class=\"language-text\">.lf</code> file. It would be desirable to selectively import a subset of reactors in another <code class=\"language-text\">.lf</code> file.</p>\n<h2 id=\"qualified-paths\" style=\"position:relative;\"><a href=\"#qualified-paths\" aria-label=\"qualified paths permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Qualified Paths</h2>\n<p>Currently, there is no elegant way of importing modules that are not in the same directory.</p>\n<h2 id=\"renaming\" style=\"position:relative;\"><a href=\"#renaming\" aria-label=\"renaming permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Renaming</h2>\n<p>All the reactors imported will have the name originally given to them by the original programmer. It might make sense to rename them for the current LF program.</p>\n<h2 id=\"packages\" style=\"position:relative;\"><a href=\"#packages\" aria-label=\"packages permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Packages</h2>\n<p>With the current import solution that only uses files, implementing packages in Lingua Franca is not feasible.</p>\n<h1 id=\"proposed-solution\" style=\"position:relative;\"><a href=\"#proposed-solution\" aria-label=\"proposed solution permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Proposed Solution</h1>\n<p>With inspirations from Python, we propose the following import mechanism:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">\"import\" LF_Trunc_File/module (\",\" LF_Trunc_File/module)* \n              | \"from\" LFTruncFile/module \"import\" reactor [\"as\" name]\n                (\",\" reactor [\"as\" name] )*\n              | \"from\" LF_Trunc_File/module \"import\" \"*\" </code></pre></div>\n<p>Before discussing some examples, let’s discuss <code class=\"language-text\">LF_Trunc_File/module</code>. First and foremost, <code class=\"language-text\">LF_Truc_File</code> stands for Lingua Franca Truncated File, which is a <code class=\"language-text\">name.lf</code> file with the <code class=\"language-text\">.lf</code> removed. Therefore, the legacy support for import can be carried over as:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import HelloWorld</code></pre></div>\n<p>Second, the <code class=\"language-text\">module</code> would introduce the notion of packages to Lingua Franca. The content of a module can be located in any path. To enable this facility, modules provide a Lingua Franca Meta file (LFM) that introduces the package name, and the absolute or relative paths of all the LF files that are included in that package. For example:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">// CatsAndPuppies.LFM\npackage CatsAndPuppies // Optional. The file name would be interpreted as the package name.\nimport /home/user/linguafranca/pets/Cats.lf // Absolute paths\nimport pets/Puppies.lf // Relative paths</code></pre></div>\n<p>For a package to be accessible, the <code class=\"language-text\">LFM</code> file needs to be discoverable. For example, it can be automatically added to the current directory or “installed” in a known Lingua Franca path (e.g., <code class=\"language-text\">/usr/local/LF/packages</code> or <code class=\"language-text\">/home/user/linguafranca/packages</code>).</p>\n<p>With that in mind, let’s discuss some examples on how this might work next.\nThe content of the <code class=\"language-text\">HelloWorld.lf</code> example is as follows:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">target C; \nreactor SayHello {\n    timer t;\n    reaction(t) {=\n        printf(\"Hello World.\\n\");\n    =}\n}\nmain reactor HelloWorldTest {\n    a = new HelloWorld();\n}</code></pre></div>\n<p>Let us create a <code class=\"language-text\">Greetings.lf</code> program based on HelloWorld.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">target C; \nimport HelloWorld\n\nmain reactor Greetings {\n    a = new SayHello();\n}</code></pre></div>\n<p>To generate code for <code class=\"language-text\">Greetings.lf</code>, Lingua Franca first searches for a <code class=\"language-text\">HelloWorld.lf</code> file in the same directory as <code class=\"language-text\">Greetings.lf</code>. If not found, it will look for a <code class=\"language-text\">HelloWorld.LFM</code> in the known paths. If none is found, an error is raised.</p>\n<p>Now we can demonstrate selective import. For example:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">target C; \nfrom HelloWorld import SayHello\n\nmain reactor Greetings {\n    a = new SayHello();\n}</code></pre></div>\n<p>Finally, renaming can be done by using the <code class=\"language-text\">as</code> predicate:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">target C; \nfrom HelloWorld import SayHello as SayGreetings\n\nmain reactor Greetings {\n    a = new SayHeGreetings();\n}</code></pre></div>","headings":[{"value":"Current Implementation of Imports","depth":1},{"value":"Duplicate Reactor Names","depth":2},{"value":"Selective Importing","depth":2},{"value":"Qualified Paths","depth":2},{"value":"Renaming","depth":2},{"value":"Packages","depth":2},{"value":"Proposed Solution","depth":1}],"frontmatter":{"permalink":"/docs/handbook/import-system","title":"Import System","oneline":"Import System (preliminary)","preamble":""}},"prev":{"childMarkdownRemark":{"frontmatter":{"title":"Contributing","oneline":"Contribute to Lingua Franca.","permalink":"/docs/handbook/contributing"}}},"next":{"childMarkdownRemark":{"frontmatter":{"title":"Contributing","oneline":"Contribute to Lingua Franca.","permalink":"/docs/handbook/contributing"}}}},"pageContext":{"slug":"/docs/handbook/import-system","repoPath":"/packages/documentation/copy/en/preliminary/Import System.md","lang":"en","modifiedTime":"2022-05-02T11:06:26.848Z"}},
    "staticQueryHashes": []}